{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _server = _interopRequireDefault(require(\"./server\"));\nvar _mongodb = require(\"mongodb\");\nvar _moviesDAO = _interopRequireDefault(require(\"../src/dao/moviesDAO\"));\nvar _usersDAO = _interopRequireDefault(require(\"./dao/usersDAO\"));\nvar _commentsDAO = _interopRequireDefault(require(\"./dao/commentsDAO\"));\nvar port = process.env.PORT || 8000;\n\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\n_mongodb.MongoClient.connect(process.env.MFLIX_DB_URI,\n// TODO: Connection Pooling\n// Set the poolSize to 50 connections.\n// TODO: Timeouts\n// Set the write timeout limit to 2500 milliseconds.\n{\n  useNewUrlParser: true\n})[\"catch\"](function (err) {\n  console.error(err.stack);\n  process.exit(1);\n}).then( /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(client) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _moviesDAO[\"default\"].injectDB(client);\n          case 2:\n            _context.next = 4;\n            return _usersDAO[\"default\"].injectDB(client);\n          case 4:\n            _context.next = 6;\n            return _commentsDAO[\"default\"].injectDB(client);\n          case 6:\n            _server[\"default\"].listen(port, function () {\n              console.log(\"listening on port \".concat(port));\n            });\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJNb25nb0NsaWVudCIsImNvbm5lY3QiLCJNRkxJWF9EQl9VUkkiLCJ1c2VOZXdVcmxQYXJzZXIiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsImV4aXQiLCJ0aGVuIiwiY2xpZW50IiwiTW92aWVzREFPIiwiaW5qZWN0REIiLCJVc2Vyc0RBTyIsIkNvbW1lbnRzREFPIiwiYXBwIiwibGlzdGVuIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeF9qc1xcc3JjXFwiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcHAgZnJvbSBcIi4vc2VydmVyXCJcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIlxuaW1wb3J0IE1vdmllc0RBTyBmcm9tIFwiLi4vc3JjL2Rhby9tb3ZpZXNEQU9cIlxuaW1wb3J0IFVzZXJzREFPIGZyb20gXCIuL2Rhby91c2Vyc0RBT1wiXG5pbXBvcnQgQ29tbWVudHNEQU8gZnJvbSBcIi4vZGFvL2NvbW1lbnRzREFPXCJcblxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgODAwMFxuXG4vKipcblRpY2tldDogQ29ubmVjdGlvbiBQb29saW5nXG5cblBsZWFzZSBjaGFuZ2UgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIE1vbmdvQ2xpZW50IG9iamVjdCBieSBzZXR0aW5nIHRoZVxubWF4aW11bSBjb25uZWN0aW9uIHBvb2wgc2l6ZSB0byA1MCBhY3RpdmUgY29ubmVjdGlvbnMuXG4qL1xuXG4vKipcblRpY2tldDogVGltZW91dHNcblxuUGxlYXNlIHByZXZlbnQgdGhlIHByb2dyYW0gZnJvbSB3YWl0aW5nIGluZGVmaW5pdGVseSBieSBzZXR0aW5nIHRoZSB3cml0ZVxuY29uY2VybiB0aW1lb3V0IGxpbWl0IHRvIDI1MDAgbWlsbGlzZWNvbmRzLlxuKi9cblxuTW9uZ29DbGllbnQuY29ubmVjdChcbiAgcHJvY2Vzcy5lbnYuTUZMSVhfREJfVVJJLFxuICAvLyBUT0RPOiBDb25uZWN0aW9uIFBvb2xpbmdcbiAgLy8gU2V0IHRoZSBwb29sU2l6ZSB0byA1MCBjb25uZWN0aW9ucy5cbiAgLy8gVE9ETzogVGltZW91dHNcbiAgLy8gU2V0IHRoZSB3cml0ZSB0aW1lb3V0IGxpbWl0IHRvIDI1MDAgbWlsbGlzZWNvbmRzLlxuICB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSB9LFxuKVxuICAuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVyci5zdGFjaylcbiAgICBwcm9jZXNzLmV4aXQoMSlcbiAgfSlcbiAgLnRoZW4oYXN5bmMgY2xpZW50ID0+IHtcbiAgICBhd2FpdCBNb3ZpZXNEQU8uaW5qZWN0REIoY2xpZW50KVxuICAgIGF3YWl0IFVzZXJzREFPLmluamVjdERCKGNsaWVudClcbiAgICBhd2FpdCBDb21tZW50c0RBTy5pbmplY3REQihjbGllbnQpXG4gICAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgbGlzdGVuaW5nIG9uIHBvcnQgJHtwb3J0fWApXG4gICAgfSlcbiAgfSlcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLElBQUk7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUFDLG9CQUFXLENBQUNDLE9BQU8sQ0FDakJKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFBRUMsZUFBZSxFQUFFO0FBQUssQ0FBQyxDQUMxQixTQUNPLENBQUMsVUFBQUMsR0FBRyxFQUFJO0VBQ1pDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixHQUFHLENBQUNHLEtBQUssQ0FBQztFQUN4QlYsT0FBTyxDQUFDVyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLENBQUMsQ0FBQyxDQUNEQyxJQUFJO0VBQUEseUZBQUMsaUJBQU1DLE1BQU07SUFBQTtNQUFBO1FBQUE7VUFBQTtZQUFBO1lBQUEsT0FDVkMscUJBQVMsQ0FBQ0MsUUFBUSxDQUFDRixNQUFNLENBQUM7VUFBQTtZQUFBO1lBQUEsT0FDMUJHLG9CQUFRLENBQUNELFFBQVEsQ0FBQ0YsTUFBTSxDQUFDO1VBQUE7WUFBQTtZQUFBLE9BQ3pCSSx1QkFBVyxDQUFDRixRQUFRLENBQUNGLE1BQU0sQ0FBQztVQUFBO1lBQ2xDSyxrQkFBRyxDQUFDQyxNQUFNLENBQUNwQixJQUFJLEVBQUUsWUFBTTtjQUNyQlMsT0FBTyxDQUFDWSxHQUFHLDZCQUFzQnJCLElBQUksRUFBRztZQUMxQyxDQUFDLENBQUM7VUFBQTtVQUFBO1lBQUE7UUFBQTtNQUFBO0lBQUE7RUFBQSxDQUNIO0VBQUE7SUFBQTtFQUFBO0FBQUEsSUFBQyJ9","map":{"version":3,"names":["port","process","env","PORT","MongoClient","connect","MFLIX_DB_URI","useNewUrlParser","err","console","error","stack","exit","then","client","MoviesDAO","injectDB","UsersDAO","CommentsDAO","app","listen","log"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\","sources":["index.js"],"sourcesContent":["import app from \"./server\"\nimport { MongoClient } from \"mongodb\"\nimport MoviesDAO from \"../src/dao/moviesDAO\"\nimport UsersDAO from \"./dao/usersDAO\"\nimport CommentsDAO from \"./dao/commentsDAO\"\n\nconst port = process.env.PORT || 8000\n\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\nMongoClient.connect(\n  process.env.MFLIX_DB_URI,\n  // TODO: Connection Pooling\n  // Set the poolSize to 50 connections.\n  // TODO: Timeouts\n  // Set the write timeout limit to 2500 milliseconds.\n  { useNewUrlParser: true },\n)\n  .catch(err => {\n    console.error(err.stack)\n    process.exit(1)\n  })\n  .then(async client => {\n    await MoviesDAO.injectDB(client)\n    await UsersDAO.injectDB(client)\n    await CommentsDAO.injectDB(client)\n    app.listen(port, () => {\n      console.log(`listening on port ${port}`)\n    })\n  })\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AAEA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;;AAErC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAC,oBAAW,CAACC,OAAO,CACjBJ,OAAO,CAACC,GAAG,CAACI,YAAY;AACxB;AACA;AACA;AACA;AACA;EAAEC,eAAe,EAAE;AAAK,CAAC,CAC1B,SACO,CAAC,UAAAC,GAAG,EAAI;EACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,KAAK,CAAC;EACxBV,OAAO,CAACW,IAAI,CAAC,CAAC,CAAC;AACjB,CAAC,CAAC,CACDC,IAAI;EAAA,yFAAC,iBAAMC,MAAM;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACVC,qBAAS,CAACC,QAAQ,CAACF,MAAM,CAAC;UAAA;YAAA;YAAA,OAC1BG,oBAAQ,CAACD,QAAQ,CAACF,MAAM,CAAC;UAAA;YAAA;YAAA,OACzBI,uBAAW,CAACF,QAAQ,CAACF,MAAM,CAAC;UAAA;YAClCK,kBAAG,CAACC,MAAM,CAACpB,IAAI,EAAE,YAAM;cACrBS,OAAO,CAACY,GAAG,6BAAsBrB,IAAI,EAAG;YAC1C,CAAC,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACH;EAAA;IAAA;EAAA;AAAA,IAAC"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _movies = _interopRequireDefault(require(\"../src/api/movies.route\"));\nvar _users = _interopRequireDefault(require(\"../src/api/users.route\"));\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\nprocess.env.NODE_ENV !== \"prod\" && app.use((0, _morgan[\"default\"])(\"dev\"));\napp.use(_bodyParser[\"default\"].json());\napp.use(_bodyParser[\"default\"].urlencoded({\n  extended: true\n}));\n\n// Register api routes\napp.use(\"/api/v1/movies\", _movies[\"default\"]);\napp.use(\"/api/v1/user\", _users[\"default\"]);\napp.use(\"/status\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"/\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"*\", function (req, res) {\n  return res.status(404).json({\n    error: \"not found\"\n  });\n});\nvar _default = app;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIm1vcmdhbiIsImJvZHlQYXJzZXIiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibW92aWVzIiwidXNlcnMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXhfanNcXHNyY1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSBcImJvZHktcGFyc2VyXCJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCJcbmltcG9ydCBtb3JnYW4gZnJvbSBcIm1vcmdhblwiXG5pbXBvcnQgbW92aWVzIGZyb20gXCIuLi9zcmMvYXBpL21vdmllcy5yb3V0ZVwiXG5pbXBvcnQgdXNlcnMgZnJvbSBcIi4uL3NyYy9hcGkvdXNlcnMucm91dGVcIlxuXG5jb25zdCBhcHAgPSBleHByZXNzKClcblxuYXBwLnVzZShjb3JzKCkpXG5wcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kXCIgJiYgYXBwLnVzZShtb3JnYW4oXCJkZXZcIikpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSlcblxuLy8gUmVnaXN0ZXIgYXBpIHJvdXRlc1xuYXBwLnVzZShcIi9hcGkvdjEvbW92aWVzXCIsIG1vdmllcylcbmFwcC51c2UoXCIvYXBpL3YxL3VzZXJcIiwgdXNlcnMpXG5hcHAudXNlKFwiL3N0YXR1c1wiLCBleHByZXNzLnN0YXRpYyhcImJ1aWxkXCIpKVxuYXBwLnVzZShcIi9cIiwgZXhwcmVzcy5zdGF0aWMoXCJidWlsZFwiKSlcbmFwcC51c2UoXCIqXCIsIChyZXEsIHJlcykgPT4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJub3QgZm91bmRcIiB9KSlcblxuZXhwb3J0IGRlZmF1bHQgYXBwXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFNQSxHQUFHLEdBQUcsSUFBQUMsbUJBQU8sR0FBRTtBQUVyQkQsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUMsZ0JBQUksR0FBRSxDQUFDO0FBQ2ZDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssTUFBTSxJQUFJTixHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBSyxrQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pEUCxHQUFHLENBQUNFLEdBQUcsQ0FBQ00sc0JBQVUsQ0FBQ0MsSUFBSSxFQUFFLENBQUM7QUFDMUJULEdBQUcsQ0FBQ0UsR0FBRyxDQUFDTSxzQkFBVSxDQUFDRSxVQUFVLENBQUM7RUFBRUMsUUFBUSxFQUFFO0FBQUssQ0FBQyxDQUFDLENBQUM7O0FBRWxEO0FBQ0FYLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixFQUFFVSxrQkFBTSxDQUFDO0FBQ2pDWixHQUFHLENBQUNFLEdBQUcsQ0FBQyxjQUFjLEVBQUVXLGlCQUFLLENBQUM7QUFDOUJiLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsRUFBRUQsbUJBQU8sVUFBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzNDRCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxHQUFHLEVBQUVELG1CQUFPLFVBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNyQ0QsR0FBRyxDQUFDRSxHQUFHLENBQUMsR0FBRyxFQUFFLFVBQUNZLEdBQUcsRUFBRUMsR0FBRztFQUFBLE9BQUtBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDUCxJQUFJLENBQUM7SUFBRVEsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0FBQUEsRUFBQztBQUFBLGVBRXpEakIsR0FBRztBQUFBIn0=","map":{"version":3,"names":["app","express","use","cors","process","env","NODE_ENV","morgan","bodyParser","json","urlencoded","extended","movies","users","req","res","status","error"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\","sources":["server.js"],"sourcesContent":["import express from \"express\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport morgan from \"morgan\"\nimport movies from \"../src/api/movies.route\"\nimport users from \"../src/api/users.route\"\n\nconst app = express()\n\napp.use(cors())\nprocess.env.NODE_ENV !== \"prod\" && app.use(morgan(\"dev\"))\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n\n// Register api routes\napp.use(\"/api/v1/movies\", movies)\napp.use(\"/api/v1/user\", users)\napp.use(\"/status\", express.static(\"build\"))\napp.use(\"/\", express.static(\"build\"))\napp.use(\"*\", (req, res) => res.status(404).json({ error: \"not found\" }))\n\nexport default app\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAO,GAAE;AAErBD,GAAG,CAACE,GAAG,CAAC,IAAAC,gBAAI,GAAE,CAAC;AACfC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,IAAIN,GAAG,CAACE,GAAG,CAAC,IAAAK,kBAAM,EAAC,KAAK,CAAC,CAAC;AACzDP,GAAG,CAACE,GAAG,CAACM,sBAAU,CAACC,IAAI,EAAE,CAAC;AAC1BT,GAAG,CAACE,GAAG,CAACM,sBAAU,CAACE,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;;AAElD;AACAX,GAAG,CAACE,GAAG,CAAC,gBAAgB,EAAEU,kBAAM,CAAC;AACjCZ,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEW,iBAAK,CAAC;AAC9Bb,GAAG,CAACE,GAAG,CAAC,SAAS,EAAED,mBAAO,UAAO,CAAC,OAAO,CAAC,CAAC;AAC3CD,GAAG,CAACE,GAAG,CAAC,GAAG,EAAED,mBAAO,UAAO,CAAC,OAAO,CAAC,CAAC;AACrCD,GAAG,CAACE,GAAG,CAAC,GAAG,EAAE,UAACY,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;IAAEQ,KAAK,EAAE;EAAY,CAAC,CAAC;AAAA,EAAC;AAAA,eAEzDjB,GAAG;AAAA"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\movies.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = require(\"express\");\nvar _movies = _interopRequireDefault(require(\"./movies.controller\"));\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\nvar router = new _express.Router();\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(_movies[\"default\"].apiGetMovies);\nrouter.route(\"/search\").get(_movies[\"default\"].apiSearchMovies);\nrouter.route(\"/countries\").get(_movies[\"default\"].apiGetMoviesByCountry);\nrouter.route(\"/facet-search\").get(_movies[\"default\"].apiFacetedSearch);\nrouter.route(\"/id/:id\").get(_movies[\"default\"].apiGetMovieById);\nrouter.route(\"/config-options\").get(_movies[\"default\"].getConfig);\nrouter.route(\"/comment\").post(_comments[\"default\"].apiPostComment).put(_comments[\"default\"].apiUpdateComment)[\"delete\"](_comments[\"default\"].apiDeleteComment);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsImdldCIsIk1vdmllc0N0cmwiLCJhcGlHZXRNb3ZpZXMiLCJhcGlTZWFyY2hNb3ZpZXMiLCJhcGlHZXRNb3ZpZXNCeUNvdW50cnkiLCJhcGlGYWNldGVkU2VhcmNoIiwiYXBpR2V0TW92aWVCeUlkIiwiZ2V0Q29uZmlnIiwicG9zdCIsIkNvbW1lbnRzQ3RybCIsImFwaVBvc3RDb21tZW50IiwicHV0IiwiYXBpVXBkYXRlQ29tbWVudCIsImFwaURlbGV0ZUNvbW1lbnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4X2pzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJtb3ZpZXMucm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IE1vdmllc0N0cmwgZnJvbSBcIi4vbW92aWVzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IENvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9cIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVzKVxucm91dGVyLnJvdXRlKFwiL3NlYXJjaFwiKS5nZXQoTW92aWVzQ3RybC5hcGlTZWFyY2hNb3ZpZXMpXG5yb3V0ZXIucm91dGUoXCIvY291bnRyaWVzXCIpLmdldChNb3ZpZXNDdHJsLmFwaUdldE1vdmllc0J5Q291bnRyeSlcbnJvdXRlci5yb3V0ZShcIi9mYWNldC1zZWFyY2hcIikuZ2V0KE1vdmllc0N0cmwuYXBpRmFjZXRlZFNlYXJjaClcbnJvdXRlci5yb3V0ZShcIi9pZC86aWRcIikuZ2V0KE1vdmllc0N0cmwuYXBpR2V0TW92aWVCeUlkKVxucm91dGVyLnJvdXRlKFwiL2NvbmZpZy1vcHRpb25zXCIpLmdldChNb3ZpZXNDdHJsLmdldENvbmZpZylcblxucm91dGVyXG4gIC5yb3V0ZShcIi9jb21tZW50XCIpXG4gIC5wb3N0KENvbW1lbnRzQ3RybC5hcGlQb3N0Q29tbWVudClcbiAgLnB1dChDb21tZW50c0N0cmwuYXBpVXBkYXRlQ29tbWVudClcbiAgLmRlbGV0ZShDb21tZW50c0N0cmwuYXBpRGVsZXRlQ29tbWVudClcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQSxJQUFNQSxNQUFNLEdBQUcsSUFBSUMsZUFBTSxFQUFFOztBQUUzQjtBQUNBRCxNQUFNLENBQUNFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxrQkFBVSxDQUFDQyxZQUFZLENBQUM7QUFDOUNMLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxHQUFHLENBQUNDLGtCQUFVLENBQUNFLGVBQWUsQ0FBQztBQUN2RE4sTUFBTSxDQUFDRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQVUsQ0FBQ0cscUJBQXFCLENBQUM7QUFDaEVQLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDQyxHQUFHLENBQUNDLGtCQUFVLENBQUNJLGdCQUFnQixDQUFDO0FBQzlEUixNQUFNLENBQUNFLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxrQkFBVSxDQUFDSyxlQUFlLENBQUM7QUFDdkRULE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQVUsQ0FBQ00sU0FBUyxDQUFDO0FBRXpEVixNQUFNLENBQ0hFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FDakJTLElBQUksQ0FBQ0Msb0JBQVksQ0FBQ0MsY0FBYyxDQUFDLENBQ2pDQyxHQUFHLENBQUNGLG9CQUFZLENBQUNHLGdCQUFnQixDQUFDLFVBQzVCLENBQUNILG9CQUFZLENBQUNJLGdCQUFnQixDQUFDO0FBQUEsZUFFekJoQixNQUFNO0FBQUEifQ==","map":{"version":3,"names":["router","Router","route","get","MoviesCtrl","apiGetMovies","apiSearchMovies","apiGetMoviesByCountry","apiFacetedSearch","apiGetMovieById","getConfig","post","CommentsCtrl","apiPostComment","put","apiUpdateComment","apiDeleteComment"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\api\\","sources":["movies.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport MoviesCtrl from \"./movies.controller\"\nimport CommentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(MoviesCtrl.apiGetMovies)\nrouter.route(\"/search\").get(MoviesCtrl.apiSearchMovies)\nrouter.route(\"/countries\").get(MoviesCtrl.apiGetMoviesByCountry)\nrouter.route(\"/facet-search\").get(MoviesCtrl.apiFacetedSearch)\nrouter.route(\"/id/:id\").get(MoviesCtrl.apiGetMovieById)\nrouter.route(\"/config-options\").get(MoviesCtrl.getConfig)\n\nrouter\n  .route(\"/comment\")\n  .post(CommentsCtrl.apiPostComment)\n  .put(CommentsCtrl.apiUpdateComment)\n  .delete(CommentsCtrl.apiDeleteComment)\n\nexport default router\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAM,EAAE;;AAE3B;AACAD,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACC,YAAY,CAAC;AAC9CL,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACE,eAAe,CAAC;AACvDN,MAAM,CAACE,KAAK,CAAC,YAAY,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACG,qBAAqB,CAAC;AAChEP,MAAM,CAACE,KAAK,CAAC,eAAe,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACI,gBAAgB,CAAC;AAC9DR,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACK,eAAe,CAAC;AACvDT,MAAM,CAACE,KAAK,CAAC,iBAAiB,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACM,SAAS,CAAC;AAEzDV,MAAM,CACHE,KAAK,CAAC,UAAU,CAAC,CACjBS,IAAI,CAACC,oBAAY,CAACC,cAAc,CAAC,CACjCC,GAAG,CAACF,oBAAY,CAACG,gBAAgB,CAAC,UAC5B,CAACH,oBAAY,CAACI,gBAAgB,CAAC;AAAA,eAEzBhB,MAAM;AAAA"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\movies.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar MoviesController = /*#__PURE__*/function () {\n  function MoviesController() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesController);\n  }\n  (0, _createClass2[\"default\"])(MoviesController, null, [{\n    key: \"apiGetMovies\",\n    value: function () {\n      var _apiGetMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var MOVIES_PER_PAGE, _yield$MoviesDAO$getM, moviesList, totalNumMovies, response;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                _context.next = 3;\n                return _moviesDAO[\"default\"].getMovies();\n              case 3:\n                _yield$MoviesDAO$getM = _context.sent;\n                moviesList = _yield$MoviesDAO$getM.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: 0,\n                  filters: {},\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      function apiGetMovies(_x, _x2, _x3) {\n        return _apiGetMovies.apply(this, arguments);\n      }\n      return apiGetMovies;\n    }()\n  }, {\n    key: \"apiGetMoviesByCountry\",\n    value: function () {\n      var _apiGetMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var countries, countryList, moviesList, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                countries = req.query.countries == \"\" ? \"USA\" : req.query.countries;\n                countryList = Array.isArray(countries) ? countries : Array(countries);\n                _context2.next = 4;\n                return _moviesDAO[\"default\"].getMoviesByCountry(countryList);\n              case 4:\n                moviesList = _context2.sent;\n                response = {\n                  titles: moviesList\n                };\n                res.json(response);\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function apiGetMoviesByCountry(_x4, _x5, _x6) {\n        return _apiGetMoviesByCountry.apply(this, arguments);\n      }\n      return apiGetMoviesByCountry;\n    }()\n  }, {\n    key: \"apiGetMovieById\",\n    value: function () {\n      var _apiGetMovieById = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var id, movie, updated_type;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                id = req.params.id || {};\n                _context3.next = 4;\n                return _moviesDAO[\"default\"].getMovieByID(id);\n              case 4:\n                movie = _context3.sent;\n                if (movie) {\n                  _context3.next = 8;\n                  break;\n                }\n                res.status(404).json({\n                  error: \"Not found\"\n                });\n                return _context3.abrupt(\"return\");\n              case 8:\n                updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\";\n                res.json({\n                  movie: movie,\n                  updated_type: updated_type\n                });\n                _context3.next = 16;\n                break;\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"api, \".concat(_context3.t0));\n                res.status(500).json({\n                  error: _context3.t0\n                });\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 12]]);\n      }));\n      function apiGetMovieById(_x7, _x8, _x9) {\n        return _apiGetMovieById.apply(this, arguments);\n      }\n      return apiGetMovieById;\n    }()\n  }, {\n    key: \"apiSearchMovies\",\n    value: function () {\n      var _apiSearchMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var MOVIES_PER_PAGE, page, searchType, filters, _yield$MoviesDAO$getM2, moviesList, totalNumMovies, response;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page:, \".concat(e));\n                  page = 0;\n                }\n                try {\n                  searchType = Object.keys(req.query)[0];\n                } catch (e) {\n                  console.error(\"No search keys specified: \".concat(e));\n                }\n                filters = {};\n                _context4.t0 = searchType;\n                _context4.next = _context4.t0 === \"genre\" ? 7 : _context4.t0 === \"cast\" ? 9 : _context4.t0 === \"text\" ? 11 : 13;\n                break;\n              case 7:\n                if (req.query.genre !== \"\") {\n                  filters.genre = req.query.genre;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 9:\n                if (req.query.cast !== \"\") {\n                  filters.cast = req.query.cast;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 11:\n                if (req.query.text !== \"\") {\n                  filters.text = req.query.text;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 13:\n                _context4.next = 15;\n                return _moviesDAO[\"default\"].getMovies({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n              case 15:\n                _yield$MoviesDAO$getM2 = _context4.sent;\n                moviesList = _yield$MoviesDAO$getM2.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM2.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      function apiSearchMovies(_x10, _x11, _x12) {\n        return _apiSearchMovies.apply(this, arguments);\n      }\n      return apiSearchMovies;\n    }()\n  }, {\n    key: \"apiFacetedSearch\",\n    value: function () {\n      var _apiFacetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var MOVIES_PER_PAGE, page, filters, facetedSearchResult, response;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page, defaulting to 0: \".concat(e));\n                  page = 0;\n                }\n                filters = {};\n                filters = req.query.cast !== \"\" ? {\n                  cast: new RegExp(req.query.cast, \"i\")\n                } : {\n                  cast: \"Tom Hanks\"\n                };\n                _context5.next = 6;\n                return _moviesDAO[\"default\"].facetedSearch({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n              case 6:\n                facetedSearchResult = _context5.sent;\n                response = {\n                  movies: facetedSearchResult.movies,\n                  facets: {\n                    runtime: facetedSearchResult.runtime,\n                    rating: facetedSearchResult.rating\n                  },\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: facetedSearchResult.count\n                };\n                res.json(response);\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      function apiFacetedSearch(_x13, _x14, _x15) {\n        return _apiFacetedSearch.apply(this, arguments);\n      }\n      return apiFacetedSearch;\n    }()\n  }, {\n    key: \"getConfig\",\n    value: function () {\n      var _getConfig = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res, next) {\n        var _yield$MoviesDAO$getC, poolSize, wtimeout, authInfo, response;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _moviesDAO[\"default\"].getConfiguration();\n              case 2:\n                _yield$MoviesDAO$getC = _context6.sent;\n                poolSize = _yield$MoviesDAO$getC.poolSize;\n                wtimeout = _yield$MoviesDAO$getC.wtimeout;\n                authInfo = _yield$MoviesDAO$getC.authInfo;\n                try {\n                  response = _objectSpread({\n                    pool_size: poolSize,\n                    wtimeout: wtimeout\n                  }, authInfo);\n                  res.json(response);\n                } catch (e) {\n                  res.status(500).json({\n                    error: e\n                  });\n                }\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n      function getConfig(_x16, _x17, _x18) {\n        return _getConfig.apply(this, arguments);\n      }\n      return getConfig;\n    }()\n  }]);\n  return MoviesController;\n}();\nexports[\"default\"] = MoviesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb3ZpZXNDb250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIk1PVklFU19QRVJfUEFHRSIsIk1vdmllc0RBTyIsImdldE1vdmllcyIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsInJlc3BvbnNlIiwibW92aWVzIiwicGFnZSIsImZpbHRlcnMiLCJlbnRyaWVzX3Blcl9wYWdlIiwidG90YWxfcmVzdWx0cyIsImpzb24iLCJjb3VudHJpZXMiLCJxdWVyeSIsImNvdW50cnlMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0TW92aWVzQnlDb3VudHJ5IiwidGl0bGVzIiwiaWQiLCJwYXJhbXMiLCJnZXRNb3ZpZUJ5SUQiLCJtb3ZpZSIsInN0YXR1cyIsImVycm9yIiwidXBkYXRlZF90eXBlIiwibGFzdHVwZGF0ZWQiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwiZSIsInNlYXJjaFR5cGUiLCJPYmplY3QiLCJrZXlzIiwiZ2VucmUiLCJjYXN0IiwidGV4dCIsIlJlZ0V4cCIsImZhY2V0ZWRTZWFyY2giLCJmYWNldGVkU2VhcmNoUmVzdWx0IiwiZmFjZXRzIiwicnVudGltZSIsInJhdGluZyIsImNvdW50IiwiZ2V0Q29uZmlndXJhdGlvbiIsInBvb2xTaXplIiwid3RpbWVvdXQiLCJhdXRoSW5mbyIsInBvb2xfc2l6ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXhfanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbIm1vdmllcy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZXNDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgY29uc3QgeyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9ID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllcygpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgbW92aWVzOiBtb3ZpZXNMaXN0LFxuICAgICAgcGFnZTogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogdG90YWxOdW1Nb3ZpZXMsXG4gICAgfVxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUdldE1vdmllc0J5Q291bnRyeShyZXEsIHJlcywgbmV4dCkge1xuICAgIGxldCBjb3VudHJpZXMgPSByZXEucXVlcnkuY291bnRyaWVzID09IFwiXCIgPyBcIlVTQVwiIDogcmVxLnF1ZXJ5LmNvdW50cmllc1xuICAgIGxldCBjb3VudHJ5TGlzdCA9IEFycmF5LmlzQXJyYXkoY291bnRyaWVzKSA/IGNvdW50cmllcyA6IEFycmF5KGNvdW50cmllcylcbiAgICBsZXQgbW92aWVzTGlzdCA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZXNCeUNvdW50cnkoY291bnRyeUxpc3QpXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgdGl0bGVzOiBtb3ZpZXNMaXN0LFxuICAgIH1cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlHZXRNb3ZpZUJ5SWQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZCB8fCB7fVxuICAgICAgbGV0IG1vdmllID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChpZClcbiAgICAgIGlmICghbW92aWUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJOb3QgZm91bmRcIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCB1cGRhdGVkX3R5cGUgPSBtb3ZpZS5sYXN0dXBkYXRlZCBpbnN0YW5jZW9mIERhdGUgPyBcIkRhdGVcIiA6IFwib3RoZXJcIlxuICAgICAgcmVzLmpzb24oeyBtb3ZpZSwgdXBkYXRlZF90eXBlIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coYGFwaSwgJHtlfWApXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaVNlYXJjaE1vdmllcyhyZXEsIHJlcywgbmV4dCkge1xuICAgIGNvbnN0IE1PVklFU19QRVJfUEFHRSA9IDIwXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlOiwgJHtlfWApXG4gICAgICBwYWdlID0gMFxuICAgIH1cbiAgICBsZXQgc2VhcmNoVHlwZVxuICAgIHRyeSB7XG4gICAgICBzZWFyY2hUeXBlID0gT2JqZWN0LmtleXMocmVxLnF1ZXJ5KVswXVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIHNlYXJjaCBrZXlzIHNwZWNpZmllZDogJHtlfWApXG4gICAgfVxuXG4gICAgbGV0IGZpbHRlcnMgPSB7fVxuXG4gICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICBjYXNlIFwiZ2VucmVcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5nZW5yZSAhPT0gXCJcIikge1xuICAgICAgICAgIGZpbHRlcnMuZ2VucmUgPSByZXEucXVlcnkuZ2VucmVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcImNhc3RcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy5jYXN0ID0gcmVxLnF1ZXJ5LmNhc3RcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgaWYgKHJlcS5xdWVyeS50ZXh0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgZmlsdGVycy50ZXh0ID0gcmVxLnF1ZXJ5LnRleHRcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgICB9XG5cbiAgICBjb25zdCB7IG1vdmllc0xpc3QsIHRvdGFsTnVtTW92aWVzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVzKHtcbiAgICAgIGZpbHRlcnMsXG4gICAgICBwYWdlLFxuICAgICAgTU9WSUVTX1BFUl9QQUdFLFxuICAgIH0pXG5cbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICBtb3ZpZXM6IG1vdmllc0xpc3QsXG4gICAgICBwYWdlOiBwYWdlLFxuICAgICAgZmlsdGVycyxcbiAgICAgIGVudHJpZXNfcGVyX3BhZ2U6IE1PVklFU19QRVJfUEFHRSxcbiAgICAgIHRvdGFsX3Jlc3VsdHM6IHRvdGFsTnVtTW92aWVzLFxuICAgIH1cblxuICAgIHJlcy5qc29uKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUZhY2V0ZWRTZWFyY2gocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBNT1ZJRVNfUEVSX1BBR0UgPSAyMFxuXG4gICAgbGV0IHBhZ2VcbiAgICB0cnkge1xuICAgICAgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSA6IDBcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBHb3QgYmFkIHZhbHVlIGZvciBwYWdlLCBkZWZhdWx0aW5nIHRvIDA6ICR7ZX1gKVxuICAgICAgcGFnZSA9IDBcbiAgICB9XG5cbiAgICBsZXQgZmlsdGVycyA9IHt9XG5cbiAgICBmaWx0ZXJzID1cbiAgICAgIHJlcS5xdWVyeS5jYXN0ICE9PSBcIlwiXG4gICAgICAgID8geyBjYXN0OiBuZXcgUmVnRXhwKHJlcS5xdWVyeS5jYXN0LCBcImlcIikgfVxuICAgICAgICA6IHsgY2FzdDogXCJUb20gSGFua3NcIiB9XG5cbiAgICBjb25zdCBmYWNldGVkU2VhcmNoUmVzdWx0ID0gYXdhaXQgTW92aWVzREFPLmZhY2V0ZWRTZWFyY2goe1xuICAgICAgZmlsdGVycyxcbiAgICAgIHBhZ2UsXG4gICAgICBNT1ZJRVNfUEVSX1BBR0UsXG4gICAgfSlcblxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIG1vdmllczogZmFjZXRlZFNlYXJjaFJlc3VsdC5tb3ZpZXMsXG4gICAgICBmYWNldHM6IHtcbiAgICAgICAgcnVudGltZTogZmFjZXRlZFNlYXJjaFJlc3VsdC5ydW50aW1lLFxuICAgICAgICByYXRpbmc6IGZhY2V0ZWRTZWFyY2hSZXN1bHQucmF0aW5nLFxuICAgICAgfSxcbiAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICBmaWx0ZXJzLFxuICAgICAgZW50cmllc19wZXJfcGFnZTogTU9WSUVTX1BFUl9QQUdFLFxuICAgICAgdG90YWxfcmVzdWx0czogZmFjZXRlZFNlYXJjaFJlc3VsdC5jb3VudCxcbiAgICB9XG5cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRDb25maWcocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCB7IHBvb2xTaXplLCB3dGltZW91dCwgYXV0aEluZm8gfSA9IGF3YWl0IE1vdmllc0RBTy5nZXRDb25maWd1cmF0aW9uKClcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgICBwb29sX3NpemU6IHBvb2xTaXplLFxuICAgICAgICB3dGltZW91dCxcbiAgICAgICAgLi4uYXV0aEluZm8sXG4gICAgICB9XG4gICAgICByZXMuanNvbihyZXNwb25zZSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAg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","map":{"version":3,"names":["MoviesController","req","res","next","MOVIES_PER_PAGE","MoviesDAO","getMovies","moviesList","totalNumMovies","response","movies","page","filters","entries_per_page","total_results","json","countries","query","countryList","Array","isArray","getMoviesByCountry","titles","id","params","getMovieByID","movie","status","error","updated_type","lastupdated","Date","console","log","parseInt","e","searchType","Object","keys","genre","cast","text","RegExp","facetedSearch","facetedSearchResult","facets","runtime","rating","count","getConfiguration","poolSize","wtimeout","authInfo","pool_size"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\api\\","sources":["movies.controller.js"],"sourcesContent":["import MoviesDAO from \"../dao/moviesDAO\"\n\nexport default class MoviesController {\n  static async apiGetMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies()\n    let response = {\n      movies: moviesList,\n      page: 0,\n      filters: {},\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMoviesByCountry(req, res, next) {\n    let countries = req.query.countries == \"\" ? \"USA\" : req.query.countries\n    let countryList = Array.isArray(countries) ? countries : Array(countries)\n    let moviesList = await MoviesDAO.getMoviesByCountry(countryList)\n    let response = {\n      titles: moviesList,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMovieById(req, res, next) {\n    try {\n      let id = req.params.id || {}\n      let movie = await MoviesDAO.getMovieByID(id)\n      if (!movie) {\n        res.status(404).json({ error: \"Not found\" })\n        return\n      }\n      let updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\"\n      res.json({ movie, updated_type })\n    } catch (e) {\n      console.log(`api, ${e}`)\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async apiSearchMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page:, ${e}`)\n      page = 0\n    }\n    let searchType\n    try {\n      searchType = Object.keys(req.query)[0]\n    } catch (e) {\n      console.error(`No search keys specified: ${e}`)\n    }\n\n    let filters = {}\n\n    switch (searchType) {\n      case \"genre\":\n        if (req.query.genre !== \"\") {\n          filters.genre = req.query.genre\n        }\n        break\n      case \"cast\":\n        if (req.query.cast !== \"\") {\n          filters.cast = req.query.cast\n        }\n        break\n      case \"text\":\n        if (req.query.text !== \"\") {\n          filters.text = req.query.text\n        }\n        break\n      default:\n      // nothing to do\n    }\n\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: moviesList,\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n\n    res.json(response)\n  }\n\n  static async apiFacetedSearch(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page, defaulting to 0: ${e}`)\n      page = 0\n    }\n\n    let filters = {}\n\n    filters =\n      req.query.cast !== \"\"\n        ? { cast: new RegExp(req.query.cast, \"i\") }\n        : { cast: \"Tom Hanks\" }\n\n    const facetedSearchResult = await MoviesDAO.facetedSearch({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: facetedSearchResult.movies,\n      facets: {\n        runtime: facetedSearchResult.runtime,\n        rating: facetedSearchResult.rating,\n      },\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: facetedSearchResult.count,\n    }\n\n    res.json(response)\n  }\n\n  static async getConfig(req, res, next) {\n    const { poolSize, wtimeout, authInfo } = await MoviesDAO.getConfiguration()\n    try {\n      let response = {\n        pool_size: poolSize,\n        wtimeout,\n        ...authInfo,\n      }\n      res.json(response)\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\moviesDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _bson = require(\"bson\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar movies;\nvar mflix;\nvar DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]];\nvar MoviesDAO = /*#__PURE__*/function () {\n  function MoviesDAO() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesDAO);\n  }\n  (0, _createClass2[\"default\"])(MoviesDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!movies) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS);\n              case 5:\n                mflix = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"movies\");\n              case 8:\n                movies = _context.sent;\n                this.movies = movies; // this is only for testing\n                _context.next = 15;\n                break;\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish a collection handle in moviesDAO: \".concat(_context.t0));\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n     * Retrieves the connection pool size, write concern and user roles on the\n     * current client.\n     * @returns {Promise<ConfigurationResult>} An object with configuration details.\n     */\n  }, {\n    key: \"getConfiguration\",\n    value: function () {\n      var _getConfiguration = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var roleInfo, authInfo, _movies$s$db$serverCo, poolSize, wtimeout, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return mflix.command({\n                  connectionStatus: 1\n                });\n              case 2:\n                roleInfo = _context2.sent;\n                authInfo = roleInfo.authInfo.authenticatedUserRoles[0];\n                _movies$s$db$serverCo = movies.s.db.serverConfig.s.options, poolSize = _movies$s$db$serverCo.poolSize, wtimeout = _movies$s$db$serverCo.wtimeout;\n                response = {\n                  poolSize: poolSize,\n                  wtimeout: wtimeout,\n                  authInfo: authInfo\n                };\n                return _context2.abrupt(\"return\", response);\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function getConfiguration() {\n        return _getConfiguration.apply(this, arguments);\n      }\n      return getConfiguration;\n    }()\n    /**\n     * Finds and returns movies originating from one or more countries.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {string[]} countries - The list of countries.\n     * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n     */\n  }, {\n    key: \"getMoviesByCountry\",\n    value: function () {\n      var _getMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(countries) {\n        var cursor;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return movies.find().limit(1);\n              case 3:\n                cursor = _context3.sent;\n                _context3.next = 10;\n                break;\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to issue find command, \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", []);\n              case 10:\n                return _context3.abrupt(\"return\", cursor.toArray());\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n      function getMoviesByCountry(_x2) {\n        return _getMoviesByCountry.apply(this, arguments);\n      }\n      return getMoviesByCountry;\n    }()\n    /**\n     * Finds and returns movies matching a given text in their title or description.\n     * @param {string} text - The text to match with.\n     * @returns {QueryParams} The QueryParams for text search\n     */\n  }, {\n    key: \"textSearchQuery\",\n    value: function textSearchQuery(text) {\n      var query = {\n        $text: {\n          $search: text\n        }\n      };\n      var meta_score = {\n        $meta: \"textScore\"\n      };\n      var sort = [[\"score\", meta_score]];\n      var project = {\n        score: meta_score\n      };\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     * Finds and returns movies including one or more cast members.\n     * @param {string[]} cast - The cast members to match with.\n     * @returns {QueryParams} The QueryParams for cast search\n     */\n  }, {\n    key: \"castSearchQuery\",\n    value: function castSearchQuery(cast) {\n      var searchCast = Array.isArray(cast) ? cast : cast.split(\", \");\n      var query = {\n        cast: {\n          $in: searchCast\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     * Finds and returns movies matching a one or more genres.\n     * @param {string[]} genre - The genres to match with.\n     * @returns {QueryParams} The QueryParams for genre search\n     */\n  }, {\n    key: \"genreSearchQuery\",\n    value: function genreSearchQuery(genre) {\n      /**\n      Ticket: Text and Subfield Search\n       Given an array of one or more genres, construct a query that searches\n      MongoDB for movies with that genre.\n      */\n\n      var searchGenre = Array.isArray(genre) ? genre : genre.split(\", \");\n\n      // TODO Ticket: Text and Subfield Search\n      // Construct a query that will search for the chosen genre.\n      var query = {};\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     *\n     * @param {Object} filters - The search parameter to use in the query. Comes\n     * in the form of `{cast: { $in: [...castMembers]}}`\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {FacetedSearchReturn} FacetedSearchReturn\n     */\n  }, {\n    key: \"facetedSearch\",\n    value: function () {\n      var _facetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var _ref,\n          _ref$filters,\n          filters,\n          _ref$page,\n          page,\n          _ref$moviesPerPage,\n          moviesPerPage,\n          matchStage,\n          sortStage,\n          countingPipeline,\n          skipStage,\n          limitStage,\n          facetStage,\n          queryPipeline,\n          results,\n          count,\n          _args4 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, _ref$filters = _ref.filters, filters = _ref$filters === void 0 ? null : _ref$filters, _ref$page = _ref.page, page = _ref$page === void 0 ? 0 : _ref$page, _ref$moviesPerPage = _ref.moviesPerPage, moviesPerPage = _ref$moviesPerPage === void 0 ? 20 : _ref$moviesPerPage;\n                if (!(!filters || !filters.cast)) {\n                  _context4.next = 3;\n                  break;\n                }\n                throw new Error(\"Must specify cast members to filter by.\");\n              case 3:\n                matchStage = {\n                  $match: filters\n                };\n                sortStage = {\n                  $sort: {\n                    \"tomatoes.viewer.numReviews\": -1\n                  }\n                };\n                countingPipeline = [matchStage, sortStage, {\n                  $count: \"count\"\n                }];\n                skipStage = {\n                  $skip: moviesPerPage * page\n                };\n                limitStage = {\n                  $limit: moviesPerPage\n                };\n                facetStage = {\n                  $facet: {\n                    runtime: [{\n                      $bucket: {\n                        groupBy: \"$runtime\",\n                        boundaries: [0, 60, 90, 120, 180],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    rating: [{\n                      $bucket: {\n                        groupBy: \"$metacritic\",\n                        boundaries: [0, 50, 70, 90, 100],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    movies: [{\n                      $addFields: {\n                        title: \"$title\"\n                      }\n                    }]\n                  }\n                };\n                /**\n                Ticket: Faceted Search\n                 Please append the skipStage, limitStage, and facetStage to the queryPipeline\n                (in that order). You can accomplish this by adding the stages directly to\n                the queryPipeline.\n                 The queryPipeline is a Javascript array, so you can use push() or concat()\n                to complete this task, but you might have to do something about `const`.\n                */\n                queryPipeline = [matchStage, sortStage\n                // TODO Ticket: Faceted Search\n                // Add the stages to queryPipeline in the correct order.\n                ];\n                _context4.prev = 10;\n                _context4.next = 13;\n                return movies.aggregate(queryPipeline);\n              case 13:\n                _context4.next = 15;\n                return _context4.sent.next();\n              case 15:\n                results = _context4.sent;\n                _context4.next = 18;\n                return movies.aggregate(countingPipeline);\n              case 18:\n                _context4.next = 20;\n                return _context4.sent.next();\n              case 20:\n                count = _context4.sent;\n                return _context4.abrupt(\"return\", _objectSpread(_objectSpread({}, results), count));\n              case 24:\n                _context4.prev = 24;\n                _context4.t0 = _context4[\"catch\"](10);\n                return _context4.abrupt(\"return\", {\n                  error: \"Results too large, be more restrictive in filter\"\n                });\n              case 27:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[10, 24]]);\n      }));\n      function facetedSearch() {\n        return _facetedSearch.apply(this, arguments);\n      }\n      return facetedSearch;\n    }()\n    /**\n     * Finds and returns movies by country.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {Object} filters - The search parameters to use in the query.\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {GetMoviesResult} An object with movie results and total results\n     * that would match this query\n     */\n  }, {\n    key: \"getMovies\",\n    value: function () {\n      var _getMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var _ref2,\n          _ref2$filters,\n          filters,\n          _ref2$page,\n          page,\n          _ref2$moviesPerPage,\n          moviesPerPage,\n          queryParams,\n          _queryParams,\n          _queryParams$query,\n          query,\n          _queryParams$project,\n          project,\n          _queryParams$sort,\n          sort,\n          cursor,\n          displayCursor,\n          moviesList,\n          totalNumMovies,\n          _args5 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref2 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, _ref2$filters = _ref2.filters, filters = _ref2$filters === void 0 ? null : _ref2$filters, _ref2$page = _ref2.page, page = _ref2$page === void 0 ? 0 : _ref2$page, _ref2$moviesPerPage = _ref2.moviesPerPage, moviesPerPage = _ref2$moviesPerPage === void 0 ? 20 : _ref2$moviesPerPage;\n                queryParams = {};\n                if (filters) {\n                  if (\"text\" in filters) {\n                    queryParams = this.textSearchQuery(filters[\"text\"]);\n                  } else if (\"cast\" in filters) {\n                    queryParams = this.castSearchQuery(filters[\"cast\"]);\n                  } else if (\"genre\" in filters) {\n                    queryParams = this.genreSearchQuery(filters[\"genre\"]);\n                  }\n                }\n                _queryParams = queryParams, _queryParams$query = _queryParams.query, query = _queryParams$query === void 0 ? {} : _queryParams$query, _queryParams$project = _queryParams.project, project = _queryParams$project === void 0 ? {} : _queryParams$project, _queryParams$sort = _queryParams.sort, sort = _queryParams$sort === void 0 ? DEFAULT_SORT : _queryParams$sort;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return movies.find(query).project(project).sort(sort);\n              case 7:\n                cursor = _context5.sent;\n                _context5.next = 14;\n                break;\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](4);\n                console.error(\"Unable to issue find command, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n              case 14:\n                /**\n                Ticket: Paging\n                 Before this method returns back to the API, use the \"moviesPerPage\" and\n                \"page\" arguments to decide the movies to display.\n                 Paging can be implemented by using the skip() and limit() cursor methods.\n                */\n                // TODO Ticket: Paging\n                // Use the cursor to only return the movies that belong on the current page\n                displayCursor = cursor.limit(moviesPerPage);\n                _context5.prev = 15;\n                _context5.next = 18;\n                return displayCursor.toArray();\n              case 18:\n                moviesList = _context5.sent;\n                if (!(page === 0)) {\n                  _context5.next = 25;\n                  break;\n                }\n                _context5.next = 22;\n                return movies.countDocuments(query);\n              case 22:\n                _context5.t1 = _context5.sent;\n                _context5.next = 26;\n                break;\n              case 25:\n                _context5.t1 = 0;\n              case 26:\n                totalNumMovies = _context5.t1;\n                return _context5.abrupt(\"return\", {\n                  moviesList: moviesList,\n                  totalNumMovies: totalNumMovies\n                });\n              case 30:\n                _context5.prev = 30;\n                _context5.t2 = _context5[\"catch\"](15);\n                console.error(\"Unable to convert cursor to array or problem counting documents, \".concat(_context5.t2));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n              case 34:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10], [15, 30]]);\n      }));\n      function getMovies() {\n        return _getMovies.apply(this, arguments);\n      }\n      return getMovies;\n    }()\n    /**\n     * Gets a movie by its id\n     * @param {string} id - The desired movie id, the _id in Mongo\n     * @returns {MflixMovie | null} Returns either a single movie or nothing\n     */\n  }, {\n    key: \"getMovieByID\",\n    value: function () {\n      var _getMovieByID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(id) {\n        var pipeline;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                /**\n                Ticket: Get Comments\n                 Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n                matching that movie's ID.\n                 The $match stage is already completed. You will need to add a $lookup\n                stage that searches the `comments` collection for the correct comments.\n                */\n                // TODO Ticket: Get Comments\n                // Implement the required pipeline.\n                pipeline = [{\n                  $match: {\n                    _id: (0, _bson.ObjectId)(id)\n                  }\n                }];\n                _context6.next = 4;\n                return movies.aggregate(pipeline).next();\n              case 4:\n                return _context6.abrupt(\"return\", _context6.sent);\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](0);\n                /**\n                Ticket: Error Handling\n                 Handle the error that occurs when an invalid ID is passed to this method.\n                When this specific error is thrown, the method should return `null`.\n                */\n\n                // TODO Ticket: Error Handling\n                // Catch the InvalidId error by string matching, and then handle it.\n                console.error(\"Something went wrong in getMovieByID: \".concat(_context6.t0));\n                throw _context6.t0;\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 7]]);\n      }));\n      function getMovieByID(_x3) {\n        return _getMovieByID.apply(this, arguments);\n      }\n      return getMovieByID;\n    }()\n  }]);\n  return MoviesDAO;\n}();\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\nexports[\"default\"] = MoviesDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb3ZpZXMiLCJtZmxpeCIsIkRFRkFVTFRfU09SVCIsIk1vdmllc0RBTyIsImNvbm4iLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNRkxJWF9OUyIsImNvbGxlY3Rpb24iLCJjb25zb2xlIiwiZXJyb3IiLCJjb21tYW5kIiwiY29ubmVjdGlvblN0YXR1cyIsInJvbGVJbmZvIiwiYXV0aEluZm8iLCJhdXRoZW50aWNhdGVkVXNlclJvbGVzIiwicyIsInNlcnZlckNvbmZpZyIsIm9wdGlvbnMiLCJwb29sU2l6ZSIsInd0aW1lb3V0IiwicmVzcG9uc2UiLCJjb3VudHJpZXMiLCJmaW5kIiwibGltaXQiLCJjdXJzb3IiLCJ0b0FycmF5IiwidGV4dCIsInF1ZXJ5IiwiJHRleHQiLCIkc2VhcmNoIiwibWV0YV9zY29yZSIsIiRtZXRhIiwic29ydCIsInByb2plY3QiLCJzY29yZSIsImNhc3QiLCJzZWFyY2hDYXN0IiwiQXJyYXkiLCJpc0FycmF5Iiwic3BsaXQiLCIkaW4iLCJnZW5yZSIsInNlYXJjaEdlbnJlIiwiZmlsdGVycyIsInBhZ2UiLCJtb3ZpZXNQZXJQYWdlIiwiRXJyb3IiLCJtYXRjaFN0YWdlIiwiJG1hdGNoIiwic29ydFN0YWdlIiwiJHNvcnQiLCJjb3VudGluZ1BpcGVsaW5lIiwiJGNvdW50Iiwic2tpcFN0YWdlIiwiJHNraXAiLCJsaW1pdFN0YWdlIiwiJGxpbWl0IiwiZmFjZXRTdGFnZSIsIiRmYWNldCIsInJ1bnRpbWUiLCIkYnVja2V0IiwiZ3JvdXBCeSIsImJvdW5kYXJpZXMiLCJvdXRwdXQiLCJjb3VudCIsIiRzdW0iLCJyYXRpbmciLCIkYWRkRmllbGRzIiwidGl0bGUiLCJxdWVyeVBpcGVsaW5lIiwiYWdncmVnYXRlIiwibmV4dCIsInJlc3VsdHMiLCJxdWVyeVBhcmFtcyIsInRleHRTZWFyY2hRdWVyeSIsImNhc3RTZWFyY2hRdWVyeSIsImdlbnJlU2VhcmNoUXVlcnkiLCJtb3ZpZXNMaXN0IiwidG90YWxOdW1Nb3ZpZXMiLCJkaXNwbGF5Q3Vyc29yIiwiY291bnREb2N1bWVudHMiLCJpZCIsInBpcGVsaW5lIiwiX2lkIiwiT2JqZWN0SWQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4X2pzXFxzcmNcXGRhb1xcIiwic291cmNlcyI6WyJtb3ZpZXNEQU8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwiYnNvblwiXG5cbmxldCBtb3ZpZXNcbmxldCBtZmxpeFxuY29uc3QgREVGQVVMVF9TT1JUID0gW1tcInRvbWF0b2VzLnZpZXdlci5udW1SZXZpZXdzXCIsIC0xXV1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW92aWVzREFPIHtcbiAgc3RhdGljIGFzeW5jIGluamVjdERCKGNvbm4pIHtcbiAgICBpZiAobW92aWVzKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIG1mbGl4ID0gYXdhaXQgY29ubi5kYihwcm9jZXNzLmVudi5NRkxJWF9OUylcbiAgICAgIG1vdmllcyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJtb3ZpZXNcIilcbiAgICAgIHRoaXMubW92aWVzID0gbW92aWVzIC8vIHRoaXMgaXMgb25seSBmb3IgdGVzdGluZ1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29sbGVjdGlvbiBoYW5kbGUgaW4gbW92aWVzREFPOiAke2V9YCxcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBjb25uZWN0aW9uIHBvb2wgc2l6ZSwgd3JpdGUgY29uY2VybiBhbmQgdXNlciByb2xlcyBvbiB0aGVcbiAgICogY3VycmVudCBjbGllbnQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPENvbmZpZ3VyYXRpb25SZXN1bHQ+fSBBbiBvYmplY3Qgd2l0aCBjb25maWd1cmF0aW9uIGRldGFpbHMuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICBjb25zdCByb2xlSW5mbyA9IGF3YWl0IG1mbGl4LmNvbW1hbmQoeyBjb25uZWN0aW9uU3RhdHVzOiAxIH0pXG4gICAgY29uc3QgYXV0aEluZm8gPSByb2xlSW5mby5hdXRoSW5mby5hdXRoZW50aWNhdGVkVXNlclJvbGVzWzBdXG4gICAgY29uc3QgeyBwb29sU2l6ZSwgd3RpbWVvdXQgfSA9IG1vdmllcy5zLmRiLnNlcnZlckNvbmZpZy5zLm9wdGlvbnNcbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICBwb29sU2l6ZSxcbiAgICAgIHd0aW1lb3V0LFxuICAgICAgYXV0aEluZm8sXG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuZCByZXR1cm5zIG1vdmllcyBvcmlnaW5hdGluZyBmcm9tIG9uZSBvciBtb3JlIGNvdW50cmllcy5cbiAgICogUmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cywgZWFjaCBvYmplY3QgY29udGFpbnMgYSB0aXRsZSBhbmQgYW4gX2lkLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBjb3VudHJpZXMgLSBUaGUgbGlzdCBvZiBjb3VudHJpZXMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPENvdW50cnlSZXN1bHQ+fSBBIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgdG8gYSBsaXN0IG9mIENvdW50cnlSZXN1bHRzLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldE1vdmllc0J5Q291bnRyeShjb3VudHJpZXMpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IFByb2plY3Rpb25cblxuICAgIFdyaXRlIGEgcXVlcnkgdGhhdCBtYXRjaGVzIG1vdmllcyB3aXRoIHRoZSBjb3VudHJpZXMgaW4gdGhlIFwiY291bnRyaWVzXCJcbiAgICBsaXN0LCBidXQgb25seSByZXR1cm5zIHRoZSB0aXRsZSBhbmQgX2lkIG9mIGVhY2ggbW92aWUuXG5cbiAgICBSZW1lbWJlciB0aGF0IGluIE1vbmdvREIsIHRoZSAkaW4gb3BlcmF0b3IgY2FuIGJlIHVzZWQgd2l0aCBhIGxpc3QgdG9cbiAgICBtYXRjaCBvbmUgb3IgbW9yZSB2YWx1ZXMgb2YgYSBzcGVjaWZpYyBmaWVsZC5cbiAgICAqL1xuXG4gICAgbGV0IGN1cnNvclxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogUHJvamVjdGlvblxuICAgICAgLy8gRmluZCBtb3ZpZXMgbWF0Y2hpbmcgdGhlIFwiY291bnRyaWVzXCIgbGlzdCwgYnV0IG9ubHkgcmV0dXJuIHRoZSB0aXRsZVxuICAgICAgLy8gYW5kIF9pZC4gRG8gbm90IHB1dCBhIGxpbWl0IGluIHlvdXIgb3duIGltcGxlbWVudGF0aW9uLCB0aGUgbGltaXRcbiAgICAgIC8vIGhlcmUgaXMgb25seSBpbmNsdWRlZCB0byBhdm9pZCBzZW5kaW5nIDQ2MDAwIGRvY3VtZW50cyBkb3duIHRoZVxuICAgICAgLy8gd2lyZS5cbiAgICAgIGN1cnNvciA9IGF3YWl0IG1vdmllcy5maW5kKCkubGltaXQoMSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gaXNzdWUgZmluZCBjb21tYW5kLCAke2V9YClcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjdXJzb3IudG9BcnJheSgpXG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgZ2l2ZW4gdGV4dCBpbiB0aGVpciB0aXRsZSBvciBkZXNjcmlwdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0byBtYXRjaCB3aXRoLlxuICAgKiBAcmV0dXJucyB7UXVlcnlQYXJhbXN9IFRoZSBRdWVyeVBhcmFtcyBmb3IgdGV4dCBzZWFyY2hcbiAgICovXG4gIHN0YXRpYyB0ZXh0U2VhcmNoUXVlcnkodGV4dCkge1xuICAgIGNvbnN0IHF1ZXJ5ID0geyAkdGV4dDogeyAkc2VhcmNoOiB0ZXh0IH0gfVxuICAgIGNvbnN0IG1ldGFfc2NvcmUgPSB7ICRtZXRhOiBcInRleHRTY29yZVwiIH1cbiAgICBjb25zdCBzb3J0ID0gW1tcInNjb3JlXCIsIG1ldGFfc2NvcmVdXVxuICAgIGNvbnN0IHByb2plY3QgPSB7IHNjb3JlOiBtZXRhX3Njb3JlIH1cblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBhbmQgcmV0dXJucyBtb3ZpZXMgaW5jbHVkaW5nIG9uZSBvciBtb3JlIGNhc3QgbWVtYmVycy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2FzdCAtIFRoZSBjYXN0IG1lbWJlcnMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGNhc3Qgc2VhcmNoXG4gICAqL1xuICBzdGF0aWMgY2FzdFNlYXJjaFF1ZXJ5KGNhc3QpIHtcbiAgICBjb25zdCBzZWFyY2hDYXN0ID0gQXJyYXkuaXNBcnJheShjYXN0KSA/IGNhc3QgOiBjYXN0LnNwbGl0KFwiLCBcIilcblxuICAgIGNvbnN0IHF1ZXJ5ID0geyBjYXN0OiB7ICRpbjogc2VhcmNoQ2FzdCB9IH1cbiAgICBjb25zdCBwcm9qZWN0ID0ge31cbiAgICBjb25zdCBzb3J0ID0gREVGQVVMVF9TT1JUXG5cbiAgICByZXR1cm4geyBxdWVyeSwgcHJvamVjdCwgc29ydCB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIG1hdGNoaW5nIGEgb25lIG9yIG1vcmUgZ2VucmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBnZW5yZSAtIFRoZSBnZW5yZXMgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIGdlbnJlIHNlYXJjaFxuICAgKi9cbiAgc3RhdGljIGdlbnJlU2VhcmNoUXVlcnkoZ2VucmUpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuXG4gICAgR2l2ZW4gYW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgZ2VucmVzLCBjb25zdHJ1Y3QgYSBxdWVyeSB0aGF0IHNlYXJjaGVzXG4gICAgTW9uZ29EQiBmb3IgbW92aWVzIHdpdGggdGhhdCBnZW5yZS5cbiAgICAqL1xuXG4gICAgY29uc3Qgc2VhcmNoR2VucmUgPSBBcnJheS5pc0FycmF5KGdlbnJlKSA/IGdlbnJlIDogZ2VucmUuc3BsaXQoXCIsIFwiKVxuXG4gICAgLy8gVE9ETyBUaWNrZXQ6IFRleHQgYW5kIFN1YmZpZWxkIFNlYXJjaFxuICAgIC8vIENvbnN0cnVjdCBhIHF1ZXJ5IHRoYXQgd2lsbCBzZWFyY2ggZm9yIHRoZSBjaG9zZW4gZ2VucmUuXG4gICAgY29uc3QgcXVlcnkgPSB7fVxuICAgIGNvbnN0IHByb2plY3QgPSB7fVxuICAgIGNvbnN0IHNvcnQgPSBERUZBVUxUX1NPUlRcblxuICAgIHJldHVybiB7IHF1ZXJ5LCBwcm9qZWN0LCBzb3J0IH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVycyAtIFRoZSBzZWFyY2ggcGFyYW1ldGVyIHRvIHVzZSBpbiB0aGUgcXVlcnkuIENvbWVzXG4gICAqIGluIHRoZSBmb3JtIG9mIGB7Y2FzdDogeyAkaW46IFsuLi5jYXN0TWVtYmVyc119fWBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBUaGUgcGFnZSBvZiBtb3ZpZXMgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtb3ZpZXNQZXJQYWdlIC0gVGhlIG51bWJlciBvZiBtb3ZpZXMgdG8gZGlzcGxheSBwZXIgcGFnZS5cbiAgICogQHJldHVybnMge0ZhY2V0ZWRTZWFyY2hSZXR1cm59IEZhY2V0ZWRTZWFyY2hSZXR1cm5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBmYWNldGVkU2VhcmNoKHtcbiAgICBmaWx0ZXJzID0gbnVsbCxcbiAgICBwYWdlID0gMCxcbiAgICBtb3ZpZXNQZXJQYWdlID0gMjAsXG4gIH0gPSB7fSkge1xuICAgIGlmICghZmlsdGVycyB8fCAhZmlsdGVycy5jYXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHNwZWNpZnkgY2FzdCBtZW1iZXJzIHRvIGZpbHRlciBieS5cIilcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hTdGFnZSA9IHsgJG1hdGNoOiBmaWx0ZXJzIH1cbiAgICBjb25zdCBzb3J0U3RhZ2UgPSB7ICRzb3J0OiB7IFwidG9tYXRvZXMudmlld2VyLm51bVJldmlld3NcIjogLTEgfSB9XG4gICAgY29uc3QgY291bnRpbmdQaXBlbGluZSA9IFttYXRjaFN0YWdlLCBzb3J0U3RhZ2UsIHsgJGNvdW50OiBcImNvdW50XCIgfV1cbiAgICBjb25zdCBza2lwU3RhZ2UgPSB7ICRza2lwOiBtb3ZpZXNQZXJQYWdlICogcGFnZSB9XG4gICAgY29uc3QgbGltaXRTdGFnZSA9IHsgJGxpbWl0OiBtb3ZpZXNQZXJQYWdlIH1cbiAgICBjb25zdCBmYWNldFN0YWdlID0ge1xuICAgICAgJGZhY2V0OiB7XG4gICAgICAgIHJ1bnRpbWU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkYnVja2V0OiB7XG4gICAgICAgICAgICAgIGdyb3VwQnk6IFwiJHJ1bnRpbWVcIixcbiAgICAgICAgICAgICAgYm91bmRhcmllczogWzAsIDYwLCA5MCwgMTIwLCAxODBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmF0aW5nOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGJ1Y2tldDoge1xuICAgICAgICAgICAgICBncm91cEJ5OiBcIiRtZXRhY3JpdGljXCIsXG4gICAgICAgICAgICAgIGJvdW5kYXJpZXM6IFswLCA1MCwgNzAsIDkwLCAxMDBdLFxuICAgICAgICAgICAgICBkZWZhdWx0OiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbW92aWVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICB0aXRsZTogXCIkdGl0bGVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgLyoqXG4gICAgVGlja2V0OiBGYWNldGVkIFNlYXJjaFxuXG4gICAgUGxlYXNlIGFwcGVuZCB0aGUgc2tpcFN0YWdlLCBsaW1pdFN0YWdlLCBhbmQgZmFjZXRTdGFnZSB0byB0aGUgcXVlcnlQaXBlbGluZVxuICAgIChpbiB0aGF0IG9yZGVyKS4gWW91IGNhbiBhY2NvbXBsaXNoIHRoaXMgYnkgYWRkaW5nIHRoZSBzdGFnZXMgZGlyZWN0bHkgdG9cbiAgICB0aGUgcXVlcnlQaXBlbGluZS5cblxuICAgIFRoZSBxdWVyeVBpcGVsaW5lIGlzIGEgSmF2YXNjcmlwdCBhcnJheSwgc28geW91IGNhbiB1c2UgcHVzaCgpIG9yIGNvbmNhdCgpXG4gICAgdG8gY29tcGxldGUgdGhpcyB0YXNrLCBidXQgeW91IG1pZ2h0IGhhdmUgdG8gZG8gc29tZXRoaW5nIGFib3V0IGBjb25zdGAuXG4gICAgKi9cblxuICAgIGNvbnN0IHF1ZXJ5UGlwZWxpbmUgPSBbXG4gICAgICBtYXRjaFN0YWdlLFxuICAgICAgc29ydFN0YWdlLFxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IEZhY2V0ZWQgU2VhcmNoXG4gICAgICAvLyBBZGQgdGhlIHN0YWdlcyB0byBxdWVyeVBpcGVsaW5lIGluIHRoZSBjb3JyZWN0IG9yZGVyLlxuICAgIF1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgKGF3YWl0IG1vdmllcy5hZ2dyZWdhdGUocXVlcnlQaXBlbGluZSkpLm5leHQoKVxuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCAoYXdhaXQgbW92aWVzLmFnZ3JlZ2F0ZShjb3VudGluZ1BpcGVsaW5lKSkubmV4dCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHRzLFxuICAgICAgICAuLi5jb3VudCxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogXCJSZXN1bHRzIHRvbyBsYXJnZSwgYmUgbW9yZSByZXN0cmljdGl2ZSBpbiBmaWx0ZXJcIiB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuZCByZXR1cm5zIG1vdmllcyBieSBjb3VudHJ5LlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBvYmplY3RzLCBlYWNoIG9iamVjdCBjb250YWlucyBhIHRpdGxlIGFuZCBhbiBfaWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJzIC0gVGhlIHNlYXJjaCBwYXJhbWV0ZXJzIHRvIHVzZSBpbiB0aGUgcXVlcnkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlIC0gVGhlIHBhZ2Ugb2YgbW92aWVzIHRvIHJldHJpZXZlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbW92aWVzUGVyUGFnZSAtIFRoZSBudW1iZXIgb2YgbW92aWVzIHRvIGRpc3BsYXkgcGVyIHBhZ2UuXG4gICAqIEByZXR1cm5zIHtHZXRNb3ZpZXNSZXN1bHR9IEFuIG9iamVjdCB3aXRoIG1vdmllIHJlc3VsdHMgYW5kIHRvdGFsIHJlc3VsdHNcbiAgICogdGhhdCB3b3VsZCBtYXRjaCB0aGlzIHF1ZXJ5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0TW92aWVzKHtcbiAgICAvLyBoZXJlJ3Mgd2hlcmUgdGhlIGRlZmF1bHQgcGFyYW1ldGVycyBhcmUgc2V0IGZvciB0aGUgZ2V0TW92aWVzIG1ldGhvZFxuICAgIGZpbHRlcnMgPSBudWxsLFxuICAgIHBhZ2UgPSAwLFxuICAgIG1vdmllc1BlclBhZ2UgPSAyMCxcbiAgfSA9IHt9KSB7XG4gICAgbGV0IHF1ZXJ5UGFyYW1zID0ge31cbiAgICBpZiAoZmlsdGVycykge1xuICAgICAgaWYgKFwidGV4dFwiIGluIGZpbHRlcnMpIHtcbiAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnRleHRTZWFyY2hRdWVyeShmaWx0ZXJzW1widGV4dFwiXSlcbiAgICAgIH0gZWxzZSBpZiAoXCJjYXN0XCIgaW4gZmlsdGVycykge1xuICAgICAgICBxdWVyeVBhcmFtcyA9IHRoaXMuY2FzdFNlYXJjaFF1ZXJ5KGZpbHRlcnNbXCJjYXN0XCJdKVxuICAgICAgfSBlbHNlIGlmIChcImdlbnJlXCIgaW4gZmlsdGVycykge1xuICAgICAgICBxdWVyeVBhcmFtcyA9IHRoaXMuZ2VucmVTZWFyY2hRdWVyeShmaWx0ZXJzW1wiZ2VucmVcIl0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHsgcXVlcnkgPSB7fSwgcHJvamVjdCA9IHt9LCBzb3J0ID0gREVGQVVMVF9TT1JUIH0gPSBxdWVyeVBhcmFtc1xuICAgIGxldCBjdXJzb3JcbiAgICB0cnkge1xuICAgICAgY3Vyc29yID0gYXdhaXQgbW92aWVzXG4gICAgICAgIC5maW5kKHF1ZXJ5KVxuICAgICAgICAucHJvamVjdChwcm9qZWN0KVxuICAgICAgICAuc29ydChzb3J0KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBpc3N1ZSBmaW5kIGNvbW1hbmQsICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgbW92aWVzTGlzdDogW10sIHRvdGFsTnVtTW92aWVzOiAwIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICBUaWNrZXQ6IFBhZ2luZ1xuXG4gICAgQmVmb3JlIHRoaXMgbWV0aG9kIHJldHVybnMgYmFjayB0byB0aGUgQVBJLCB1c2UgdGhlIFwibW92aWVzUGVyUGFnZVwiIGFuZFxuICAgIFwicGFnZVwiIGFyZ3VtZW50cyB0byBkZWNpZGUgdGhlIG1vdmllcyB0byBkaXNwbGF5LlxuXG4gICAgUGFnaW5nIGNhbiBiZSBpbXBsZW1lbnRlZCBieSB1c2luZyB0aGUgc2tpcCgpIGFuZCBsaW1pdCgpIGN1cnNvciBtZXRob2RzLlxuICAgICovXG5cbiAgICAvLyBUT0RPIFRpY2tldDogUGFnaW5nXG4gICAgLy8gVXNlIHRoZSBjdXJzb3IgdG8gb25seSByZXR1cm4gdGhlIG1vdmllcyB0aGF0IGJlbG9uZyBvbiB0aGUgY3VycmVudCBwYWdlXG4gICAgY29uc3QgZGlzcGxheUN1cnNvciA9IGN1cnNvci5saW1pdChtb3ZpZXNQZXJQYWdlKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1vdmllc0xpc3QgPSBhd2FpdCBkaXNwbGF5Q3Vyc29yLnRvQXJyYXkoKVxuICAgICAgY29uc3QgdG90YWxOdW1Nb3ZpZXMgPSBwYWdlID09PSAwID8gYXdhaXQgbW92aWVzLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KSA6IDBcblxuICAgICAgcmV0dXJuIHsgbW92aWVzTGlzdCwgdG90YWxOdW1Nb3ZpZXMgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBVbmFibGUgdG8gY29udmVydCBjdXJzb3IgdG8gYXJyYXkgb3IgcHJvYmxlbSBjb3VudGluZyBkb2N1bWVudHMsICR7ZX1gLFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgbW92aWVzTGlzdDogW10sIHRvdGFsTnVtTW92aWVzOiAwIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIG1vdmllIGJ5IGl0cyBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgZGVzaXJlZCBtb3ZpZSBpZCwgdGhlIF9pZCBpbiBNb25nb1xuICAgKiBAcmV0dXJucyB7TWZsaXhNb3ZpZSB8IG51bGx9IFJldHVybnMgZWl0aGVyIGEgc2luZ2xlIG1vdmllIG9yIG5vdGhpbmdcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRNb3ZpZUJ5SUQoaWQpIHtcbiAgICB0cnkge1xuICAgICAgLyoqXG4gICAgICBUaWNrZXQ6IEdldCBDb21tZW50c1xuXG4gICAgICBHaXZlbiBhIG1vdmllIElELCBidWlsZCBhbiBBZ2dyZWdhdGlvbiBQaXBlbGluZSB0byByZXRyaWV2ZSB0aGUgY29tbWVudHNcbiAgICAgIG1hdGNoaW5nIHRoYXQgbW92aWUncyBJRC5cblxuICAgICAgVGhlICRtYXRjaCBzdGFnZSBpcyBhbHJlYWR5IGNvbXBsZXRlZC4gWW91IHdpbGwgbmVlZCB0byBhZGQgYSAkbG9va3VwXG4gICAgICBzdGFnZSB0aGF0IHNlYXJjaGVzIHRoZSBgY29tbWVudHNgIGNvbGxlY3Rpb24gZm9yIHRoZSBjb3JyZWN0IGNvbW1lbnRzLlxuICAgICAgKi9cblxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IEdldCBDb21tZW50c1xuICAgICAgLy8gSW1wbGVtZW50IHRoZSByZXF1aXJlZCBwaXBlbGluZS5cbiAgICAgIGNvbnN0IHBpcGVsaW5lID0gW1xuICAgICAgICB7XG4gICAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgICBfaWQ6IE9iamVjdElkKGlkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgICAgcmV0dXJuIGF3YWl0IG1vdmllcy5hZ2dyZWdhdGUocGlwZWxpbmUpLm5leHQoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBFcnJvciBIYW5kbGluZ1xuXG4gICAgICBIYW5kbGUgdGhlIGVycm9yIHRoYXQgb2NjdXJzIHdoZW4gYW4gaW52YWxpZCBJRCBpcyBwYXNzZWQgdG8gdGhpcyBtZXRob2QuXG4gICAgICBXaGVuIHRoaXMgc3BlY2lmaWMgZXJyb3IgaXMgdGhyb3duLCB0aGUgbWV0aG9kIHNob3VsZCByZXR1cm4gYG51bGxgLlxuICAgICAgKi9cblxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IEVycm9yIEhhbmRsaW5nXG4gICAgICAvLyBDYXRjaCB0aGUgSW52YWxpZElkIGVycm9yIGJ5IHN0cmluZyBtYXRjaGluZywgYW5kIHRoZW4gaGFuZGxlIGl0LlxuICAgICAgY29uc29sZS5lcnJvcihgU29tZXRoaW5nIHdlbnQgd3JvbmcgaW4gZ2V0TW92aWVCeUlEOiAke2V9YClcbiAgICAgIHRocm93IGVcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgcGFyc2VkIHF1ZXJ5LCBzb3J0LCBhbmQgcHJvamVjdCBidW5kbGUuXG4gKiBAdHlwZWRlZiBRdWVyeVBhcmFtc1xuICogQHByb3BlcnR5IHtPYmplY3R9IHF1ZXJ5IC0gVGhlIHNwZWNpZmllZCBxdWVyeSwgdHJhbnNmb3JtZWQgYWNjb3JkaW5nbHlcbiAqIEBwcm9wZXJ0eSB7YW55W119IHNvcnQgLSBUaGUgc3BlY2lmaWVkIHNvcnRcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwcm9qZWN0IC0gVGhlIHNwZWNpZmllZCBwcm9qZWN0LCBpZiBhbnlcbiAqL1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzaW5nbGUgY291bnRyeSByZXN1bHRcbiAqIEB0eXBlZGVmIENvdW50cnlSZXN1bHRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBPYmplY3RJRCAtIFRoZSBPYmplY3RJRCBvZiB0aGUgbW92aWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aXRsZSAtIFRoZSB0aXRsZSBvZiB0aGUgbW92aWVcbiAqL1xuXG4vKipcbiAqIEEgTW92aWUgZnJvbSBtZmxpeFxuICogQHR5cGVkZWYgTWZsaXhNb3ZpZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IF9pZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRpdGxlXG4gKiBAcHJvcGVydHkge251bWJlcn0geWVhclxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJ1bnRpbWVcbiAqIEBwcm9wZXJ0eSB7RGF0ZX0gcmVsZWFzZWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGNhc3RcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtZXRhY3JpdGljZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBvc3RlclxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBsb3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmdWxscGxvdFxuICogQHByb3BlcnR5IHtzdHJpbmd8RGF0ZX0gbGFzdHVwZGF0ZWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBsYW5ndWFnZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGRpcmVjdG9yc1xuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gd3JpdGVyc1xuICogQHByb3BlcnR5IHtJTURCfSBpbWRiXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjb3VudHJpZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHJhdGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBnZW5yZXNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGNvbW1lbnRzXG4gKi9cblxuLyoqXG4gKiBJTURCIHN1YmRvY3VtZW50XG4gKiBAdHlwZWRlZiBJTURCXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmF0aW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gdm90ZXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpZFxuICovXG5cbi8qKlxuICogUmVzdWx0IHNldCBmb3IgZ2V0TW92aWVzIG1ldGhvZFxuICogQHR5cGVkZWYgR2V0TW92aWVzUmVzdWx0XG4gKiBAcHJvcGVydHkge01mbGl4TW92aWVzW119IG1vdmllc0xpc3RcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbE51bVJlc3VsdHNcbiAqL1xuXG4vKipcbiAqIEZhY2V0ZWQgU2VhcmNoIFJldHVyblxuICpcbiAqIFRoZSB0eXBlIG9mIHJldHVybiBmcm9tIGZhY2V0ZWQgc2VhcmNoLiBJdCB3aWxsIGJlIGEgc2luZ2xlIGRvY3VtZW50IHdpdGhcbiAqIDMgZmllbGRzOiByYXRpbmcsIHJ1bnRpbWUsIGFuZCBtb3ZpZXMuXG4gKiBAdHlwZWRlZiBGYWNldGVkU2VhcmNoUmV0dXJuXG4gKiBAcHJvcGVydHkge29iamVjdH0gcmF0aW5nXG4gKiBAcHJvcGVydHkge29iamVjdH0gcnVudGltZVxuICogQHByb3BlcnR5IHtNRmxpeE1vdmllW119bW92aWVzXG4gKi9cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFBK0I7QUFBQTtBQUUvQixJQUFJQSxNQUFNO0FBQ1YsSUFBSUMsS0FBSztBQUNULElBQU1DLFlBQVksR0FBRyxDQUFDLENBQUMsNEJBQTRCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUFBLElBRXBDQyxTQUFTO0VBQUE7SUFBQTtFQUFBO0VBQUE7SUFBQTtJQUFBO01BQUEsOEZBQzVCLGlCQUFzQkMsSUFBSTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLEtBQ3BCSixNQUFNO2tCQUFBO2tCQUFBO2dCQUFBO2dCQUFBO2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBQUEsT0FJTUksSUFBSSxDQUFDQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUM7Y0FBQTtnQkFBM0NQLEtBQUs7Z0JBQUE7Z0JBQUEsT0FDVUcsSUFBSSxDQUFDQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsVUFBVSxDQUFDLFFBQVEsQ0FBQztjQUFBO2dCQUFqRVQsTUFBTTtnQkFDTixJQUFJLENBQUNBLE1BQU0sR0FBR0EsTUFBTSxFQUFDO2dCQUFBO2dCQUFBO2NBQUE7Z0JBQUE7Z0JBQUE7Z0JBRXJCVSxPQUFPLENBQUNDLEtBQUssOEVBRVo7Y0FBQTtjQUFBO2dCQUFBO1lBQUE7VUFBQTtRQUFBO01BQUEsQ0FFSjtNQUFBO1FBQUE7TUFBQTtNQUFBO0lBQUE7SUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBSkU7SUFBQTtJQUFBO01BQUEsc0dBS0E7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQ3lCVixLQUFLLENB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","map":{"version":3,"names":["movies","mflix","DEFAULT_SORT","MoviesDAO","conn","db","process","env","MFLIX_NS","collection","console","error","command","connectionStatus","roleInfo","authInfo","authenticatedUserRoles","s","serverConfig","options","poolSize","wtimeout","response","countries","find","limit","cursor","toArray","text","query","$text","$search","meta_score","$meta","sort","project","score","cast","searchCast","Array","isArray","split","$in","genre","searchGenre","filters","page","moviesPerPage","Error","matchStage","$match","sortStage","$sort","countingPipeline","$count","skipStage","$skip","limitStage","$limit","facetStage","$facet","runtime","$bucket","groupBy","boundaries","output","count","$sum","rating","$addFields","title","queryPipeline","aggregate","next","results","queryParams","textSearchQuery","castSearchQuery","genreSearchQuery","moviesList","totalNumMovies","displayCursor","countDocuments","id","pipeline","_id","ObjectId"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\dao\\","sources":["moviesDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet movies\nlet mflix\nconst DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]]\n\nexport default class MoviesDAO {\n  static async injectDB(conn) {\n    if (movies) {\n      return\n    }\n    try {\n      mflix = await conn.db(process.env.MFLIX_NS)\n      movies = await conn.db(process.env.MFLIX_NS).collection(\"movies\")\n      this.movies = movies // this is only for testing\n    } catch (e) {\n      console.error(\n        `Unable to establish a collection handle in moviesDAO: ${e}`,\n      )\n    }\n  }\n\n  /**\n   * Retrieves the connection pool size, write concern and user roles on the\n   * current client.\n   * @returns {Promise<ConfigurationResult>} An object with configuration details.\n   */\n  static async getConfiguration() {\n    const roleInfo = await mflix.command({ connectionStatus: 1 })\n    const authInfo = roleInfo.authInfo.authenticatedUserRoles[0]\n    const { poolSize, wtimeout } = movies.s.db.serverConfig.s.options\n    let response = {\n      poolSize,\n      wtimeout,\n      authInfo,\n    }\n    return response\n  }\n\n  /**\n   * Finds and returns movies originating from one or more countries.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {string[]} countries - The list of countries.\n   * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n   */\n  static async getMoviesByCountry(countries) {\n    /**\n    Ticket: Projection\n\n    Write a query that matches movies with the countries in the \"countries\"\n    list, but only returns the title and _id of each movie.\n\n    Remember that in MongoDB, the $in operator can be used with a list to\n    match one or more values of a specific field.\n    */\n\n    let cursor\n    try {\n      // TODO Ticket: Projection\n      // Find movies matching the \"countries\" list, but only return the title\n      // and _id. Do not put a limit in your own implementation, the limit\n      // here is only included to avoid sending 46000 documents down the\n      // wire.\n      cursor = await movies.find().limit(1)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return []\n    }\n\n    return cursor.toArray()\n  }\n\n  /**\n   * Finds and returns movies matching a given text in their title or description.\n   * @param {string} text - The text to match with.\n   * @returns {QueryParams} The QueryParams for text search\n   */\n  static textSearchQuery(text) {\n    const query = { $text: { $search: text } }\n    const meta_score = { $meta: \"textScore\" }\n    const sort = [[\"score\", meta_score]]\n    const project = { score: meta_score }\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies including one or more cast members.\n   * @param {string[]} cast - The cast members to match with.\n   * @returns {QueryParams} The QueryParams for cast search\n   */\n  static castSearchQuery(cast) {\n    const searchCast = Array.isArray(cast) ? cast : cast.split(\", \")\n\n    const query = { cast: { $in: searchCast } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies matching a one or more genres.\n   * @param {string[]} genre - The genres to match with.\n   * @returns {QueryParams} The QueryParams for genre search\n   */\n  static genreSearchQuery(genre) {\n    /**\n    Ticket: Text and Subfield Search\n\n    Given an array of one or more genres, construct a query that searches\n    MongoDB for movies with that genre.\n    */\n\n    const searchGenre = Array.isArray(genre) ? genre : genre.split(\", \")\n\n    // TODO Ticket: Text and Subfield Search\n    // Construct a query that will search for the chosen genre.\n    const query = {}\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   *\n   * @param {Object} filters - The search parameter to use in the query. Comes\n   * in the form of `{cast: { $in: [...castMembers]}}`\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {FacetedSearchReturn} FacetedSearchReturn\n   */\n  static async facetedSearch({\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    if (!filters || !filters.cast) {\n      throw new Error(\"Must specify cast members to filter by.\")\n    }\n    const matchStage = { $match: filters }\n    const sortStage = { $sort: { \"tomatoes.viewer.numReviews\": -1 } }\n    const countingPipeline = [matchStage, sortStage, { $count: \"count\" }]\n    const skipStage = { $skip: moviesPerPage * page }\n    const limitStage = { $limit: moviesPerPage }\n    const facetStage = {\n      $facet: {\n        runtime: [\n          {\n            $bucket: {\n              groupBy: \"$runtime\",\n              boundaries: [0, 60, 90, 120, 180],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        rating: [\n          {\n            $bucket: {\n              groupBy: \"$metacritic\",\n              boundaries: [0, 50, 70, 90, 100],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        movies: [\n          {\n            $addFields: {\n              title: \"$title\",\n            },\n          },\n        ],\n      },\n    }\n\n    /**\n    Ticket: Faceted Search\n\n    Please append the skipStage, limitStage, and facetStage to the queryPipeline\n    (in that order). You can accomplish this by adding the stages directly to\n    the queryPipeline.\n\n    The queryPipeline is a Javascript array, so you can use push() or concat()\n    to complete this task, but you might have to do something about `const`.\n    */\n\n    const queryPipeline = [\n      matchStage,\n      sortStage,\n      // TODO Ticket: Faceted Search\n      // Add the stages to queryPipeline in the correct order.\n    ]\n\n    try {\n      const results = await (await movies.aggregate(queryPipeline)).next()\n      const count = await (await movies.aggregate(countingPipeline)).next()\n      return {\n        ...results,\n        ...count,\n      }\n    } catch (e) {\n      return { error: \"Results too large, be more restrictive in filter\" }\n    }\n  }\n\n  /**\n   * Finds and returns movies by country.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {Object} filters - The search parameters to use in the query.\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {GetMoviesResult} An object with movie results and total results\n   * that would match this query\n   */\n  static async getMovies({\n    // here's where the default parameters are set for the getMovies method\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    let queryParams = {}\n    if (filters) {\n      if (\"text\" in filters) {\n        queryParams = this.textSearchQuery(filters[\"text\"])\n      } else if (\"cast\" in filters) {\n        queryParams = this.castSearchQuery(filters[\"cast\"])\n      } else if (\"genre\" in filters) {\n        queryParams = this.genreSearchQuery(filters[\"genre\"])\n      }\n    }\n\n    let { query = {}, project = {}, sort = DEFAULT_SORT } = queryParams\n    let cursor\n    try {\n      cursor = await movies\n        .find(query)\n        .project(project)\n        .sort(sort)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n\n    /**\n    Ticket: Paging\n\n    Before this method returns back to the API, use the \"moviesPerPage\" and\n    \"page\" arguments to decide the movies to display.\n\n    Paging can be implemented by using the skip() and limit() cursor methods.\n    */\n\n    // TODO Ticket: Paging\n    // Use the cursor to only return the movies that belong on the current page\n    const displayCursor = cursor.limit(moviesPerPage)\n\n    try {\n      const moviesList = await displayCursor.toArray()\n      const totalNumMovies = page === 0 ? await movies.countDocuments(query) : 0\n\n      return { moviesList, totalNumMovies }\n    } catch (e) {\n      console.error(\n        `Unable to convert cursor to array or problem counting documents, ${e}`,\n      )\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n  }\n\n  /**\n   * Gets a movie by its id\n   * @param {string} id - The desired movie id, the _id in Mongo\n   * @returns {MflixMovie | null} Returns either a single movie or nothing\n   */\n  static async getMovieByID(id) {\n    try {\n      /**\n      Ticket: Get Comments\n\n      Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n      matching that movie's ID.\n\n      The $match stage is already completed. You will need to add a $lookup\n      stage that searches the `comments` collection for the correct comments.\n      */\n\n      // TODO Ticket: Get Comments\n      // Implement the required pipeline.\n      const pipeline = [\n        {\n          $match: {\n            _id: ObjectId(id)\n          }\n        }\n      ]\n      return await movies.aggregate(pipeline).next()\n    } catch (e) {\n      /**\n      Ticket: Error Handling\n\n      Handle the error that occurs when an invalid ID is passed to this method.\n      When this specific error is thrown, the method should return `null`.\n      */\n\n      // TODO Ticket: Error Handling\n      // Catch the InvalidId error by string matching, and then handle it.\n      console.error(`Something went wrong in getMovieByID: ${e}`)\n      throw e\n    }\n  }\n}\n\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\comments.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\nvar _commentsDAO = _interopRequireDefault(require(\"../dao/commentsDAO\"));\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\nvar _users = require(\"./users.controller\");\nvar _bson = require(\"bson\");\nvar CommentsController = /*#__PURE__*/function () {\n  function CommentsController() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsController);\n  }\n  (0, _createClass2[\"default\"])(CommentsController, null, [{\n    key: \"apiPostComment\",\n    value: function () {\n      var _apiPostComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var userJwt, user, error, movieId, comment, date, commentResponse, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context.sent;\n                error = user.error;\n                if (!error) {\n                  _context.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context.abrupt(\"return\");\n              case 9:\n                movieId = req.body.movie_id;\n                comment = req.body.comment;\n                date = new Date();\n                _context.next = 14;\n                return _commentsDAO[\"default\"].addComment((0, _bson.ObjectId)(movieId), user, comment, date);\n              case 14:\n                commentResponse = _context.sent;\n                _context.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 17:\n                updatedComments = _context.sent;\n                res.json({\n                  status: \"success\",\n                  comments: updatedComments.comments\n                });\n                _context.next = 24;\n                break;\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](0);\n                res.status(500).json({\n                  e: _context.t0\n                });\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 21]]);\n      }));\n      function apiPostComment(_x, _x2, _x3) {\n        return _apiPostComment.apply(this, arguments);\n      }\n      return apiPostComment;\n    }()\n  }, {\n    key: \"apiUpdateComment\",\n    value: function () {\n      var _apiUpdateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var userJwt, user, error, commentId, text, date, commentResponse, movieId, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context2.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context2.sent;\n                error = user.error;\n                if (!error) {\n                  _context2.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context2.abrupt(\"return\");\n              case 9:\n                commentId = req.body.comment_id;\n                text = req.body.updated_comment;\n                date = new Date();\n                _context2.next = 14;\n                return _commentsDAO[\"default\"].updateComment((0, _bson.ObjectId)(commentId), user.email, text, date);\n              case 14:\n                commentResponse = _context2.sent;\n                error = commentResponse.error;\n                if (error) {\n                  res.status(400).json({\n                    error: error\n                  });\n                }\n                if (!(commentResponse.modifiedCount === 0)) {\n                  _context2.next = 19;\n                  break;\n                }\n                throw new Error(\"unable to update comment - user may not be original poster\");\n              case 19:\n                movieId = req.body.movie_id;\n                _context2.next = 22;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 22:\n                updatedComments = _context2.sent;\n                res.json({\n                  comments: updatedComments.comments\n                });\n                _context2.next = 29;\n                break;\n              case 26:\n                _context2.prev = 26;\n                _context2.t0 = _context2[\"catch\"](0);\n                res.status(500).json({\n                  e: _context2.t0\n                });\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 26]]);\n      }));\n      function apiUpdateComment(_x4, _x5, _x6) {\n        return _apiUpdateComment.apply(this, arguments);\n      }\n      return apiUpdateComment;\n    }()\n  }, {\n    key: \"apiDeleteComment\",\n    value: function () {\n      var _apiDeleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var userJwt, user, error, commentId, userEmail, commentResponse, movieId, _yield$MoviesDAO$getM, comments;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context3.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context3.sent;\n                error = user.error;\n                if (!error) {\n                  _context3.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context3.abrupt(\"return\");\n              case 9:\n                commentId = req.body.comment_id;\n                userEmail = user.email;\n                _context3.next = 13;\n                return _commentsDAO[\"default\"].deleteComment((0, _bson.ObjectId)(commentId), userEmail);\n              case 13:\n                commentResponse = _context3.sent;\n                movieId = req.body.movie_id;\n                _context3.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 17:\n                _yield$MoviesDAO$getM = _context3.sent;\n                comments = _yield$MoviesDAO$getM.comments;\n                res.json({\n                  comments: comments\n                });\n                _context3.next = 25;\n                break;\n              case 22:\n                _context3.prev = 22;\n                _context3.t0 = _context3[\"catch\"](0);\n                res.status(500).json({\n                  e: _context3.t0\n                });\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 22]]);\n      }));\n      function apiDeleteComment(_x7, _x8, _x9) {\n        return _apiDeleteComment.apply(this, arguments);\n      }\n      return apiDeleteComment;\n    }()\n  }, {\n    key: \"apiCommentReport\",\n    value: function () {\n      var _apiCommentReport = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var userJwt, user, error, report;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context4.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context4.sent;\n                error = user.error;\n                if (!error) {\n                  _context4.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context4.abrupt(\"return\");\n              case 9:\n                if (!_usersDAO[\"default\"].checkAdmin(user.email)) {\n                  _context4.next = 15;\n                  break;\n                }\n                _context4.next = 12;\n                return _commentsDAO[\"default\"].mostActiveCommenters();\n              case 12:\n                report = _context4.sent;\n                res.json({\n                  report: report\n                });\n                return _context4.abrupt(\"return\");\n              case 15:\n                res.status(401).json({\n                  status: \"fail\"\n                });\n                _context4.next = 21;\n                break;\n              case 18:\n                _context4.prev = 18;\n                _context4.t0 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  e: _context4.t0\n                });\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 18]]);\n      }));\n      function apiCommentReport(_x10, _x11, _x12) {\n        return _apiCommentReport.apply(this, arguments);\n      }\n      return apiCommentReport;\n    }()\n  }]);\n  return CommentsController;\n}();\nexports[\"default\"] = CommentsController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb21tZW50c0NvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlckp3dCIsImdldCIsInNsaWNlIiwibGVuZ3RoIiwiVXNlciIsImRlY29kZWQiLCJ1c2VyIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibW92aWVJZCIsImJvZHkiLCJtb3ZpZV9pZCIsImNvbW1lbnQiLCJkYXRlIiwiRGF0ZSIsIkNvbW1lbnRzREFPIiwiYWRkQ29tbWVudCIsIk9iamVjdElkIiwiY29tbWVudFJlc3BvbnNlIiwiTW92aWVzREFPIiwiZ2V0TW92aWVCeUlEIiwidXBkYXRlZENvbW1lbnRzIiwiY29tbWVudHMiLCJlIiwiY29tbWVudElkIiwiY29tbWVudF9pZCIsInRleHQiLCJ1cGRhdGVkX2NvbW1lbnQiLCJ1cGRhdGVDb21tZW50IiwiZW1haWwiLCJtb2RpZmllZENvdW50IiwiRXJyb3IiLCJ1c2VyRW1haWwiLCJkZWxldGVDb21tZW50IiwiVXNlcnNEQU8iLCJjaGVja0FkbWluIiwibW9zdEFjdGl2ZUNvbW1lbnRlcnMiLCJyZXBvcnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4X2pzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJjb21tZW50cy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcbmltcG9ydCBDb21tZW50c0RBTyBmcm9tIFwiLi4vZGFvL2NvbW1lbnRzREFPXCJcbmltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL2Rhby9tb3ZpZXNEQU9cIlxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwiYnNvblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1lbnRzQ29udHJvbGxlciB7XG4gIHN0YXRpYyBhc3luYyBhcGlQb3N0Q29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtb3ZpZUlkID0gcmVxLmJvZHkubW92aWVfaWRcbiAgICAgIGNvbnN0IGNvbW1lbnQgPSByZXEuYm9keS5jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5hZGRDb21tZW50KFxuICAgICAgICBPYmplY3RJZChtb3ZpZUlkKSxcbiAgICAgICAgdXNlcixcbiAgICAgICAgY29tbWVudCxcbiAgICAgICAgZGF0ZSxcbiAgICAgIClcblxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IHN0YXR1czogXCJzdWNjZXNzXCIsIGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpVXBkYXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB0ZXh0ID0gcmVxLmJvZHkudXBkYXRlZF9jb21tZW50XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy51cGRhdGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyLmVtYWlsLFxuICAgICAgICB0ZXh0LFxuICAgICAgICBkYXRlLFxuICAgICAgKVxuXG4gICAgICB2YXIgeyBlcnJvciB9ID0gY29tbWVudFJlc3BvbnNlXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoY29tbWVudFJlc3BvbnNlLm1vZGlmaWVkQ291bnQgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwidW5hYmxlIHRvIHVwZGF0ZSBjb21tZW50IC0gdXNlciBtYXkgbm90IGJlIG9yaWdpbmFsIHBvc3RlclwiLFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuICAgICAgY29uc3QgdXBkYXRlZENvbW1lbnRzID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzOiB1cGRhdGVkQ29tbWVudHMuY29tbWVudHMgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpRGVsZXRlQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tZW50SWQgPSByZXEuYm9keS5jb21tZW50X2lkXG4gICAgICBjb25zdCB1c2VyRW1haWwgPSB1c2VyLmVtYWlsXG4gICAgICBjb25zdCBjb21tZW50UmVzcG9uc2UgPSBhd2FpdCBDb21tZW50c0RBTy5kZWxldGVDb21tZW50KFxuICAgICAgICBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgICB1c2VyRW1haWwsXG4gICAgICApXG5cbiAgICAgIGNvbnN0IG1vdmllSWQgPSByZXEuYm9keS5tb3ZpZV9pZFxuXG4gICAgICBjb25zdCB7IGNvbW1lbnRzIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVCeUlEKG1vdmllSWQpXG4gICAgICByZXMuanNvbih7IGNvbW1lbnRzIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaUNvbW1lbnRSZXBvcnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKFVzZXJzREFPLmNoZWNrQWRtaW4odXNlci5lbWFpbCkpIHtcbiAgICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgQ29tbWVudHNEQU8ubW9zdEFjdGl2ZUNvbW1lbnRlcnMoKVxuICAgICAgICByZXMuanNvbih7IHJlcG9ydCB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBzdGF0dXM6IFwiZmFpbFwiIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUErQixJQUVWQSxrQkFBa0I7RUFBQTtJQUFBO0VBQUE7RUFBQTtJQUFBO0lBQUE7TUFBQSxvR0FDckMsaUJBQTRCQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtRQUFBO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUE7Z0JBRWhDQyxPQUFPLEdBQUdILEdBQUcsQ0FBQ0ksR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDQyxLQUFLLENBQUMsU0FBUyxDQUFDQyxNQUFNLENBQUM7Z0JBQUE7Z0JBQUEsT0FDN0NDLFdBQUksQ0FBQ0MsT0FBTyxDQUFDTCxPQUFPLENBQUM7Y0FBQTtnQkFBbENNLElBQUk7Z0JBQ0pDLEtBQUssR0FBS0QsSUFBSSxDQUFkQyxLQUFLO2dCQUFBLEtBQ1BBLEtBQUs7a0JBQUE7a0JBQUE7Z0JBQUE7Z0JBQ1BULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFD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","map":{"version":3,"names":["CommentsController","req","res","next","userJwt","get","slice","length","User","decoded","user","error","status","json","movieId","body","movie_id","comment","date","Date","CommentsDAO","addComment","ObjectId","commentResponse","MoviesDAO","getMovieByID","updatedComments","comments","e","commentId","comment_id","text","updated_comment","updateComment","email","modifiedCount","Error","userEmail","deleteComment","UsersDAO","checkAdmin","mostActiveCommenters","report"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\api\\","sources":["comments.controller.js"],"sourcesContent":["import UsersDAO from \"../dao/usersDAO\"\nimport CommentsDAO from \"../dao/commentsDAO\"\nimport MoviesDAO from \"../dao/moviesDAO\"\nimport { User } from \"./users.controller\"\nimport { ObjectId } from \"bson\"\n\nexport default class CommentsController {\n  static async apiPostComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const movieId = req.body.movie_id\n      const comment = req.body.comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.addComment(\n        ObjectId(movieId),\n        user,\n        comment,\n        date,\n      )\n\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ status: \"success\", comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiUpdateComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const text = req.body.updated_comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.updateComment(\n        ObjectId(commentId),\n        user.email,\n        text,\n        date,\n      )\n\n      var { error } = commentResponse\n      if (error) {\n        res.status(400).json({ error })\n      }\n\n      if (commentResponse.modifiedCount === 0) {\n        throw new Error(\n          \"unable to update comment - user may not be original poster\",\n        )\n      }\n\n      const movieId = req.body.movie_id\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiDeleteComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const userEmail = user.email\n      const commentResponse = await CommentsDAO.deleteComment(\n        ObjectId(commentId),\n        userEmail,\n      )\n\n      const movieId = req.body.movie_id\n\n      const { comments } = await MoviesDAO.getMovieByID(movieId)\n      res.json({ comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiCommentReport(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      if (UsersDAO.checkAdmin(user.email)) {\n        const report = await CommentsDAO.mostActiveCommenters()\n        res.json({ report })\n        return\n      }\n\n      res.status(401).json({ status: \"fail\" })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\usersDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar users;\nvar sessions;\nvar UsersDAO = /*#__PURE__*/function () {\n  function UsersDAO() {\n    (0, _classCallCheck2[\"default\"])(this, UsersDAO);\n  }\n  (0, _createClass2[\"default\"])(UsersDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(users && sessions)) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"users\");\n              case 5:\n                users = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"sessions\");\n              case 8:\n                sessions = _context.sent;\n                _context.next = 14;\n                break;\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 11]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n    Ticket: User Management\n     For this ticket, you will need to implement the following five methods:\n     - getUser\n    - addUser\n    - loginUser\n    - logoutUser\n    - getUserSession\n     You can find these methods below this comment. Make sure to read the comments\n    in each method to better understand the implementation.\n     The method deleteUser is already given to you.\n    */\n    /**\n     * Finds a user in the `users` collection\n     * @param {string} email - The email of the desired user\n     * @returns {Object | null} Returns either a single user or nothing\n     */\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(email) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return users.findOne({\n                  someField: \"someValue\"\n                });\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function getUser(_x2) {\n        return _getUser.apply(this, arguments);\n      }\n      return getUser;\n    }()\n    /**\n     * Adds a user to the `users` collection\n     * @param {UserInfo} userInfo - The information of the user to add\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"addUser\",\n    value: function () {\n      var _addUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userInfo) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return users.insertOne({\n                  someField: \"someValue\"\n                });\n              case 3:\n                return _context3.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                if (!String(_context3.t0).startsWith(\"MongoError: E11000 duplicate key error\")) {\n                  _context3.next = 10;\n                  break;\n                }\n                return _context3.abrupt(\"return\", {\n                  error: \"A user with the given email already exists.\"\n                });\n              case 10:\n                console.error(\"Error occurred while adding new user, \".concat(_context3.t0, \".\"));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n      function addUser(_x3) {\n        return _addUser.apply(this, arguments);\n      }\n      return addUser;\n    }()\n    /**\n     * Adds a user to the `sessions` collection\n     * @param {string} email - The email of the user to login\n     * @param {string} jwt - A JSON web token representing the user's claims\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"loginUser\",\n    value: function () {\n      var _loginUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(email, jwt) {\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return sessions.updateOne({\n                  someField: \"someValue\"\n                }, {\n                  $set: {\n                    someOtherField: \"someOtherValue\"\n                  }\n                });\n              case 3:\n                return _context4.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context4.prev = 6;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Error occurred while logging in user, \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 6]]);\n      }));\n      function loginUser(_x4, _x5) {\n        return _loginUser.apply(this, arguments);\n      }\n      return loginUser;\n    }()\n    /**\n     * Removes a user from the `sessons` collection\n     * @param {string} email - The email of the user to logout\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"logoutUser\",\n    value: function () {\n      var _logoutUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(email) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return sessions.deleteOne({\n                  someField: \"someValue\"\n                });\n              case 3:\n                return _context5.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context5.prev = 6;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Error occurred while logging out user, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 6]]);\n      }));\n      function logoutUser(_x6) {\n        return _logoutUser.apply(this, arguments);\n      }\n      return logoutUser;\n    }()\n    /**\n     * Gets a user from the `sessions` collection\n     * @param {string} email - The email of the user to search for in `sessions`\n     * @returns {Object | null} Returns a user session Object, an \"error\" Object\n     * if something went wrong, or null if user was not found.\n     */\n  }, {\n    key: \"getUserSession\",\n    value: function () {\n      var _getUserSession = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(email) {\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                return _context6.abrupt(\"return\", sessions.findOne({\n                  someField: \"someValue\"\n                }));\n              case 4:\n                _context6.prev = 4;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.error(\"Error occurred while retrieving user session, \".concat(_context6.t0));\n                return _context6.abrupt(\"return\", null);\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 4]]);\n      }));\n      function getUserSession(_x7) {\n        return _getUserSession.apply(this, arguments);\n      }\n      return getUserSession;\n    }()\n    /**\n     * Removes a user from the `sessions` and `users` collections\n     * @param {string} email - The email of the user to delete\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"deleteUser\",\n    value: function () {\n      var _deleteUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(email) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return users.deleteOne({\n                  email: email\n                });\n              case 3:\n                _context7.next = 5;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n              case 5:\n                _context7.next = 7;\n                return this.getUser(email);\n              case 7:\n                _context7.t0 = !_context7.sent;\n                if (!_context7.t0) {\n                  _context7.next = 12;\n                  break;\n                }\n                _context7.next = 11;\n                return this.getUserSession(email);\n              case 11:\n                _context7.t0 = !_context7.sent;\n              case 12:\n                if (!_context7.t0) {\n                  _context7.next = 16;\n                  break;\n                }\n                return _context7.abrupt(\"return\", {\n                  success: true\n                });\n              case 16:\n                console.error(\"Deletion unsuccessful\");\n                return _context7.abrupt(\"return\", {\n                  error: \"Deletion unsuccessful\"\n                });\n              case 18:\n                _context7.next = 24;\n                break;\n              case 20:\n                _context7.prev = 20;\n                _context7.t1 = _context7[\"catch\"](0);\n                console.error(\"Error occurred while deleting user, \".concat(_context7.t1));\n                return _context7.abrupt(\"return\", {\n                  error: _context7.t1\n                });\n              case 24:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 20]]);\n      }));\n      function deleteUser(_x8) {\n        return _deleteUser.apply(this, arguments);\n      }\n      return deleteUser;\n    }()\n    /**\n     * Given a user's email and an object of new preferences, update that user's\n     * data to include those preferences.\n     * @param {string} email - The email of the user to update.\n     * @param {Object} preferences - The preferences to include in the user's data.\n     * @returns {DAOResponse}\n     */\n  }, {\n    key: \"updatePreferences\",\n    value: function () {\n      var _updatePreferences = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(email, preferences) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                /**\n                Ticket: User Preferences\n                 Update the \"preferences\" field in the corresponding user's document to\n                reflect the new information in preferences.\n                */\n\n                preferences = preferences || {};\n\n                // TODO Ticket: User Preferences\n                // Use the data in \"preferences\" to update the user's preferences.\n                _context8.next = 4;\n                return users.updateOne({\n                  someField: someValue\n                }, {\n                  $set: {\n                    someOtherField: someOtherValue\n                  }\n                });\n              case 4:\n                updateResponse = _context8.sent;\n                if (!(updateResponse.matchedCount === 0)) {\n                  _context8.next = 7;\n                  break;\n                }\n                return _context8.abrupt(\"return\", {\n                  error: \"No user found with that email\"\n                });\n              case 7:\n                return _context8.abrupt(\"return\", updateResponse);\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.error(\"An error occurred while updating this user's preferences, \".concat(_context8.t0));\n                return _context8.abrupt(\"return\", {\n                  error: _context8.t0\n                });\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 10]]);\n      }));\n      function updatePreferences(_x9, _x10) {\n        return _updatePreferences.apply(this, arguments);\n      }\n      return updatePreferences;\n    }()\n  }, {\n    key: \"checkAdmin\",\n    value: function () {\n      var _checkAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(email) {\n        var _yield$this$getUser, isAdmin;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return this.getUser(email);\n              case 3:\n                _yield$this$getUser = _context9.sent;\n                isAdmin = _yield$this$getUser.isAdmin;\n                return _context9.abrupt(\"return\", isAdmin || false);\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                return _context9.abrupt(\"return\", {\n                  error: _context9.t0\n                });\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n      function checkAdmin(_x11) {\n        return _checkAdmin.apply(this, arguments);\n      }\n      return checkAdmin;\n    }()\n  }, {\n    key: \"makeAdmin\",\n    value: function () {\n      var _makeAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(email) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                updateResponse = users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    isAdmin: true\n                  }\n                });\n                return _context10.abrupt(\"return\", updateResponse);\n              case 5:\n                _context10.prev = 5;\n                _context10.t0 = _context10[\"catch\"](0);\n                return _context10.abrupt(\"return\", {\n                  error: _context10.t0\n                });\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[0, 5]]);\n      }));\n      function makeAdmin(_x12) {\n        return _makeAdmin.apply(this, arguments);\n      }\n      return makeAdmin;\n    }()\n  }]);\n  return UsersDAO;\n}();\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\nexports[\"default\"] = UsersDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VycyIsInNlc3Npb25zIiwiVXNlcnNEQU8iLCJjb25uIiwiZGIiLCJwcm9jZXNzIiwiZW52IiwiTUZMSVhfTlMiLCJjb2xsZWN0aW9uIiwiY29uc29sZSIsImVycm9yIiwiZW1haWwiLCJmaW5kT25lIiwic29tZUZpZWxkIiwidXNlckluZm8iLCJpbnNlcnRPbmUiLCJzdWNjZXNzIiwiU3RyaW5nIiwic3RhcnRzV2l0aCIsImp3dCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJzb21lT3RoZXJGaWVsZCIsImRlbGV0ZU9uZSIsInVzZXJfaWQiLCJnZXRVc2VyIiwiZ2V0VXNlclNlc3Npb24iLCJwcmVmZXJlbmNlcyIsInNvbWVWYWx1ZSIsInNvbWVPdGhlclZhbHVlIiwidXBkYXRlUmVzcG9uc2UiLCJtYXRjaGVkQ291bnQiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeF9qc1xcc3JjXFxkYW9cXCIsInNvdXJjZXMiOlsidXNlcnNEQU8uanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHVzZXJzXG5sZXQgc2Vzc2lvbnNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlcnNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmICh1c2VycyAmJiBzZXNzaW9ucykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB1c2VycyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgICAgc2Vzc2lvbnMgPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKS5jb2xsZWN0aW9uKFwic2Vzc2lvbnNcIilcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZXN0YWJsaXNoIGNvbGxlY3Rpb24gaGFuZGxlcyBpbiB1c2VyREFPOiAke2V9YClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgZml2ZSBtZXRob2RzOlxuXG4gIC0gZ2V0VXNlclxuICAtIGFkZFVzZXJcbiAgLSBsb2dpblVzZXJcbiAgLSBsb2dvdXRVc2VyXG4gIC0gZ2V0VXNlclNlc3Npb25cblxuICBZb3UgY2FuIGZpbmQgdGhlc2UgbWV0aG9kcyBiZWxvdyB0aGlzIGNvbW1lbnQuIE1ha2Ugc3VyZSB0byByZWFkIHRoZSBjb21tZW50c1xuICBpbiBlYWNoIG1ldGhvZCB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgaW1wbGVtZW50YXRpb24uXG5cbiAgVGhlIG1ldGhvZCBkZWxldGVVc2VyIGlzIGFscmVhZHkgZ2l2ZW4gdG8geW91LlxuICAqL1xuXG4gIC8qKlxuICAgKiBGaW5kcyBhIHVzZXIgaW4gdGhlIGB1c2Vyc2AgY29sbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIGRlc2lyZWQgdXNlclxuICAgKiBAcmV0dXJucyB7T2JqZWN0IHwgbnVsbH0gUmV0dXJucyBlaXRoZXIgYSBzaW5nbGUgdXNlciBvciBub3RoaW5nXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VXNlcihlbWFpbCkge1xuICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAvLyBSZXRyaWV2ZSB0aGUgdXNlciBkb2N1bWVudCBjb3JyZXNwb25kaW5nIHdpdGggdGhlIHVzZXIncyBlbWFpbC5cbiAgICByZXR1cm4gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHNvbWVGaWVsZDogXCJzb21lVmFsdWVcIiB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB1c2VyIHRvIHRoZSBgdXNlcnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtVc2VySW5mb30gdXNlckluZm8gLSBUaGUgaW5mb3JtYXRpb24gb2YgdGhlIHVzZXIgdG8gYWRkXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBlaXRoZXIgYSBcInN1Y2Nlc3NcIiBvciBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYWRkVXNlcih1c2VySW5mbykge1xuICAgIC8qKlxuICAgIFRpY2tldDogRHVyYWJsZSBXcml0ZXNcblxuICAgIFBsZWFzZSBpbmNyZWFzZSB0aGUgZHVyYWJpbGl0eSBvZiB0aGlzIG1ldGhvZCBieSB1c2luZyBhIG5vbi1kZWZhdWx0IHdyaXRlXG4gICAgY29uY2VybiB3aXRoIGBgaW5zZXJ0T25lYGAuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgICAvLyBJbnNlcnQgYSB1c2VyIHdpdGggdGhlIFwibmFtZVwiLCBcImVtYWlsXCIsIGFuZCBcInBhc3N3b3JkXCIgZmllbGRzLlxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IER1cmFibGUgV3JpdGVzXG4gICAgICAvLyBVc2UgYSBtb3JlIGR1cmFibGUgV3JpdGUgQ29uY2VybiBmb3IgdGhpcyBvcGVyYXRpb24uXG4gICAgICBhd2FpdCB1c2Vycy5pbnNlcnRPbmUoeyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfSlcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChTdHJpbmcoZSkuc3RhcnRzV2l0aChcIk1vbmdvRXJyb3I6IEUxMTAwMCBkdXBsaWNhdGUga2V5IGVycm9yXCIpKSB7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiBcIkEgdXNlciB3aXRoIHRoZSBnaXZlbiBlbWFpbCBhbHJlYWR5IGV4aXN0cy5cIiB9XG4gICAgICB9XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSBhZGRpbmcgbmV3IHVzZXIsICR7ZX0uYClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHVzZXIgdG8gdGhlIGBzZXNzaW9uc2AgY29sbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gbG9naW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGp3dCAtIEEgSlNPTiB3ZWIgdG9rZW4gcmVwcmVzZW50aW5nIHRoZSB1c2VyJ3MgY2xhaW1zXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX0gUmV0dXJucyBlaXRoZXIgYSBcInN1Y2Nlc3NcIiBvciBhbiBcImVycm9yXCIgT2JqZWN0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgbG9naW5Vc2VyKGVtYWlsLCBqd3QpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gVXNlIGFuIFVQU0VSVCBzdGF0ZW1lbnQgdG8gdXBkYXRlIHRoZSBcImp3dFwiIGZpZWxkIGluIHRoZSBkb2N1bWVudCxcbiAgICAgIC8vIG1hdGNoaW5nIHRoZSBcInVzZXJfaWRcIiBmaWVsZCB3aXRoIHRoZSBlbWFpbCBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbi5cbiAgICAgIGF3YWl0IHNlc3Npb25zLnVwZGF0ZU9uZShcbiAgICAgICAgeyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfSxcbiAgICAgICAgeyAkc2V0OiB7IHNvbWVPdGhlckZpZWxkOiBcInNvbWVPdGhlclZhbHVlXCIgfSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9nZ2luZyBpbiB1c2VyLCAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHVzZXIgZnJvbSB0aGUgYHNlc3NvbnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIGxvZ291dFxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGxvZ291dFVzZXIoZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gRGVsZXRlIHRoZSBkb2N1bWVudCBpbiB0aGUgYHNlc3Npb25zYCBjb2xsZWN0aW9uIG1hdGNoaW5nIHRoZSBlbWFpbC5cbiAgICAgIGF3YWl0IHNlc3Npb25zLmRlbGV0ZU9uZSh7IHNvbWVGaWVsZDogXCJzb21lVmFsdWVcIiB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9nZ2luZyBvdXQgdXNlciwgJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSB1c2VyIGZyb20gdGhlIGBzZXNzaW9uc2AgY29sbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gc2VhcmNoIGZvciBpbiBgc2Vzc2lvbnNgXG4gICAqIEByZXR1cm5zIHtPYmplY3QgfCBudWxsfSBSZXR1cm5zIGEgdXNlciBzZXNzaW9uIE9iamVjdCwgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKiBpZiBzb21ldGhpbmcgd2VudCB3cm9uZywgb3IgbnVsbCBpZiB1c2VyIHdhcyBub3QgZm91bmQuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VXNlclNlc3Npb24oZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gUmV0cmlldmUgdGhlIHNlc3Npb24gZG9jdW1lbnQgY29ycmVzcG9uZGluZyB3aXRoIHRoZSB1c2VyJ3MgZW1haWwuXG4gICAgICByZXR1cm4gc2Vzc2lvbnMuZmluZE9uZSh7IHNvbWVGaWVsZDogXCJzb21lVmFsdWVcIiB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIHJldHJpZXZpbmcgdXNlciBzZXNzaW9uLCAke2V9YClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB1c2VyIGZyb20gdGhlIGBzZXNzaW9uc2AgYW5kIGB1c2Vyc2AgY29sbGVjdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIGRlbGV0ZVxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVVzZXIoZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdXNlcnMuZGVsZXRlT25lKHsgZW1haWwgfSlcbiAgICAgIGF3YWl0IHNlc3Npb25zLmRlbGV0ZU9uZSh7IHVzZXJfaWQ6IGVtYWlsIH0pXG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmdldFVzZXIoZW1haWwpKSAmJiAhKGF3YWl0IHRoaXMuZ2V0VXNlclNlc3Npb24oZW1haWwpKSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYERlbGV0aW9uIHVuc3VjY2Vzc2Z1bGApXG4gICAgICAgIHJldHVybiB7IGVycm9yOiBgRGVsZXRpb24gdW5zdWNjZXNzZnVsYCB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgZGVsZXRpbmcgdXNlciwgJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgdXNlcidzIGVtYWlsIGFuZCBhbiBvYmplY3Qgb2YgbmV3IHByZWZlcmVuY2VzLCB1cGRhdGUgdGhhdCB1c2VyJ3NcbiAgICogZGF0YSB0byBpbmNsdWRlIHRob3NlIHByZWZlcmVuY2VzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJlZmVyZW5jZXMgLSBUaGUgcHJlZmVyZW5jZXMgdG8gaW5jbHVkZSBpbiB0aGUgdXNlcidzIGRhdGEuXG4gICAqIEByZXR1cm5zIHtEQU9SZXNwb25zZX1cbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVQcmVmZXJlbmNlcyhlbWFpbCwgcHJlZmVyZW5jZXMpIHtcbiAgICB0cnkge1xuICAgICAgLyoqXG4gICAgICBUaWNrZXQ6IFVzZXIgUHJlZmVyZW5jZXNcblxuICAgICAgVXBkYXRlIHRoZSBcInByZWZlcmVuY2VzXCIgZmllbGQgaW4gdGhlIGNvcnJlc3BvbmRpbmcgdXNlcidzIGRvY3VtZW50IHRvXG4gICAgICByZWZsZWN0IHRoZSBuZXcgaW5mb3JtYXRpb24gaW4gcHJlZmVyZW5jZXMuXG4gICAgICAqL1xuXG4gICAgICBwcmVmZXJlbmNlcyA9IHByZWZlcmVuY2VzIHx8IHt9XG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFByZWZlcmVuY2VzXG4gICAgICAvLyBVc2UgdGhlIGRhdGEgaW4gXCJwcmVmZXJlbmNlc1wiIHRvIHVwZGF0ZSB0aGUgdXNlcidzIHByZWZlcmVuY2VzLlxuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSBhd2FpdCB1c2Vycy51cGRhdGVPbmUoXG4gICAgICAgIHsgc29tZUZpZWxkOiBzb21lVmFsdWUgfSxcbiAgICAgICAgeyAkc2V0OiB7IHNvbWVPdGhlckZpZWxkOiBzb21lT3RoZXJWYWx1ZSB9IH0sXG4gICAgICApXG5cbiAgICAgIGlmICh1cGRhdGVSZXNwb25zZS5tYXRjaGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IFwiTm8gdXNlciBmb3VuZCB3aXRoIHRoYXQgZW1haWxcIiB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdXBkYXRlUmVzcG9uc2VcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdXBkYXRpbmcgdGhpcyB1c2VyJ3MgcHJlZmVyZW5jZXMsICR7ZX1gLFxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjaGVja0FkbWluKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaXNBZG1pbiB9ID0gYXdhaXQgdGhpcy5nZXRVc2VyKGVtYWlsKVxuICAgICAgcmV0dXJuIGlzQWRtaW4gfHwgZmFsc2VcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1ha2VBZG1pbihlbWFpbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVSZXNwb25zZSA9IHVzZXJzLnVwZGF0ZU9uZShcbiAgICAgICAgeyBlbWFpbCB9LFxuICAgICAgICB7ICRzZXQ6IHsgaXNBZG1pbjogdHJ1ZSB9IH0sXG4gICAgICApXG4gICAgICByZXR1cm4gdXBkYXRlUmVzcG9uc2VcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUGFyYW1ldGVyIHBhc3NlZCB0byBhZGRVc2VyIG1ldGhvZFxuICogQHR5cGVkZWYgVXNlckluZm9cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZW1haWxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXNzd29yZFxuICovXG5cbi8qKlxuICogU3VjY2Vzcy9FcnJvciByZXR1cm4gb2JqZWN0XG4gKiBAdHlwZWRlZiBEQU9SZXNwb25zZVxuICogQHByb3BlcnR5IHtib29sZWFufSBbc3VjY2Vzc10gLSBTdWNjZXNzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2Vycm9yXSAtIEVycm9yXG4gKi9cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxLQUFLO0FBQ1QsSUFBSUMsUUFBUTtBQUFBLElBRVNDLFFBQVE7RUFBQTtJQUFBO0VBQUE7RUFBQTtJQUFBO0lBQUE7TUFBQSw4RkFDM0IsaUJBQXNCQyxJQUFJO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUEsTUFDcEJILEtBQUssSUFBSUMsUUFBUTtrQkFBQTtrQkFBQTtnQkFBQTtnQkFBQTtjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BSUxFLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxPQUFPLENBQUM7Y0FBQTtnQkFBL0RSLEtBQUs7Z0JBQUE7Z0JBQUEsT0FDWUcsSUFBSSxDQUFDQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsVUFBVSxDQUFDLFVBQVUsQ0FBQztjQUFBO2dCQUFyRVAsUUFBUTtnQkFBQTtnQkFBQTtjQUFBO2dCQUFBO2dCQUFBO2dCQUVSUSxPQUFPLENBQUNDLEtBQUssMkVBQTJEO2NBQUE7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBLENBRTNFO01BQUE7UUFBQTtNQUFBO01BQUE7SUFBQTtJQUVEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtJQU1FO0FBQ0Y7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","map":{"version":3,"names":["users","sessions","UsersDAO","conn","db","process","env","MFLIX_NS","collection","console","error","email","findOne","someField","userInfo","insertOne","success","String","startsWith","jwt","updateOne","$set","someOtherField","deleteOne","user_id","getUser","getUserSession","preferences","someValue","someOtherValue","updateResponse","matchedCount","isAdmin"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\dao\\","sources":["usersDAO.js"],"sourcesContent":["let users\nlet sessions\n\nexport default class UsersDAO {\n  static async injectDB(conn) {\n    if (users && sessions) {\n      return\n    }\n    try {\n      users = await conn.db(process.env.MFLIX_NS).collection(\"users\")\n      sessions = await conn.db(process.env.MFLIX_NS).collection(\"sessions\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: User Management\n\n  For this ticket, you will need to implement the following five methods:\n\n  - getUser\n  - addUser\n  - loginUser\n  - logoutUser\n  - getUserSession\n\n  You can find these methods below this comment. Make sure to read the comments\n  in each method to better understand the implementation.\n\n  The method deleteUser is already given to you.\n  */\n\n  /**\n   * Finds a user in the `users` collection\n   * @param {string} email - The email of the desired user\n   * @returns {Object | null} Returns either a single user or nothing\n   */\n  static async getUser(email) {\n    // TODO Ticket: User Management\n    // Retrieve the user document corresponding with the user's email.\n    return await users.findOne({ someField: \"someValue\" })\n  }\n\n  /**\n   * Adds a user to the `users` collection\n   * @param {UserInfo} userInfo - The information of the user to add\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async addUser(userInfo) {\n    /**\n    Ticket: Durable Writes\n\n    Please increase the durability of this method by using a non-default write\n    concern with ``insertOne``.\n    */\n\n    try {\n      // TODO Ticket: User Management\n      // Insert a user with the \"name\", \"email\", and \"password\" fields.\n      // TODO Ticket: Durable Writes\n      // Use a more durable Write Concern for this operation.\n      await users.insertOne({ someField: \"someValue\" })\n      return { success: true }\n    } catch (e) {\n      if (String(e).startsWith(\"MongoError: E11000 duplicate key error\")) {\n        return { error: \"A user with the given email already exists.\" }\n      }\n      console.error(`Error occurred while adding new user, ${e}.`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Adds a user to the `sessions` collection\n   * @param {string} email - The email of the user to login\n   * @param {string} jwt - A JSON web token representing the user's claims\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async loginUser(email, jwt) {\n    try {\n      // TODO Ticket: User Management\n      // Use an UPSERT statement to update the \"jwt\" field in the document,\n      // matching the \"user_id\" field with the email passed to this function.\n      await sessions.updateOne(\n        { someField: \"someValue\" },\n        { $set: { someOtherField: \"someOtherValue\" } },\n      )\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging in user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Removes a user from the `sessons` collection\n   * @param {string} email - The email of the user to logout\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async logoutUser(email) {\n    try {\n      // TODO Ticket: User Management\n      // Delete the document in the `sessions` collection matching the email.\n      await sessions.deleteOne({ someField: \"someValue\" })\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging out user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Gets a user from the `sessions` collection\n   * @param {string} email - The email of the user to search for in `sessions`\n   * @returns {Object | null} Returns a user session Object, an \"error\" Object\n   * if something went wrong, or null if user was not found.\n   */\n  static async getUserSession(email) {\n    try {\n      // TODO Ticket: User Management\n      // Retrieve the session document corresponding with the user's email.\n      return sessions.findOne({ someField: \"someValue\" })\n    } catch (e) {\n      console.error(`Error occurred while retrieving user session, ${e}`)\n      return null\n    }\n  }\n\n  /**\n   * Removes a user from the `sessions` and `users` collections\n   * @param {string} email - The email of the user to delete\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async deleteUser(email) {\n    try {\n      await users.deleteOne({ email })\n      await sessions.deleteOne({ user_id: email })\n      if (!(await this.getUser(email)) && !(await this.getUserSession(email))) {\n        return { success: true }\n      } else {\n        console.error(`Deletion unsuccessful`)\n        return { error: `Deletion unsuccessful` }\n      }\n    } catch (e) {\n      console.error(`Error occurred while deleting user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Given a user's email and an object of new preferences, update that user's\n   * data to include those preferences.\n   * @param {string} email - The email of the user to update.\n   * @param {Object} preferences - The preferences to include in the user's data.\n   * @returns {DAOResponse}\n   */\n  static async updatePreferences(email, preferences) {\n    try {\n      /**\n      Ticket: User Preferences\n\n      Update the \"preferences\" field in the corresponding user's document to\n      reflect the new information in preferences.\n      */\n\n      preferences = preferences || {}\n\n      // TODO Ticket: User Preferences\n      // Use the data in \"preferences\" to update the user's preferences.\n      const updateResponse = await users.updateOne(\n        { someField: someValue },\n        { $set: { someOtherField: someOtherValue } },\n      )\n\n      if (updateResponse.matchedCount === 0) {\n        return { error: \"No user found with that email\" }\n      }\n      return updateResponse\n    } catch (e) {\n      console.error(\n        `An error occurred while updating this user's preferences, ${e}`,\n      )\n      return { error: e }\n    }\n  }\n\n  static async checkAdmin(email) {\n    try {\n      const { isAdmin } = await this.getUser(email)\n      return isAdmin || false\n    } catch (e) {\n      return { error: e }\n    }\n  }\n\n  static async makeAdmin(email) {\n    try {\n      const updateResponse = users.updateOne(\n        { email },\n        { $set: { isAdmin: true } },\n      )\n      return updateResponse\n    } catch (e) {\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\dao\\\\commentsDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _bson = require(\"bson\");\nvar comments;\nvar CommentsDAO = /*#__PURE__*/function () {\n  function CommentsDAO() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsDAO);\n  }\n  (0, _createClass2[\"default\"])(CommentsDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!comments) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"comments\");\n              case 5:\n                comments = _context.sent;\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n    Ticket: Create/Update Comments\n     For this ticket, you will need to implement the following two methods:\n     - addComment\n    - updateComment\n     You can find these methods below this docstring. Make sure to read the comments\n    to better understand the task.\n    */\n    /**\n     * Inserts a comment into the `comments` collection, with the following fields:\n        - \"name\", the name of the user posting the comment\n       - \"email\", the email of the user posting the comment\n       - \"movie_id\", the _id of the movie pertaining to the comment\n       - \"text\", the text of the comment\n       - \"date\", the date when the comment was posted\n      * @param {string} movieId - The _id of the movie in the `movies` collection.\n     * @param {Object} user - An object containing the user's name and email.\n     * @param {string} comment - The text of the comment.\n     * @param {string} date - The date on which the comment was posted.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n  }, {\n    key: \"addComment\",\n    value: function () {\n      var _addComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(movieId, user, comment, date) {\n        var commentDoc;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                // TODO Ticket: Create/Update Comments\n                // Construct the comment document to be inserted into MongoDB.\n                commentDoc = {\n                  someField: \"someValue\"\n                };\n                _context2.next = 4;\n                return comments.insertOne(commentDoc);\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(\"Unable to post comment: \".concat(_context2.t0));\n                return _context2.abrupt(\"return\", {\n                  error: _context2.t0\n                });\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n      function addComment(_x2, _x3, _x4, _x5) {\n        return _addComment.apply(this, arguments);\n      }\n      return addComment;\n    }()\n    /**\n     * Updates the comment in the comment collection. Queries for the comment\n     * based by both comment _id field as well as the email field to doubly ensure\n     * the user has permission to edit this comment.\n     * @param {string} commentId - The _id of the comment to update.\n     * @param {string} userEmail - The email of the user who owns the comment.\n     * @param {string} text - The updated text of the comment.\n     * @param {string} date - The date on which the comment was updated.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n  }, {\n    key: \"updateComment\",\n    value: function () {\n      var _updateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(commentId, userEmail, text, date) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return comments.updateOne({\n                  someField: \"someValue\"\n                }, {\n                  $set: {\n                    someOtherField: \"someOtherValue\"\n                  }\n                });\n              case 3:\n                updateResponse = _context3.sent;\n                return _context3.abrupt(\"return\", updateResponse);\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to update comment: \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 7]]);\n      }));\n      function updateComment(_x6, _x7, _x8, _x9) {\n        return _updateComment.apply(this, arguments);\n      }\n      return updateComment;\n    }()\n  }, {\n    key: \"deleteComment\",\n    value: function () {\n      var _deleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(commentId, userEmail) {\n        var deleteResponse;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return comments.deleteOne({\n                  _id: (0, _bson.ObjectId)(commentId)\n                });\n              case 3:\n                deleteResponse = _context4.sent;\n                return _context4.abrupt(\"return\", deleteResponse);\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Unable to delete comment: \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }));\n      function deleteComment(_x10, _x11) {\n        return _deleteComment.apply(this, arguments);\n      }\n      return deleteComment;\n    }()\n  }, {\n    key: \"mostActiveCommenters\",\n    value: function () {\n      var _mostActiveCommenters = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var pipeline, readConcern, aggregateResult;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                // TODO Ticket: User Report\n                // Return the 20 users who have commented the most on MFlix.\n                pipeline = []; // TODO Ticket: User Report\n                // Use a more durable Read Concern here to make sure this data is not stale.\n                readConcern = comments.readConcern;\n                _context5.next = 5;\n                return comments.aggregate(pipeline, {\n                  readConcern: readConcern\n                });\n              case 5:\n                aggregateResult = _context5.sent;\n                _context5.next = 8;\n                return aggregateResult.toArray();\n              case 8:\n                return _context5.abrupt(\"return\", _context5.sent);\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Unable to retrieve most active commenters: \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }));\n      function mostActiveCommenters() {\n        return _mostActiveCommenters.apply(this, arguments);\n      }\n      return mostActiveCommenters;\n    }()\n  }]);\n  return CommentsDAO;\n}();\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\nexports[\"default\"] = CommentsDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50cyIsIkNvbW1lbnRzREFPIiwiY29ubiIsImRiIiwicHJvY2VzcyIsImVudiIsIk1GTElYX05TIiwiY29sbGVjdGlvbiIsImNvbnNvbGUiLCJlcnJvciIsIm1vdmllSWQiLCJ1c2VyIiwiY29tbWVudCIsImRhdGUiLCJjb21tZW50RG9jIiwic29tZUZpZWxkIiwiaW5zZXJ0T25lIiwiY29tbWVudElkIiwidXNlckVtYWlsIiwidGV4dCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJzb21lT3RoZXJGaWVsZCIsInVwZGF0ZVJlc3BvbnNlIiwiZGVsZXRlT25lIiwiX2lkIiwiT2JqZWN0SWQiLCJkZWxldGVSZXNwb25zZSIsInBpcGVsaW5lIiwicmVhZENvbmNlcm4iLCJhZ2dyZWdhdGUiLCJhZ2dyZWdhdGVSZXN1bHQiLCJ0b0FycmF5Il0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeF9qc1xcc3JjXFxkYW9cXCIsInNvdXJjZXMiOlsiY29tbWVudHNEQU8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwiYnNvblwiXG5cbmxldCBjb21tZW50c1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tZW50c0RBTyB7XG4gIHN0YXRpYyBhc3luYyBpbmplY3REQihjb25uKSB7XG4gICAgaWYgKGNvbW1lbnRzKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbW1lbnRzID0gYXdhaXQgY29ubi5kYihwcm9jZXNzLmVudi5NRkxJWF9OUykuY29sbGVjdGlvbihcImNvbW1lbnRzXCIpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGVzdGFibGlzaCBjb2xsZWN0aW9uIGhhbmRsZXMgaW4gdXNlckRBTzogJHtlfWApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gIFRpY2tldDogQ3JlYXRlL1VwZGF0ZSBDb21tZW50c1xuXG4gIEZvciB0aGlzIHRpY2tldCwgeW91IHdpbGwgbmVlZCB0byBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyB0d28gbWV0aG9kczpcblxuICAtIGFkZENvbW1lbnRcbiAgLSB1cGRhdGVDb21tZW50XG5cbiAgWW91IGNhbiBmaW5kIHRoZXNlIG1ldGhvZHMgYmVsb3cgdGhpcyBkb2NzdHJpbmcuIE1ha2Ugc3VyZSB0byByZWFkIHRoZSBjb21tZW50c1xuICB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgdGFzay5cbiAgKi9cblxuICAvKipcbiAgICogSW5zZXJ0cyBhIGNvbW1lbnQgaW50byB0aGUgYGNvbW1lbnRzYCBjb2xsZWN0aW9uLCB3aXRoIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxuXG4gICAgIC0gXCJuYW1lXCIsIHRoZSBuYW1lIG9mIHRoZSB1c2VyIHBvc3RpbmcgdGhlIGNvbW1lbnRcbiAgICAgLSBcImVtYWlsXCIsIHRoZSBlbWFpbCBvZiB0aGUgdXNlciBwb3N0aW5nIHRoZSBjb21tZW50XG4gICAgIC0gXCJtb3ZpZV9pZFwiLCB0aGUgX2lkIG9mIHRoZSBtb3ZpZSBwZXJ0YWluaW5nIHRvIHRoZSBjb21tZW50XG4gICAgIC0gXCJ0ZXh0XCIsIHRoZSB0ZXh0IG9mIHRoZSBjb21tZW50XG4gICAgIC0gXCJkYXRlXCIsIHRoZSBkYXRlIHdoZW4gdGhlIGNvbW1lbnQgd2FzIHBvc3RlZFxuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb3ZpZUlkIC0gVGhlIF9pZCBvZiB0aGUgbW92aWUgaW4gdGhlIGBtb3ZpZXNgIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyIC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHVzZXIncyBuYW1lIGFuZCBlbWFpbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbW1lbnQgLSBUaGUgdGV4dCBvZiB0aGUgY29tbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGUgLSBUaGUgZGF0ZSBvbiB3aGljaCB0aGUgY29tbWVudCB3YXMgcG9zdGVkLlxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggZWl0aGVyIERCIHJlc3BvbnNlIG9yIFwiZXJyb3JcIlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGFkZENvbW1lbnQobW92aWVJZCwgdXNlciwgY29tbWVudCwgZGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogQ3JlYXRlL1VwZGF0ZSBDb21tZW50c1xuICAgICAgLy8gQ29uc3RydWN0IHRoZSBjb21tZW50IGRvY3VtZW50IHRvIGJlIGluc2VydGVkIGludG8gTW9uZ29EQi5cbiAgICAgIGNvbnN0IGNvbW1lbnREb2MgPSB7IHNvbWVGaWVsZDogXCJzb21lVmFsdWVcIiB9XG5cbiAgICAgIHJldHVybiBhd2FpdCBjb21tZW50cy5pbnNlcnRPbmUoY29tbWVudERvYylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gcG9zdCBjb21tZW50OiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY29tbWVudCBpbiB0aGUgY29tbWVudCBjb2xsZWN0aW9uLiBRdWVyaWVzIGZvciB0aGUgY29tbWVudFxuICAgKiBiYXNlZCBieSBib3RoIGNvbW1lbnQgX2lkIGZpZWxkIGFzIHdlbGwgYXMgdGhlIGVtYWlsIGZpZWxkIHRvIGRvdWJseSBlbnN1cmVcbiAgICogdGhlIHVzZXIgaGFzIHBlcm1pc3Npb24gdG8gZWRpdCB0aGlzIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tZW50SWQgLSBUaGUgX2lkIG9mIHRoZSBjb21tZW50IHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJFbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB3aG8gb3ducyB0aGUgY29tbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdXBkYXRlZCB0ZXh0IG9mIHRoZSBjb21tZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZSAtIFRoZSBkYXRlIG9uIHdoaWNoIHRoZSBjb21tZW50IHdhcyB1cGRhdGVkLlxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggZWl0aGVyIERCIHJlc3BvbnNlIG9yIFwiZXJyb3JcIlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvbW1lbnQoY29tbWVudElkLCB1c2VyRW1haWwsIHRleHQsIGRhdGUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcbiAgICAgIC8vIFVzZSB0aGUgY29tbWVudElkIGFuZCB1c2VyRW1haWwgdG8gc2VsZWN0IHRoZSBwcm9wZXIgY29tbWVudCwgdGhlblxuICAgICAgLy8gdXBkYXRlIHRoZSBcInRleHRcIiBhbmQgXCJkYXRlXCIgZmllbGRzIG9mIHRoZSBzZWxlY3RlZCBjb21tZW50LlxuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSBhd2FpdCBjb21tZW50cy51cGRhdGVPbmUoXG4gICAgICAgIHsgc29tZUZpZWxkOiBcInNvbWVWYWx1ZVwiIH0sXG4gICAgICAgIHsgJHNldDogeyBzb21lT3RoZXJGaWVsZDogXCJzb21lT3RoZXJWYWx1ZVwiIH0gfSxcbiAgICAgIClcblxuICAgICAgcmV0dXJuIHVwZGF0ZVJlc3BvbnNlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIHVwZGF0ZSBjb21tZW50OiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlQ29tbWVudChjb21tZW50SWQsIHVzZXJFbWFpbCkge1xuICAgIC8qKlxuICAgIFRpY2tldDogRGVsZXRlIENvbW1lbnRzXG5cbiAgICBJbXBsZW1lbnQgdGhlIGRlbGV0ZU9uZSgpIGNhbGwgaW4gdGhpcyBtZXRob2QuXG5cbiAgICBFbnN1cmUgdGhlIGRlbGV0ZSBvcGVyYXRpb24gaXMgbGltaXRlZCBzbyBvbmx5IHRoZSB1c2VyIGNhbiBkZWxldGUgdGhlaXIgb3duXG4gICAgY29tbWVudHMsIGJ1dCBub3QgYW55b25lIGVsc2UncyBjb21tZW50cy5cbiAgICAqL1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBEZWxldGUgQ29tbWVudHNcbiAgICAgIC8vIFVzZSB0aGUgdXNlckVtYWlsIGFuZCBjb21tZW50SWQgdG8gZGVsZXRlIHRoZSBwcm9wZXIgY29tbWVudC5cbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3BvbnNlID0gYXdhaXQgY29tbWVudHMuZGVsZXRlT25lKHtcbiAgICAgICAgX2lkOiBPYmplY3RJZChjb21tZW50SWQpLFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIGRlbGV0ZVJlc3BvbnNlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGRlbGV0ZSBjb21tZW50OiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbW9zdEFjdGl2ZUNvbW1lbnRlcnMoKSB7XG4gICAgLyoqXG4gICAgVGlja2V0OiBVc2VyIFJlcG9ydFxuXG4gICAgQnVpbGQgYSBwaXBlbGluZSB0aGF0IHJldHVybnMgdGhlIDIwIG1vc3QgZnJlcXVlbnQgY29tbWVudGVycyBvbiB0aGUgTUZsaXhcbiAgICBzaXRlLiBZb3UgY2FuIGRvIHRoaXMgYnkgY291bnRpbmcgdGhlIG51bWJlciBvZiBvY2N1cnJlbmNlcyBvZiBhIHVzZXInc1xuICAgIGVtYWlsIGluIHRoZSBgY29tbWVudHNgIGNvbGxlY3Rpb24uXG4gICAgKi9cbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgUmVwb3J0XG4gICAgICAvLyBSZXR1cm4gdGhlIDIwIHVzZXJzIHdobyBoYXZlIGNvbW1lbnRlZCB0aGUgbW9zdCBvbiBNRmxpeC5cbiAgICAgIGNvbnN0IHBpcGVsaW5lID0gW11cblxuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgUmVwb3J0XG4gICAgICAvLyBVc2UgYSBtb3JlIGR1cmFibGUgUmVhZCBDb25jZXJuIGhlcmUgdG8gbWFrZSBzdXJlIHRoaXMgZGF0YSBpcyBub3Qgc3RhbGUuXG4gICAgICBjb25zdCByZWFkQ29uY2VybiA9IGNvbW1lbnRzLnJlYWRDb25jZXJuXG5cbiAgICAgIGNvbnN0IGFnZ3JlZ2F0ZVJlc3VsdCA9IGF3YWl0IGNvbW1lbnRzLmFnZ3JlZ2F0ZShwaXBlbGluZSwge1xuICAgICAgICByZWFkQ29uY2VybixcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBhd2FpdCBhZ2dyZWdhdGVSZXN1bHQudG9BcnJheSgpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIHJldHJpZXZlIG1vc3QgYWN0aXZlIGNvbW1lbnRlcnM6ICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFN1Y2Nlc3MvRXJyb3IgcmV0dXJuIG9iamVjdFxuICogQHR5cGVkZWYgREFPUmVzcG9uc2VcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3N1Y2Nlc3NdIC0gU3VjY2Vzc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtlcnJvcl0gLSBFcnJvclxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFFQSxJQUFJQSxRQUFRO0FBQUEsSUFFU0MsV0FBVztFQUFBO0lBQUE7RUFBQTtFQUFBO0lBQUE7SUFBQTtNQUFBLDhGQUM5QixpQkFBc0JDLElBQUk7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQSxLQUNwQkYsUUFBUTtrQkFBQTtrQkFBQTtnQkFBQTtnQkFBQTtjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BSU9FLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxPQUFP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","map":{"version":3,"names":["comments","CommentsDAO","conn","db","process","env","MFLIX_NS","collection","console","error","movieId","user","comment","date","commentDoc","someField","insertOne","commentId","userEmail","text","updateOne","$set","someOtherField","updateResponse","deleteOne","_id","ObjectId","deleteResponse","pipeline","readConcern","aggregate","aggregateResult","toArray"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\dao\\","sources":["commentsDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet comments\n\nexport default class CommentsDAO {\n  static async injectDB(conn) {\n    if (comments) {\n      return\n    }\n    try {\n      comments = await conn.db(process.env.MFLIX_NS).collection(\"comments\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: Create/Update Comments\n\n  For this ticket, you will need to implement the following two methods:\n\n  - addComment\n  - updateComment\n\n  You can find these methods below this docstring. Make sure to read the comments\n  to better understand the task.\n  */\n\n  /**\n   * Inserts a comment into the `comments` collection, with the following fields:\n\n     - \"name\", the name of the user posting the comment\n     - \"email\", the email of the user posting the comment\n     - \"movie_id\", the _id of the movie pertaining to the comment\n     - \"text\", the text of the comment\n     - \"date\", the date when the comment was posted\n\n   * @param {string} movieId - The _id of the movie in the `movies` collection.\n   * @param {Object} user - An object containing the user's name and email.\n   * @param {string} comment - The text of the comment.\n   * @param {string} date - The date on which the comment was posted.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async addComment(movieId, user, comment, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Construct the comment document to be inserted into MongoDB.\n      const commentDoc = { someField: \"someValue\" }\n\n      return await comments.insertOne(commentDoc)\n    } catch (e) {\n      console.error(`Unable to post comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Updates the comment in the comment collection. Queries for the comment\n   * based by both comment _id field as well as the email field to doubly ensure\n   * the user has permission to edit this comment.\n   * @param {string} commentId - The _id of the comment to update.\n   * @param {string} userEmail - The email of the user who owns the comment.\n   * @param {string} text - The updated text of the comment.\n   * @param {string} date - The date on which the comment was updated.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async updateComment(commentId, userEmail, text, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Use the commentId and userEmail to select the proper comment, then\n      // update the \"text\" and \"date\" fields of the selected comment.\n      const updateResponse = await comments.updateOne(\n        { someField: \"someValue\" },\n        { $set: { someOtherField: \"someOtherValue\" } },\n      )\n\n      return updateResponse\n    } catch (e) {\n      console.error(`Unable to update comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async deleteComment(commentId, userEmail) {\n    /**\n    Ticket: Delete Comments\n\n    Implement the deleteOne() call in this method.\n\n    Ensure the delete operation is limited so only the user can delete their own\n    comments, but not anyone else's comments.\n    */\n\n    try {\n      // TODO Ticket: Delete Comments\n      // Use the userEmail and commentId to delete the proper comment.\n      const deleteResponse = await comments.deleteOne({\n        _id: ObjectId(commentId),\n      })\n\n      return deleteResponse\n    } catch (e) {\n      console.error(`Unable to delete comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async mostActiveCommenters() {\n    /**\n    Ticket: User Report\n\n    Build a pipeline that returns the 20 most frequent commenters on the MFlix\n    site. You can do this by counting the number of occurrences of a user's\n    email in the `comments` collection.\n    */\n    try {\n      // TODO Ticket: User Report\n      // Return the 20 users who have commented the most on MFlix.\n      const pipeline = []\n\n      // TODO Ticket: User Report\n      // Use a more durable Read Concern here to make sure this data is not stale.\n      const readConcern = comments.readConcern\n\n      const aggregateResult = await comments.aggregate(pipeline, {\n        readConcern,\n      })\n\n      return await aggregateResult.toArray()\n    } catch (e) {\n      console.error(`Unable to retrieve most active commenters: ${e}`)\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\users.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.User = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar hashPassword = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(password) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _bcryptjs[\"default\"].hash(password, 10);\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function hashPassword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar User = /*#__PURE__*/function () {\n  function User() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      name = _ref2.name,\n      email = _ref2.email,\n      password = _ref2.password,\n      _ref2$preferences = _ref2.preferences,\n      preferences = _ref2$preferences === void 0 ? {} : _ref2$preferences;\n    (0, _classCallCheck2[\"default\"])(this, User);\n    this.name = name;\n    this.email = email;\n    this.password = password;\n    this.preferences = preferences;\n  }\n  (0, _createClass2[\"default\"])(User, [{\n    key: \"toJson\",\n    value: function toJson() {\n      return {\n        name: this.name,\n        email: this.email,\n        preferences: this.preferences\n      };\n    }\n  }, {\n    key: \"comparePassword\",\n    value: function () {\n      var _comparePassword = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(plainText) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _bcryptjs[\"default\"].compare(plainText, this.password);\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function comparePassword(_x2) {\n        return _comparePassword.apply(this, arguments);\n      }\n      return comparePassword;\n    }()\n  }, {\n    key: \"encoded\",\n    value: function encoded() {\n      return _jsonwebtoken[\"default\"].sign(_objectSpread({\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4\n      }, this.toJson()), process.env.SECRET_KEY);\n    }\n  }], [{\n    key: \"decoded\",\n    value: function () {\n      var _decoded = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userJwt) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", _jsonwebtoken[\"default\"].verify(userJwt, process.env.SECRET_KEY, function (error, res) {\n                  if (error) {\n                    return {\n                      error: error\n                    };\n                  }\n                  return new User(res);\n                }));\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      function decoded(_x3) {\n        return _decoded.apply(this, arguments);\n      }\n      return decoded;\n    }()\n  }]);\n  return User;\n}();\nexports.User = User;\nvar UserController = /*#__PURE__*/function () {\n  function UserController() {\n    (0, _classCallCheck2[\"default\"])(this, UserController);\n  }\n  (0, _createClass2[\"default\"])(UserController, null, [{\n    key: \"register\",\n    value: function () {\n      var _register = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n        var userFromBody, errors, userInfo, insertResult, userFromDB, user;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 8;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n              case 8:\n                _context4.t0 = _objectSpread;\n                _context4.t1 = _objectSpread({}, userFromBody);\n                _context4.t2 = {};\n                _context4.next = 13;\n                return hashPassword(userFromBody.password);\n              case 13:\n                _context4.t3 = _context4.sent;\n                _context4.t4 = {\n                  password: _context4.t3\n                };\n                userInfo = (0, _context4.t0)(_context4.t1, _context4.t2, _context4.t4);\n                _context4.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n              case 18:\n                insertResult = _context4.sent;\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n                _context4.next = 22;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n              case 22:\n                userFromDB = _context4.sent;\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 27;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n              case 27:\n                user = new User(userFromDB);\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context4.next = 34;\n                break;\n              case 31:\n                _context4.prev = 31;\n                _context4.t5 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  error: _context4.t5\n                });\n              case 34:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 31]]);\n      }));\n      function register(_x4, _x5) {\n        return _register.apply(this, arguments);\n      }\n      return register;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var _req$body, email, password, userData, user, loginResponse;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _req$body = req.body, email = _req$body.email, password = _req$body.password;\n                if (!(!email || typeof email !== \"string\")) {\n                  _context5.next = 5;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad email format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 5:\n                if (!(!password || typeof password !== \"string\")) {\n                  _context5.next = 8;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 8:\n                _context5.next = 10;\n                return _usersDAO[\"default\"].getUser(email);\n              case 10:\n                userData = _context5.sent;\n                if (userData) {\n                  _context5.next = 14;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your email is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 14:\n                user = new User(userData);\n                _context5.next = 17;\n                return user.comparePassword(password);\n              case 17:\n                if (_context5.sent) {\n                  _context5.next = 20;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 20:\n                _context5.next = 22;\n                return _usersDAO[\"default\"].loginUser(user.email, user.encoded());\n              case 22:\n                loginResponse = _context5.sent;\n                if (loginResponse.success) {\n                  _context5.next = 26;\n                  break;\n                }\n                res.status(500).json({\n                  error: loginResponse.error\n                });\n                return _context5.abrupt(\"return\");\n              case 26:\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context5.next = 33;\n                break;\n              case 29:\n                _context5.prev = 29;\n                _context5.t0 = _context5[\"catch\"](0);\n                res.status(400).json({\n                  error: _context5.t0\n                });\n                return _context5.abrupt(\"return\");\n              case 33:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 29]]);\n      }));\n      function login(_x6, _x7, _x8) {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n        var userJwt, userObj, error, logoutResult;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context6.next = 4;\n                return User.decoded(userJwt);\n              case 4:\n                userObj = _context6.sent;\n                error = userObj.error;\n                if (!error) {\n                  _context6.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n              case 9:\n                _context6.next = 11;\n                return _usersDAO[\"default\"].logoutUser(userObj.email);\n              case 11:\n                logoutResult = _context6.sent;\n                error = logoutResult.error;\n                if (!error) {\n                  _context6.next = 16;\n                  break;\n                }\n                res.status(500).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n              case 16:\n                res.json(logoutResult);\n                _context6.next = 22;\n                break;\n              case 19:\n                _context6.prev = 19;\n                _context6.t0 = _context6[\"catch\"](0);\n                res.status(500).json(_context6.t0);\n              case 22:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 19]]);\n      }));\n      function logout(_x9, _x10) {\n        return _logout.apply(this, arguments);\n      }\n      return logout;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n        var password, userJwt, userClaim, error, user, deleteResult;\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                password = req.body.password;\n                if (!(!password || typeof password !== \"string\")) {\n                  _context7.next = 5;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context7.abrupt(\"return\");\n              case 5:\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context7.next = 8;\n                return User.decoded(userJwt);\n              case 8:\n                userClaim = _context7.sent;\n                error = userClaim.error;\n                if (!error) {\n                  _context7.next = 13;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n              case 13:\n                _context7.t0 = User;\n                _context7.next = 16;\n                return _usersDAO[\"default\"].getUser(userClaim.email);\n              case 16:\n                _context7.t1 = _context7.sent;\n                user = new _context7.t0(_context7.t1);\n                _context7.next = 20;\n                return user.comparePassword(password);\n              case 20:\n                if (_context7.sent) {\n                  _context7.next = 23;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context7.abrupt(\"return\");\n              case 23:\n                _context7.next = 25;\n                return _usersDAO[\"default\"].deleteUser(userClaim.email);\n              case 25:\n                deleteResult = _context7.sent;\n                error = deleteResult.error;\n                if (!error) {\n                  _context7.next = 30;\n                  break;\n                }\n                res.status(500).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n              case 30:\n                res.json(deleteResult);\n                _context7.next = 36;\n                break;\n              case 33:\n                _context7.prev = 33;\n                _context7.t2 = _context7[\"catch\"](0);\n                res.status(500).json(_context7.t2);\n              case 36:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 33]]);\n      }));\n      function _delete(_x11, _x12) {\n        return _delete2.apply(this, arguments);\n      }\n      return _delete;\n    }()\n  }, {\n    key: \"save\",\n    value: function () {\n      var _save = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n        var userJwt, userFromHeader, error, userFromDB, updatedUser;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context8.next = 4;\n                return User.decoded(userJwt);\n              case 4:\n                userFromHeader = _context8.sent;\n                error = userFromHeader.error;\n                if (!error) {\n                  _context8.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context8.abrupt(\"return\");\n              case 9:\n                _context8.next = 11;\n                return _usersDAO[\"default\"].updatePreferences(userFromHeader.email, req.body.preferences);\n              case 11:\n                _context8.next = 13;\n                return _usersDAO[\"default\"].getUser(userFromHeader.email);\n              case 13:\n                userFromDB = _context8.sent;\n                updatedUser = new User(userFromDB);\n                res.json({\n                  auth_token: updatedUser.encoded(),\n                  info: updatedUser.toJson()\n                });\n                _context8.next = 21;\n                break;\n              case 18:\n                _context8.prev = 18;\n                _context8.t0 = _context8[\"catch\"](0);\n                res.status(500).json(_context8.t0);\n              case 21:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 18]]);\n      }));\n      function save(_x13, _x14) {\n        return _save.apply(this, arguments);\n      }\n      return save;\n    }() // for internal use only\n  }, {\n    key: \"createAdminUser\",\n    value: function () {\n      var _createAdminUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n        var userFromBody, errors, userInfo, insertResult, makeAdminResponse, userFromDB, user, _jwt, loginResponse;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 8;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 8:\n                _context9.t0 = _objectSpread;\n                _context9.t1 = _objectSpread({}, userFromBody);\n                _context9.t2 = {};\n                _context9.next = 13;\n                return hashPassword(userFromBody.password);\n              case 13:\n                _context9.t3 = _context9.sent;\n                _context9.t4 = {\n                  password: _context9.t3\n                };\n                userInfo = (0, _context9.t0)(_context9.t1, _context9.t2, _context9.t4);\n                _context9.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n              case 18:\n                insertResult = _context9.sent;\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 23;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 23:\n                _context9.next = 25;\n                return _usersDAO[\"default\"].makeAdmin(userFromBody.email);\n              case 25:\n                makeAdminResponse = _context9.sent;\n                _context9.next = 28;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n              case 28:\n                userFromDB = _context9.sent;\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 33;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 33:\n                user = new User(userFromDB);\n                _jwt = user.encoded();\n                _context9.next = 37;\n                return _usersDAO[\"default\"].loginUser(user.email, _jwt);\n              case 37:\n                loginResponse = _context9.sent;\n                res.json({\n                  auth_token: _jwt,\n                  info: user.toJson()\n                });\n                _context9.next = 44;\n                break;\n              case 41:\n                _context9.prev = 41;\n                _context9.t5 = _context9[\"catch\"](0);\n                res.status(500).json(_context9.t5);\n              case 44:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 41]]);\n      }));\n      function createAdminUser(_x15, _x16) {\n        return _createAdminUser.apply(this, arguments);\n      }\n      return createAdminUser;\n    }()\n  }]);\n  return UserController;\n}();\nexports[\"default\"] = UserController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicHJlZmVyZW5jZXMiLCJwbGFpblRleHQiLCJjb21wYXJlIiwiand0Iiwic2lnbiIsImV4cCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJ0b0pzb24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsInVzZXJKd3QiLCJ2ZXJpZnkiLCJlcnJvciIsInJlcyIsIlVzZXJDb250cm9sbGVyIiwicmVxIiwidXNlckZyb21Cb2R5IiwiYm9keSIsImVycm9ycyIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJzdGF0dXMiLCJqc29uIiwidXNlckluZm8iLCJVc2Vyc0RBTyIsImFkZFVzZXIiLCJpbnNlcnRSZXN1bHQiLCJzdWNjZXNzIiwiZ2V0VXNlciIsInVzZXJGcm9tREIiLCJnZW5lcmFsIiwidXNlciIsImF1dGhfdG9rZW4iLCJlbmNvZGVkIiwiaW5mbyIsIm5leHQiLCJ1c2VyRGF0YSIsImNvbXBhcmVQYXNzd29yZCIsImxvZ2luVXNlciIsImxvZ2luUmVzcG9uc2UiLCJnZXQiLCJzbGljZSIsImRlY29kZWQiLCJ1c2VyT2JqIiwibG9nb3V0VXNlciIsImxvZ291dFJlc3VsdCIsInVzZXJDbGFpbSIsImRlbGV0ZVVzZXIiLCJkZWxldGVSZXN1bHQiLCJ1c2VyRnJvbUhlYWRlciIsInVwZGF0ZVByZWZlcmVuY2VzIiwidXBkYXRlZFVzZXIiLCJtYWtlQWRtaW4iLCJtYWtlQWRtaW5SZXNwb25zZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXhfanNcXHNyY1xcYXBpXFwiLCJzb3VyY2VzIjpbInVzZXJzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCJcbmltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi4vZGFvL3VzZXJzREFPXCJcblxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgcGFzc3dvcmQgPT4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuXG5leHBvcnQgY2xhc3MgVXNlciB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwcmVmZXJlbmNlcyA9IHt9IH0gPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmVtYWlsID0gZW1haWxcbiAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmRcbiAgICB0aGlzLnByZWZlcmVuY2VzID0gcHJlZmVyZW5jZXNcbiAgfVxuICB0b0pzb24oKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5uYW1lLCBlbWFpbDogdGhpcy5lbWFpbCwgcHJlZmVyZW5jZXM6IHRoaXMucHJlZmVyZW5jZXMgfVxuICB9XG4gIGFzeW5jIGNvbXBhcmVQYXNzd29yZChwbGFpblRleHQpIHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGxhaW5UZXh0LCB0aGlzLnBhc3N3b3JkKVxuICB9XG4gIGVuY29kZWQoKSB7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICBleHA6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgNjAgKiA2MCAqIDQsXG4gICAgICAgIC4uLnRoaXMudG9Kc29uKCksXG4gICAgICB9LFxuICAgICAgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSxcbiAgICApXG4gIH1cbiAgc3RhdGljIGFzeW5jIGRlY29kZWQodXNlckp3dCkge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHVzZXJKd3QsIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksIChlcnJvciwgcmVzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3IgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHJlcylcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIHJlZ2lzdGVyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJGcm9tQm9keSA9IHJlcS5ib2R5XG4gICAgICBsZXQgZXJyb3JzID0ge31cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5LnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJZb3VyIHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG4gICAgICBpZiAodXNlckZyb21Cb2R5ICYmIHVzZXJGcm9tQm9keS5uYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgZXJyb3JzLm5hbWUgPSBcIllvdSBtdXN0IHNwZWNpZnkgYSBuYW1lIG9mIGF0IGxlYXN0IDMgY2hhcmFjdGVycy5cIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgICAuLi51c2VyRnJvbUJvZHksXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBoYXNoUGFzc3dvcmQodXNlckZyb21Cb2R5LnBhc3N3b3JkKSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uYWRkVXNlcih1c2VySW5mbylcbiAgICAgIGlmICghaW5zZXJ0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gaW5zZXJ0UmVzdWx0LmVycm9yXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyRnJvbURCID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcih1c2VyRnJvbUJvZHkuZW1haWwpXG4gICAgICBpZiAoIXVzZXJGcm9tREIpIHtcbiAgICAgICAgZXJyb3JzLmdlbmVyYWwgPSBcIkludGVybmFsIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCJcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckZyb21EQilcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBhdXRoX3Rva2VuOiB1c2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcbiAgICAgIGlmICghZW1haWwgfHwgdHlwZW9mIGVtYWlsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQmFkIGVtYWlsIGZvcm1hdCwgZXhwZWN0ZWQgc3RyaW5nLlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJCYWQgcGFzc3dvcmQgZm9ybWF0LCBleHBlY3RlZCBzdHJpbmcuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBsZXQgdXNlckRhdGEgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKGVtYWlsKVxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIk1ha2Ugc3VyZSB5b3VyIGVtYWlsIGlzIGNvcnJlY3QuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckRhdGEpXG5cbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBsb2dpblJlc3BvbnNlID0gYXdhaXQgVXNlcnNEQU8ubG9naW5Vc2VyKHVzZXIuZW1haWwsIHVzZXIuZW5jb2RlZCgpKVxuICAgICAgaWYgKCFsb2dpblJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogbG9naW5SZXNwb25zZS5lcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHsgYXV0aF90b2tlbjogdXNlci5lbmNvZGVkKCksIGluZm86IHVzZXIudG9Kc29uKCkgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9nb3V0KHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyT2JqID0gYXdhaXQgVXNlci5kZWNvZGVkKHVzZXJKd3QpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gdXNlck9ialxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBsb2dvdXRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5sb2dvdXRVc2VyKHVzZXJPYmouZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gbG9nb3V0UmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGxvZ291dFJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGUocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHsgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gICAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkJhZCBwYXNzd29yZCBmb3JtYXQsIGV4cGVjdGVkIHN0cmluZy5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyQ2xhaW0gPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyQ2xhaW1cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKGF3YWl0IFVzZXJzREFPLmdldFVzZXIodXNlckNsYWltLmVtYWlsKSlcbiAgICAgIGlmICghKGF3YWl0IHVzZXIuY29tcGFyZVBhc3N3b3JkKHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBwYXNzd29yZCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgZGVsZXRlUmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uZGVsZXRlVXNlcih1c2VyQ2xhaW0uZW1haWwpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gZGVsZXRlUmVzdWx0XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGRlbGV0ZVJlc3VsdClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyRnJvbUhlYWRlciA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJGcm9tSGVhZGVyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgYXdhaXQgVXNlcnNEQU8udXBkYXRlUHJlZmVyZW5jZXMoXG4gICAgICAgIHVzZXJGcm9tSGVhZGVyLmVtYWlsLFxuICAgICAgICByZXEuYm9keS5wcmVmZXJlbmNlcyxcbiAgICAgIClcbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tSGVhZGVyLmVtYWlsKVxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IHVwZGF0ZWRVc2VyLmVuY29kZWQoKSxcbiAgICAgICAgaW5mbzogdXBkYXRlZFVzZXIudG9Kc29uKCksXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGUpXG4gICAgfVxuICB9XG5cbiAgLy8gZm9yIGludGVybmFsIHVzZSBvbmx5XG4gIHN0YXRpYyBhc3luYyBjcmVhdGVBZG1pblVzZXIocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckZyb21Cb2R5ID0gcmVxLmJvZHlcbiAgICAgIGxldCBlcnJvcnMgPSB7fVxuICAgICAgaWYgKHVzZXJGcm9tQm9keSAmJiB1c2VyRnJvbUJvZHkucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgICBlcnJvcnMucGFzc3dvcmQgPSBcIllvdXIgcGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMuXCJcbiAgICAgIH1cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5Lm5hbWUubGVuZ3RoIDwgMykge1xuICAgICAgICBlcnJvcnMubmFtZSA9IFwiWW91IG11c3Qgc3BlY2lmeSBhIG5hbWUgb2YgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICAgIC4uLnVzZXJGcm9tQm9keSxcbiAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGhhc2hQYXNzd29yZCh1c2VyRnJvbUJvZHkucGFzc3dvcmQpLFxuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnNlcnRSZXN1bHQgPSBhd2FpdCBVc2Vyc0RBTy5hZGRVc2VyKHVzZXJJbmZvKVxuICAgICAgaWYgKCFpbnNlcnRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBpbnNlcnRSZXN1bHQuZXJyb3JcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtYWtlQWRtaW5SZXNwb25zZSA9IGF3YWl0IFVzZXJzREFPLm1ha2VBZG1pbih1c2VyRnJvbUJvZHkuZW1haWwpXG5cbiAgICAgIGNvbnN0IHVzZXJGcm9tREIgPSBhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJGcm9tQm9keS5lbWFpbClcbiAgICAgIGlmICghdXNlckZyb21EQikge1xuICAgICAgICBlcnJvcnMuZ2VuZXJhbCA9IFwiSW50ZXJuYWwgZXJyb3IsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih1c2VyRnJvbURCKVxuICAgICAgY29uc3Qgand0ID0gdXNlci5lbmNvZGVkKClcbiAgICAgIGNvbnN0IGxvZ2luUmVzcG9uc2UgPSBhd2FpdCBVc2Vyc0RBTy5sb2dpblVzZXIodXNlci5lbWFpbCwgand0KVxuXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGF1dGhfdG9rZW46IGp3dCxcbiAgICAgICAgaW5mbzogdXNlci50b0pzb24oKSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSlcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQXNDO0FBQUE7QUFFdEMsSUFBTUEsWUFBWTtFQUFBLHlGQUFHLGlCQUFNQyxRQUFRO0lBQUE7TUFBQTtRQUFBO1VBQUE7WUFBQTtZQUFBLE9BQVVDLG9CQUFNLENBQUNDLElBQUksQ0FBQ0YsUUFBUSxFQUFFLEVBQUUsQ0FBQztVQUFBO1lBQUE7VUFBQTtVQUFBO1lBQUE7UUFBQTtNQUFBO0lBQUE7RUFBQTtFQUFBLGdCQUFoRUQsWUFBWTtJQUFBO0VBQUE7QUFBQSxHQUFvRDtBQUFBLElBRXpESSxJQUFJO0VBQ2YsZ0JBQThEO0lBQUEsZ0ZBQUosQ0FBQyxDQUFDO01BQTlDQyxJQUFJLFNBQUpBLElBQUk7TUFBRUMsS0FBSyxTQUFMQSxLQUFLO01BQUVMLFFBQVEsU0FBUkEsUUFBUTtNQUFBLDBCQUFFTSxXQUFXO01BQVhBLFdBQVcsa0NBQUcsQ0FBQyxDQUFDO0lBQUE7SUFDbkQsSUFBSSxDQUFDRixJQUFJLEdBQUdBLElBQUk7SUFDaEIsSUFBSSxDQUFDQyxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsSUFBSSxDQUFDTCxRQUFRLEdBQUdBLFFBQVE7SUFDeEIsSUFBSSxDQUFDTSxXQUFXLEdBQUdBLFdBQVc7RUFDaEM7RUFBQztJQUFBO0lBQUEsT0FDRCxrQkFBUztNQUNQLE9BQU87UUFBRUYsSUFBSSxFQUFFLElBQUksQ0FBQ0EsSUFBSTtRQUFFQyxLQUFLLEVBQUUsSUFBSSxDQUFDQSxLQUFLO1FBQUVDLFdBQVcsRUFBRSxJQUFJLENBQUNBO01BQVksQ0FBQztJQUM5RTtFQUFDO0lBQUE7SUFBQTtNQUFBLHFHQUNELGtCQUFzQkMsU0FBUztRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUFBLE9BQ2hCTixvQkFBTSxDQUFDTyxPQUFP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","map":{"version":3,"names":["hashPassword","password","bcrypt","hash","User","name","email","preferences","plainText","compare","jwt","sign","exp","Math","floor","Date","now","toJson","process","env","SECRET_KEY","userJwt","verify","error","res","UserController","req","userFromBody","body","errors","length","Object","keys","status","json","userInfo","UsersDAO","addUser","insertResult","success","getUser","userFromDB","general","user","auth_token","encoded","info","next","userData","comparePassword","loginUser","loginResponse","get","slice","decoded","userObj","logoutUser","logoutResult","userClaim","deleteUser","deleteResult","userFromHeader","updatePreferences","updatedUser","makeAdmin","makeAdminResponse"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\api\\","sources":["users.controller.js"],"sourcesContent":["import bcrypt from \"bcryptjs\"\nimport jwt from \"jsonwebtoken\"\nimport UsersDAO from \"../dao/usersDAO\"\n\nconst hashPassword = async password => await bcrypt.hash(password, 10)\n\nexport class User {\n  constructor({ name, email, password, preferences = {} } = {}) {\n    this.name = name\n    this.email = email\n    this.password = password\n    this.preferences = preferences\n  }\n  toJson() {\n    return { name: this.name, email: this.email, preferences: this.preferences }\n  }\n  async comparePassword(plainText) {\n    return await bcrypt.compare(plainText, this.password)\n  }\n  encoded() {\n    return jwt.sign(\n      {\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4,\n        ...this.toJson(),\n      },\n      process.env.SECRET_KEY,\n    )\n  }\n  static async decoded(userJwt) {\n    return jwt.verify(userJwt, process.env.SECRET_KEY, (error, res) => {\n      if (error) {\n        return { error }\n      }\n      return new User(res)\n    })\n  }\n}\n\nexport default class UserController {\n  static async register(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n\n      res.json({\n        auth_token: user.encoded(),\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async login(req, res, next) {\n    try {\n      const { email, password } = req.body\n      if (!email || typeof email !== \"string\") {\n        res.status(400).json({ error: \"Bad email format, expected string.\" })\n        return\n      }\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      let userData = await UsersDAO.getUser(email)\n      if (!userData) {\n        res.status(401).json({ error: \"Make sure your email is correct.\" })\n        return\n      }\n      const user = new User(userData)\n\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n\n      const loginResponse = await UsersDAO.loginUser(user.email, user.encoded())\n      if (!loginResponse.success) {\n        res.status(500).json({ error: loginResponse.error })\n        return\n      }\n      res.json({ auth_token: user.encoded(), info: user.toJson() })\n    } catch (e) {\n      res.status(400).json({ error: e })\n      return\n    }\n  }\n\n  static async logout(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userObj = await User.decoded(userJwt)\n      var { error } = userObj\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const logoutResult = await UsersDAO.logoutUser(userObj.email)\n      var { error } = logoutResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(logoutResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async delete(req, res) {\n    try {\n      let { password } = req.body\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userClaim = await User.decoded(userJwt)\n      var { error } = userClaim\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const user = new User(await UsersDAO.getUser(userClaim.email))\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n      const deleteResult = await UsersDAO.deleteUser(userClaim.email)\n      var { error } = deleteResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(deleteResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async save(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userFromHeader = await User.decoded(userJwt)\n      var { error } = userFromHeader\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      await UsersDAO.updatePreferences(\n        userFromHeader.email,\n        req.body.preferences,\n      )\n      const userFromDB = await UsersDAO.getUser(userFromHeader.email)\n      const updatedUser = new User(userFromDB)\n\n      res.json({\n        auth_token: updatedUser.encoded(),\n        info: updatedUser.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  // for internal use only\n  static async createAdminUser(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const makeAdminResponse = await UsersDAO.makeAdmin(userFromBody.email)\n\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n      const jwt = user.encoded()\n      const loginResponse = await UsersDAO.loginUser(user.email, jwt)\n\n      res.json({\n        auth_token: jwt,\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\\\\src\\\\api\\\\users.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = require(\"express\");\nvar _users = _interopRequireDefault(require(\"./users.controller\"));\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\nvar router = new _express.Router();\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(_users[\"default\"].register);\nrouter.route(\"/login\").post(_users[\"default\"].login);\nrouter.route(\"/logout\").post(_users[\"default\"].logout);\nrouter.route(\"/delete\")[\"delete\"](_users[\"default\"][\"delete\"]);\nrouter.route(\"/update-preferences\").put(_users[\"default\"].save);\nrouter.route(\"/comment-report\").get(_comments[\"default\"].apiCommentReport);\nrouter.route(\"/make-admin\").post(_users[\"default\"].createAdminUser);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJ1c2Vyc0N0cmwiLCJyZWdpc3RlciIsImxvZ2luIiwibG9nb3V0IiwicHV0Iiwic2F2ZSIsImdldCIsImNvbW1lbnRzQ3RybCIsImFwaUNvbW1lbnRSZXBvcnQiLCJjcmVhdGVBZG1pblVzZXIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4X2pzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJ1c2Vycy5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiXG5pbXBvcnQgdXNlcnNDdHJsIGZyb20gXCIuL3VzZXJzLmNvbnRyb2xsZXJcIlxuaW1wb3J0IGNvbW1lbnRzQ3RybCBmcm9tIFwiLi9jb21tZW50cy5jb250cm9sbGVyXCJcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbi8vIGFzc29jaWF0ZSBwdXQsIGRlbGV0ZSwgYW5kIGdldChpZClcbnJvdXRlci5yb3V0ZShcIi9yZWdpc3RlclwiKS5wb3N0KHVzZXJzQ3RybC5yZWdpc3RlcilcbnJvdXRlci5yb3V0ZShcIi9sb2dpblwiKS5wb3N0KHVzZXJzQ3RybC5sb2dpbilcbnJvdXRlci5yb3V0ZShcIi9sb2dvdXRcIikucG9zdCh1c2Vyc0N0cmwubG9nb3V0KVxucm91dGVyLnJvdXRlKFwiL2RlbGV0ZVwiKS5kZWxldGUodXNlcnNDdHJsLmRlbGV0ZSlcbnJvdXRlci5yb3V0ZShcIi91cGRhdGUtcHJlZmVyZW5jZXNcIikucHV0KHVzZXJzQ3RybC5zYXZlKVxucm91dGVyLnJvdXRlKFwiL2NvbW1lbnQtcmVwb3J0XCIpLmdldChjb21tZW50c0N0cmwuYXBpQ29tbWVudFJlcG9ydClcbnJvdXRlci5yb3V0ZShcIi9tYWtlLWFkbWluXCIpLnBvc3QodXNlcnNDdHJsLmNyZWF0ZUFkbWluVXNlcilcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQSxJQUFNQSxNQUFNLEdBQUcsSUFBSUMsZUFBTSxFQUFFOztBQUUzQjtBQUNBRCxNQUFNLENBQUNFLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQ0MsSUFBSSxDQUFDQyxpQkFBUyxDQUFDQyxRQUFRLENBQUM7QUFDbERMLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUNDLGlCQUFTLENBQUNFLEtBQUssQ0FBQztBQUM1Q04sTUFBTSxDQUFDRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUNDLElBQUksQ0FBQ0MsaUJBQVMsQ0FBQ0csTUFBTSxDQUFDO0FBQzlDUCxNQUFNLENBQUNFLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBTyxDQUFDRSxpQkFBUyxVQUFPLENBQUM7QUFDaERKLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUNNLEdBQUcsQ0FBQ0osaUJBQVMsQ0FBQ0ssSUFBSSxDQUFDO0FBQ3ZEVCxNQUFNLENBQUNFLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDUSxHQUFHLENBQUNDLG9CQUFZLENBQUNDLGdCQUFnQixDQUFDO0FBQ2xFWixNQUFNLENBQUNFLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQ0MsSUFBSSxDQUFDQyxpQkFBUyxDQUFDUyxlQUFlLENBQUM7QUFBQSxlQUU1Q2IsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["router","Router","route","post","usersCtrl","register","login","logout","put","save","get","commentsCtrl","apiCommentReport","createAdminUser"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix_js\\src\\api\\","sources":["users.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport usersCtrl from \"./users.controller\"\nimport commentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(usersCtrl.register)\nrouter.route(\"/login\").post(usersCtrl.login)\nrouter.route(\"/logout\").post(usersCtrl.logout)\nrouter.route(\"/delete\").delete(usersCtrl.delete)\nrouter.route(\"/update-preferences\").put(usersCtrl.save)\nrouter.route(\"/comment-report\").get(commentsCtrl.apiCommentReport)\nrouter.route(\"/make-admin\").post(usersCtrl.createAdminUser)\n\nexport default router\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAM,EAAE;;AAE3B;AACAD,MAAM,CAACE,KAAK,CAAC,WAAW,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACC,QAAQ,CAAC;AAClDL,MAAM,CAACE,KAAK,CAAC,QAAQ,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACE,KAAK,CAAC;AAC5CN,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACG,MAAM,CAAC;AAC9CP,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,UAAO,CAACE,iBAAS,UAAO,CAAC;AAChDJ,MAAM,CAACE,KAAK,CAAC,qBAAqB,CAAC,CAACM,GAAG,CAACJ,iBAAS,CAACK,IAAI,CAAC;AACvDT,MAAM,CAACE,KAAK,CAAC,iBAAiB,CAAC,CAACQ,GAAG,CAACC,oBAAY,CAACC,gBAAgB,CAAC;AAClEZ,MAAM,CAACE,KAAK,CAAC,aAAa,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACS,eAAe,CAAC;AAAA,eAE5Cb,MAAM;AAAA"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _server = _interopRequireDefault(require(\"./server\"));\nvar _mongodb = require(\"mongodb\");\nvar _moviesDAO = _interopRequireDefault(require(\"../src/dao/moviesDAO\"));\nvar _usersDAO = _interopRequireDefault(require(\"./dao/usersDAO\"));\nvar _commentsDAO = _interopRequireDefault(require(\"./dao/commentsDAO\"));\nvar port = process.env.PORT || 8000;\n\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\n_mongodb.MongoClient.connect(process.env.MFLIX_DB_URI,\n// TODO: Connection Pooling\n// Set the poolSize to 50 connections.\n// TODO: Timeouts\n// Set the write timeout limit to 2500 milliseconds.\n{\n  useNewUrlParser: true\n})[\"catch\"](function (err) {\n  console.error(err.stack);\n  process.exit(1);\n}).then( /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(client) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _moviesDAO[\"default\"].injectDB(client);\n          case 2:\n            _context.next = 4;\n            return _usersDAO[\"default\"].injectDB(client);\n          case 4:\n            _context.next = 6;\n            return _commentsDAO[\"default\"].injectDB(client);\n          case 6:\n            _server[\"default\"].listen(port, function () {\n              console.log(\"listening on port \".concat(port));\n            });\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJNb25nb0NsaWVudCIsImNvbm5lY3QiLCJNRkxJWF9EQl9VUkkiLCJ1c2VOZXdVcmxQYXJzZXIiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsImV4aXQiLCJ0aGVuIiwiY2xpZW50IiwiTW92aWVzREFPIiwiaW5qZWN0REIiLCJVc2Vyc0RBTyIsIkNvbW1lbnRzREFPIiwiYXBwIiwibGlzdGVuIiwibG9nIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeC0tanNcXHNyY1xcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBwIGZyb20gXCIuL3NlcnZlclwiXG5pbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gXCJtb25nb2RiXCJcbmltcG9ydCBNb3ZpZXNEQU8gZnJvbSBcIi4uL3NyYy9kYW8vbW92aWVzREFPXCJcbmltcG9ydCBVc2Vyc0RBTyBmcm9tIFwiLi9kYW8vdXNlcnNEQU9cIlxuaW1wb3J0IENvbW1lbnRzREFPIGZyb20gXCIuL2Rhby9jb21tZW50c0RBT1wiXG5cbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwMDBcblxuLyoqXG5UaWNrZXQ6IENvbm5lY3Rpb24gUG9vbGluZ1xuXG5QbGVhc2UgY2hhbmdlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBNb25nb0NsaWVudCBvYmplY3QgYnkgc2V0dGluZyB0aGVcbm1heGltdW0gY29ubmVjdGlvbiBwb29sIHNpemUgdG8gNTAgYWN0aXZlIGNvbm5lY3Rpb25zLlxuKi9cblxuLyoqXG5UaWNrZXQ6IFRpbWVvdXRzXG5cblBsZWFzZSBwcmV2ZW50IHRoZSBwcm9ncmFtIGZyb20gd2FpdGluZyBpbmRlZmluaXRlbHkgYnkgc2V0dGluZyB0aGUgd3JpdGVcbmNvbmNlcm4gdGltZW91dCBsaW1pdCB0byAyNTAwIG1pbGxpc2Vjb25kcy5cbiovXG5cbk1vbmdvQ2xpZW50LmNvbm5lY3QoXG4gIHByb2Nlc3MuZW52Lk1GTElYX0RCX1VSSSxcbiAgLy8gVE9ETzogQ29ubmVjdGlvbiBQb29saW5nXG4gIC8vIFNldCB0aGUgcG9vbFNpemUgdG8gNTAgY29ubmVjdGlvbnMuXG4gIC8vIFRPRE86IFRpbWVvdXRzXG4gIC8vIFNldCB0aGUgd3JpdGUgdGltZW91dCBsaW1pdCB0byAyNTAwIG1pbGxpc2Vjb25kcy5cbiAgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUgfSxcbilcbiAgLmNhdGNoKGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIuc3RhY2spXG4gICAgcHJvY2Vzcy5leGl0KDEpXG4gIH0pXG4gIC50aGVuKGFzeW5jIGNsaWVudCA9PiB7XG4gICAgYXdhaXQgTW92aWVzREFPLmluamVjdERCKGNsaWVudClcbiAgICBhd2FpdCBVc2Vyc0RBTy5pbmplY3REQihjbGllbnQpXG4gICAgYXdhaXQgQ29tbWVudHNEQU8uaW5qZWN0REIoY2xpZW50KVxuICAgIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYGxpc3RlbmluZyBvbiBwb3J0ICR7cG9ydH1gKVxuICAgIH0pXG4gIH0pXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksSUFBSSxJQUFJOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBQyxvQkFBVyxDQUFDQyxPQUFPLENBQ2pCSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQUVDLGVBQWUsRUFBRTtBQUFLLENBQUMsQ0FDMUIsU0FDTyxDQUFDLFVBQUFDLEdBQUcsRUFBSTtFQUNaQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsR0FBRyxDQUFDRyxLQUFLLENBQUM7RUFDeEJWLE9BQU8sQ0FBQ1csSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNqQixDQUFDLENBQUMsQ0FDREMsSUFBSTtFQUFBLHlGQUFDLGlCQUFNQyxNQUFNO0lBQUE7TUFBQTtRQUFBO1VBQUE7WUFBQTtZQUFBLE9BQ1ZDLHFCQUFTLENBQUNDLFFBQVEsQ0FBQ0YsTUFBTSxDQUFDO1VBQUE7WUFBQTtZQUFBLE9BQzFCRyxvQkFBUSxDQUFDRCxRQUFRLENBQUNGLE1BQU0sQ0FBQztVQUFBO1lBQUE7WUFBQSxPQUN6QkksdUJBQVcsQ0FBQ0YsUUFBUSxDQUFDRixNQUFNLENBQUM7VUFBQTtZQUNsQ0ssa0JBQUcsQ0FBQ0MsTUFBTSxDQUFDcEIsSUFBSSxFQUFFLFlBQU07Y0FDckJTLE9BQU8sQ0FBQ1ksR0FBRyw2QkFBc0JyQixJQUFJLEVBQUc7WUFDMUMsQ0FBQyxDQUFDO1VBQUE7VUFBQTtZQUFBO1FBQUE7TUFBQTtJQUFBO0VBQUEsQ0FDSDtFQUFBO0lBQUE7RUFBQTtBQUFBLElBQUMifQ==","map":{"version":3,"names":["port","process","env","PORT","MongoClient","connect","MFLIX_DB_URI","useNewUrlParser","err","console","error","stack","exit","then","client","MoviesDAO","injectDB","UsersDAO","CommentsDAO","app","listen","log"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\","sources":["index.js"],"sourcesContent":["import app from \"./server\"\nimport { MongoClient } from \"mongodb\"\nimport MoviesDAO from \"../src/dao/moviesDAO\"\nimport UsersDAO from \"./dao/usersDAO\"\nimport CommentsDAO from \"./dao/commentsDAO\"\n\nconst port = process.env.PORT || 8000\n\n/**\nTicket: Connection Pooling\n\nPlease change the configuration of the MongoClient object by setting the\nmaximum connection pool size to 50 active connections.\n*/\n\n/**\nTicket: Timeouts\n\nPlease prevent the program from waiting indefinitely by setting the write\nconcern timeout limit to 2500 milliseconds.\n*/\n\nMongoClient.connect(\n  process.env.MFLIX_DB_URI,\n  // TODO: Connection Pooling\n  // Set the poolSize to 50 connections.\n  // TODO: Timeouts\n  // Set the write timeout limit to 2500 milliseconds.\n  { useNewUrlParser: true },\n)\n  .catch(err => {\n    console.error(err.stack)\n    process.exit(1)\n  })\n  .then(async client => {\n    await MoviesDAO.injectDB(client)\n    await UsersDAO.injectDB(client)\n    await CommentsDAO.injectDB(client)\n    app.listen(port, () => {\n      console.log(`listening on port ${port}`)\n    })\n  })\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AAEA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;;AAErC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAC,oBAAW,CAACC,OAAO,CACjBJ,OAAO,CAACC,GAAG,CAACI,YAAY;AACxB;AACA;AACA;AACA;AACA;EAAEC,eAAe,EAAE;AAAK,CAAC,CAC1B,SACO,CAAC,UAAAC,GAAG,EAAI;EACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,KAAK,CAAC;EACxBV,OAAO,CAACW,IAAI,CAAC,CAAC,CAAC;AACjB,CAAC,CAAC,CACDC,IAAI;EAAA,yFAAC,iBAAMC,MAAM;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACVC,qBAAS,CAACC,QAAQ,CAACF,MAAM,CAAC;UAAA;YAAA;YAAA,OAC1BG,oBAAQ,CAACD,QAAQ,CAACF,MAAM,CAAC;UAAA;YAAA;YAAA,OACzBI,uBAAW,CAACF,QAAQ,CAACF,MAAM,CAAC;UAAA;YAClCK,kBAAG,CAACC,MAAM,CAACpB,IAAI,EAAE,YAAM;cACrBS,OAAO,CAACY,GAAG,6BAAsBrB,IAAI,EAAG;YAC1C,CAAC,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACH;EAAA;IAAA;EAAA;AAAA,IAAC"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _movies = _interopRequireDefault(require(\"../src/api/movies.route\"));\nvar _users = _interopRequireDefault(require(\"../src/api/users.route\"));\nvar app = (0, _express[\"default\"])();\napp.use((0, _cors[\"default\"])());\nprocess.env.NODE_ENV !== \"prod\" && app.use((0, _morgan[\"default\"])(\"dev\"));\napp.use(_bodyParser[\"default\"].json());\napp.use(_bodyParser[\"default\"].urlencoded({\n  extended: true\n}));\n\n// Register api routes\napp.use(\"/api/v1/movies\", _movies[\"default\"]);\napp.use(\"/api/v1/user\", _users[\"default\"]);\napp.use(\"/status\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"/\", _express[\"default\"][\"static\"](\"build\"));\napp.use(\"*\", function (req, res) {\n  return res.status(404).json({\n    error: \"not found\"\n  });\n});\nvar _default = app;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwidXNlIiwiY29ycyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIm1vcmdhbiIsImJvZHlQYXJzZXIiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwibW92aWVzIiwidXNlcnMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXgtLWpzXFxzcmNcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCJcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiXG5pbXBvcnQgY29ycyBmcm9tIFwiY29yc1wiXG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIlxuaW1wb3J0IG1vdmllcyBmcm9tIFwiLi4vc3JjL2FwaS9tb3ZpZXMucm91dGVcIlxuaW1wb3J0IHVzZXJzIGZyb20gXCIuLi9zcmMvYXBpL3VzZXJzLnJvdXRlXCJcblxuY29uc3QgYXBwID0gZXhwcmVzcygpXG5cbmFwcC51c2UoY29ycygpKVxucHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZFwiICYmIGFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKVxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSlcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpXG5cbi8vIFJlZ2lzdGVyIGFwaSByb3V0ZXNcbmFwcC51c2UoXCIvYXBpL3YxL21vdmllc1wiLCBtb3ZpZXMpXG5hcHAudXNlKFwiL2FwaS92MS91c2VyXCIsIHVzZXJzKVxuYXBwLnVzZShcIi9zdGF0dXNcIiwgZXhwcmVzcy5zdGF0aWMoXCJidWlsZFwiKSlcbmFwcC51c2UoXCIvXCIsIGV4cHJlc3Muc3RhdGljKFwiYnVpbGRcIikpXG5hcHAudXNlKFwiKlwiLCAocmVxLCByZXMpID0+IHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwibm90IGZvdW5kXCIgfSkpXG5cbmV4cG9ydCBkZWZhdWx0IGFwcFxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsR0FBRyxHQUFHLElBQUFDLG1CQUFPLEdBQUU7QUFFckJELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFDLGdCQUFJLEdBQUUsQ0FBQztBQUNmQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLE1BQU0sSUFBSU4sR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUssa0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQztBQUN6RFAsR0FBRyxDQUFDRSxHQUFHLENBQUNNLHNCQUFVLENBQUNDLElBQUksRUFBRSxDQUFDO0FBQzFCVCxHQUFHLENBQUNFLEdBQUcsQ0FBQ00sc0JBQVUsQ0FBQ0UsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDOztBQUVsRDtBQUNBWCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRVUsa0JBQU0sQ0FBQztBQUNqQ1osR0FBRyxDQUFDRSxHQUFHLENBQUMsY0FBYyxFQUFFVyxpQkFBSyxDQUFDO0FBQzlCYixHQUFHLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUVELG1CQUFPLFVBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMzQ0QsR0FBRyxDQUFDRSxHQUFHLENBQUMsR0FBRyxFQUFFRCxtQkFBTyxVQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDckNELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFDWSxHQUFHLEVBQUVDLEdBQUc7RUFBQSxPQUFLQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ1AsSUFBSSxDQUFDO0lBQUVRLEtBQUssRUFBRTtFQUFZLENBQUMsQ0FBQztBQUFBLEVBQUM7QUFBQSxlQUV6RGpCLEdBQUc7QUFBQSJ9","map":{"version":3,"names":["app","express","use","cors","process","env","NODE_ENV","morgan","bodyParser","json","urlencoded","extended","movies","users","req","res","status","error"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\","sources":["server.js"],"sourcesContent":["import express from \"express\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport morgan from \"morgan\"\nimport movies from \"../src/api/movies.route\"\nimport users from \"../src/api/users.route\"\n\nconst app = express()\n\napp.use(cors())\nprocess.env.NODE_ENV !== \"prod\" && app.use(morgan(\"dev\"))\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n\n// Register api routes\napp.use(\"/api/v1/movies\", movies)\napp.use(\"/api/v1/user\", users)\napp.use(\"/status\", express.static(\"build\"))\napp.use(\"/\", express.static(\"build\"))\napp.use(\"*\", (req, res) => res.status(404).json({ error: \"not found\" }))\n\nexport default app\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAO,GAAE;AAErBD,GAAG,CAACE,GAAG,CAAC,IAAAC,gBAAI,GAAE,CAAC;AACfC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,MAAM,IAAIN,GAAG,CAACE,GAAG,CAAC,IAAAK,kBAAM,EAAC,KAAK,CAAC,CAAC;AACzDP,GAAG,CAACE,GAAG,CAACM,sBAAU,CAACC,IAAI,EAAE,CAAC;AAC1BT,GAAG,CAACE,GAAG,CAACM,sBAAU,CAACE,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;;AAElD;AACAX,GAAG,CAACE,GAAG,CAAC,gBAAgB,EAAEU,kBAAM,CAAC;AACjCZ,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEW,iBAAK,CAAC;AAC9Bb,GAAG,CAACE,GAAG,CAAC,SAAS,EAAED,mBAAO,UAAO,CAAC,OAAO,CAAC,CAAC;AAC3CD,GAAG,CAACE,GAAG,CAAC,GAAG,EAAED,mBAAO,UAAO,CAAC,OAAO,CAAC,CAAC;AACrCD,GAAG,CAACE,GAAG,CAAC,GAAG,EAAE,UAACY,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;IAAEQ,KAAK,EAAE;EAAY,CAAC,CAAC;AAAA,EAAC;AAAA,eAEzDjB,GAAG;AAAA"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\movies.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = require(\"express\");\nvar _movies = _interopRequireDefault(require(\"./movies.controller\"));\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\nvar router = new _express.Router();\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(_movies[\"default\"].apiGetMovies);\nrouter.route(\"/search\").get(_movies[\"default\"].apiSearchMovies);\nrouter.route(\"/countries\").get(_movies[\"default\"].apiGetMoviesByCountry);\nrouter.route(\"/facet-search\").get(_movies[\"default\"].apiFacetedSearch);\nrouter.route(\"/id/:id\").get(_movies[\"default\"].apiGetMovieById);\nrouter.route(\"/config-options\").get(_movies[\"default\"].getConfig);\nrouter.route(\"/comment\").post(_comments[\"default\"].apiPostComment).put(_comments[\"default\"].apiUpdateComment)[\"delete\"](_comments[\"default\"].apiDeleteComment);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsImdldCIsIk1vdmllc0N0cmwiLCJhcGlHZXRNb3ZpZXMiLCJhcGlTZWFyY2hNb3ZpZXMiLCJhcGlHZXRNb3ZpZXNCeUNvdW50cnkiLCJhcGlGYWNldGVkU2VhcmNoIiwiYXBpR2V0TW92aWVCeUlkIiwiZ2V0Q29uZmlnIiwicG9zdCIsIkNvbW1lbnRzQ3RybCIsImFwaVBvc3RDb21tZW50IiwicHV0IiwiYXBpVXBkYXRlQ29tbWVudCIsImFwaURlbGV0ZUNvbW1lbnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4LS1qc1xcc3JjXFxhcGlcXCIsInNvdXJjZXMiOlsibW92aWVzLnJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCJcbmltcG9ydCBNb3ZpZXNDdHJsIGZyb20gXCIuL21vdmllcy5jb250cm9sbGVyXCJcbmltcG9ydCBDb21tZW50c0N0cmwgZnJvbSBcIi4vY29tbWVudHMuY29udHJvbGxlclwiXG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG4vLyBhc3NvY2lhdGUgcHV0LCBkZWxldGUsIGFuZCBnZXQoaWQpXG5yb3V0ZXIucm91dGUoXCIvXCIpLmdldChNb3ZpZXNDdHJsLmFwaUdldE1vdmllcylcbnJvdXRlci5yb3V0ZShcIi9zZWFyY2hcIikuZ2V0KE1vdmllc0N0cmwuYXBpU2VhcmNoTW92aWVzKVxucm91dGVyLnJvdXRlKFwiL2NvdW50cmllc1wiKS5nZXQoTW92aWVzQ3RybC5hcGlHZXRNb3ZpZXNCeUNvdW50cnkpXG5yb3V0ZXIucm91dGUoXCIvZmFjZXQtc2VhcmNoXCIpLmdldChNb3ZpZXNDdHJsLmFwaUZhY2V0ZWRTZWFyY2gpXG5yb3V0ZXIucm91dGUoXCIvaWQvOmlkXCIpLmdldChNb3ZpZXNDdHJsLmFwaUdldE1vdmllQnlJZClcbnJvdXRlci5yb3V0ZShcIi9jb25maWctb3B0aW9uc1wiKS5nZXQoTW92aWVzQ3RybC5nZXRDb25maWcpXG5cbnJvdXRlclxuICAucm91dGUoXCIvY29tbWVudFwiKVxuICAucG9zdChDb21tZW50c0N0cmwuYXBpUG9zdENvbW1lbnQpXG4gIC5wdXQoQ29tbWVudHNDdHJsLmFwaVVwZGF0ZUNvbW1lbnQpXG4gIC5kZWxldGUoQ29tbWVudHNDdHJsLmFwaURlbGV0ZUNvbW1lbnQpXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUEsSUFBTUEsTUFBTSxHQUFHLElBQUlDLGVBQU0sRUFBRTs7QUFFM0I7QUFDQUQsTUFBTSxDQUFDRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQVUsQ0FBQ0MsWUFBWSxDQUFDO0FBQzlDTCxNQUFNLENBQUNFLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxrQkFBVSxDQUFDRSxlQUFlLENBQUM7QUFDdkROLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDQyxHQUFHLENBQUNDLGtCQUFVLENBQUNHLHFCQUFxQixDQUFDO0FBQ2hFUCxNQUFNLENBQUNFLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxrQkFBVSxDQUFDSSxnQkFBZ0IsQ0FBQztBQUM5RFIsTUFBTSxDQUFDRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQVUsQ0FBQ0ssZUFBZSxDQUFDO0FBQ3ZEVCxNQUFNLENBQUNFLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDQyxHQUFHLENBQUNDLGtCQUFVLENBQUNNLFNBQVMsQ0FBQztBQUV6RFYsTUFBTSxDQUNIRSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQ2pCUyxJQUFJLENBQUNDLG9CQUFZLENBQUNDLGNBQWMsQ0FBQyxDQUNqQ0MsR0FBRyxDQUFDRixvQkFBWSxDQUFDRyxnQkFBZ0IsQ0FBQyxVQUM1QixDQUFDSCxvQkFBWSxDQUFDSSxnQkFBZ0IsQ0FBQztBQUFBLGVBRXpCaEIsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["router","Router","route","get","MoviesCtrl","apiGetMovies","apiSearchMovies","apiGetMoviesByCountry","apiFacetedSearch","apiGetMovieById","getConfig","post","CommentsCtrl","apiPostComment","put","apiUpdateComment","apiDeleteComment"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\api\\","sources":["movies.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport MoviesCtrl from \"./movies.controller\"\nimport CommentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/\").get(MoviesCtrl.apiGetMovies)\nrouter.route(\"/search\").get(MoviesCtrl.apiSearchMovies)\nrouter.route(\"/countries\").get(MoviesCtrl.apiGetMoviesByCountry)\nrouter.route(\"/facet-search\").get(MoviesCtrl.apiFacetedSearch)\nrouter.route(\"/id/:id\").get(MoviesCtrl.apiGetMovieById)\nrouter.route(\"/config-options\").get(MoviesCtrl.getConfig)\n\nrouter\n  .route(\"/comment\")\n  .post(CommentsCtrl.apiPostComment)\n  .put(CommentsCtrl.apiUpdateComment)\n  .delete(CommentsCtrl.apiDeleteComment)\n\nexport default router\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAM,EAAE;;AAE3B;AACAD,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACC,YAAY,CAAC;AAC9CL,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACE,eAAe,CAAC;AACvDN,MAAM,CAACE,KAAK,CAAC,YAAY,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACG,qBAAqB,CAAC;AAChEP,MAAM,CAACE,KAAK,CAAC,eAAe,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACI,gBAAgB,CAAC;AAC9DR,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACK,eAAe,CAAC;AACvDT,MAAM,CAACE,KAAK,CAAC,iBAAiB,CAAC,CAACC,GAAG,CAACC,kBAAU,CAACM,SAAS,CAAC;AAEzDV,MAAM,CACHE,KAAK,CAAC,UAAU,CAAC,CACjBS,IAAI,CAACC,oBAAY,CAACC,cAAc,CAAC,CACjCC,GAAG,CAACF,oBAAY,CAACG,gBAAgB,CAAC,UAC5B,CAACH,oBAAY,CAACI,gBAAgB,CAAC;AAAA,eAEzBhB,MAAM;AAAA"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\movies.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar MoviesController = /*#__PURE__*/function () {\n  function MoviesController() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesController);\n  }\n  (0, _createClass2[\"default\"])(MoviesController, null, [{\n    key: \"apiGetMovies\",\n    value: function () {\n      var _apiGetMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var MOVIES_PER_PAGE, _yield$MoviesDAO$getM, moviesList, totalNumMovies, response;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                _context.next = 3;\n                return _moviesDAO[\"default\"].getMovies();\n              case 3:\n                _yield$MoviesDAO$getM = _context.sent;\n                moviesList = _yield$MoviesDAO$getM.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: 0,\n                  filters: {},\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      function apiGetMovies(_x, _x2, _x3) {\n        return _apiGetMovies.apply(this, arguments);\n      }\n      return apiGetMovies;\n    }()\n  }, {\n    key: \"apiGetMoviesByCountry\",\n    value: function () {\n      var _apiGetMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var countries, countryList, moviesList, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                countries = req.query.countries == \"\" ? \"USA\" : req.query.countries;\n                countryList = Array.isArray(countries) ? countries : Array(countries);\n                _context2.next = 4;\n                return _moviesDAO[\"default\"].getMoviesByCountry(countryList);\n              case 4:\n                moviesList = _context2.sent;\n                response = {\n                  titles: moviesList\n                };\n                res.json(response);\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function apiGetMoviesByCountry(_x4, _x5, _x6) {\n        return _apiGetMoviesByCountry.apply(this, arguments);\n      }\n      return apiGetMoviesByCountry;\n    }()\n  }, {\n    key: \"apiGetMovieById\",\n    value: function () {\n      var _apiGetMovieById = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var id, movie, updated_type;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                id = req.params.id || {};\n                _context3.next = 4;\n                return _moviesDAO[\"default\"].getMovieByID(id);\n              case 4:\n                movie = _context3.sent;\n                if (movie) {\n                  _context3.next = 8;\n                  break;\n                }\n                res.status(404).json({\n                  error: \"Not found\"\n                });\n                return _context3.abrupt(\"return\");\n              case 8:\n                updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\";\n                res.json({\n                  movie: movie,\n                  updated_type: updated_type\n                });\n                _context3.next = 16;\n                break;\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"api, \".concat(_context3.t0));\n                res.status(500).json({\n                  error: _context3.t0\n                });\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 12]]);\n      }));\n      function apiGetMovieById(_x7, _x8, _x9) {\n        return _apiGetMovieById.apply(this, arguments);\n      }\n      return apiGetMovieById;\n    }()\n  }, {\n    key: \"apiSearchMovies\",\n    value: function () {\n      var _apiSearchMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var MOVIES_PER_PAGE, page, searchType, filters, _yield$MoviesDAO$getM2, moviesList, totalNumMovies, response;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page:, \".concat(e));\n                  page = 0;\n                }\n                try {\n                  searchType = Object.keys(req.query)[0];\n                } catch (e) {\n                  console.error(\"No search keys specified: \".concat(e));\n                }\n                filters = {};\n                _context4.t0 = searchType;\n                _context4.next = _context4.t0 === \"genre\" ? 7 : _context4.t0 === \"cast\" ? 9 : _context4.t0 === \"text\" ? 11 : 13;\n                break;\n              case 7:\n                if (req.query.genre !== \"\") {\n                  filters.genre = req.query.genre;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 9:\n                if (req.query.cast !== \"\") {\n                  filters.cast = req.query.cast;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 11:\n                if (req.query.text !== \"\") {\n                  filters.text = req.query.text;\n                }\n                return _context4.abrupt(\"break\", 13);\n              case 13:\n                _context4.next = 15;\n                return _moviesDAO[\"default\"].getMovies({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n              case 15:\n                _yield$MoviesDAO$getM2 = _context4.sent;\n                moviesList = _yield$MoviesDAO$getM2.moviesList;\n                totalNumMovies = _yield$MoviesDAO$getM2.totalNumMovies;\n                response = {\n                  movies: moviesList,\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: totalNumMovies\n                };\n                res.json(response);\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      function apiSearchMovies(_x10, _x11, _x12) {\n        return _apiSearchMovies.apply(this, arguments);\n      }\n      return apiSearchMovies;\n    }()\n  }, {\n    key: \"apiFacetedSearch\",\n    value: function () {\n      var _apiFacetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var MOVIES_PER_PAGE, page, filters, facetedSearchResult, response;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                MOVIES_PER_PAGE = 20;\n                try {\n                  page = req.query.page ? parseInt(req.query.page, 10) : 0;\n                } catch (e) {\n                  console.error(\"Got bad value for page, defaulting to 0: \".concat(e));\n                  page = 0;\n                }\n                filters = {};\n                filters = req.query.cast !== \"\" ? {\n                  cast: new RegExp(req.query.cast, \"i\")\n                } : {\n                  cast: \"Tom Hanks\"\n                };\n                _context5.next = 6;\n                return _moviesDAO[\"default\"].facetedSearch({\n                  filters: filters,\n                  page: page,\n                  MOVIES_PER_PAGE: MOVIES_PER_PAGE\n                });\n              case 6:\n                facetedSearchResult = _context5.sent;\n                response = {\n                  movies: facetedSearchResult.movies,\n                  facets: {\n                    runtime: facetedSearchResult.runtime,\n                    rating: facetedSearchResult.rating\n                  },\n                  page: page,\n                  filters: filters,\n                  entries_per_page: MOVIES_PER_PAGE,\n                  total_results: facetedSearchResult.count\n                };\n                res.json(response);\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      function apiFacetedSearch(_x13, _x14, _x15) {\n        return _apiFacetedSearch.apply(this, arguments);\n      }\n      return apiFacetedSearch;\n    }()\n  }, {\n    key: \"getConfig\",\n    value: function () {\n      var _getConfig = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res, next) {\n        var _yield$MoviesDAO$getC, poolSize, wtimeout, authInfo, response;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _moviesDAO[\"default\"].getConfiguration();\n              case 2:\n                _yield$MoviesDAO$getC = _context6.sent;\n                poolSize = _yield$MoviesDAO$getC.poolSize;\n                wtimeout = _yield$MoviesDAO$getC.wtimeout;\n                authInfo = _yield$MoviesDAO$getC.authInfo;\n                try {\n                  response = _objectSpread({\n                    pool_size: poolSize,\n                    wtimeout: wtimeout\n                  }, authInfo);\n                  res.json(response);\n                } catch (e) {\n                  res.status(500).json({\n                    error: e\n                  });\n                }\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n      function getConfig(_x16, _x17, _x18) {\n        return _getConfig.apply(this, arguments);\n      }\n      return getConfig;\n    }()\n  }]);\n  return MoviesController;\n}();\nexports[\"default\"] = MoviesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb3ZpZXNDb250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIk1PVklFU19QRVJfUEFHRSIsIk1vdmllc0RBTyIsImdldE1vdmllcyIsIm1vdmllc0xpc3QiLCJ0b3RhbE51bU1vdmllcyIsInJlc3BvbnNlIiwibW92aWVzIiwicGFnZSIsImZpbHRlcnMiLCJlbnRyaWVzX3Blcl9wYWdlIiwidG90YWxfcmVzdWx0cyIsImpzb24iLCJjb3VudHJpZXMiLCJxdWVyeSIsImNvdW50cnlMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0TW92aWVzQnlDb3VudHJ5IiwidGl0bGVzIiwiaWQiLCJwYXJhbXMiLCJnZXRNb3ZpZUJ5SUQiLCJtb3ZpZSIsInN0YXR1cyIsImVycm9yIiwidXBkYXRlZF90eXBlIiwibGFzdHVwZGF0ZWQiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwiZSIsInNlYXJjaFR5cGUiLCJPYmplY3QiLCJrZXlzIiwiZ2VucmUiLCJjYXN0IiwidGV4dCIsIlJlZ0V4cCIsImZhY2V0ZWRTZWFyY2giLCJmYWNldGVkU2VhcmNoUmVzdWx0IiwiZmFjZXRzIiwicnVudGltZSIsInJhdGluZyIsImNvdW50IiwiZ2V0Q29uZmlndXJhdGlvbiIsInBvb2xTaXplIiwid3RpbWVvdXQiLCJhdXRoSW5mbyIsInBvb2xfc2l6ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXgtLWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJtb3ZpZXMuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTW92aWVzREFPIGZyb20gXCIuLi9kYW8vbW92aWVzREFPXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW92aWVzQ29udHJvbGxlciB7XG4gIHN0YXRpYyBhc3luYyBhcGlHZXRNb3ZpZXMocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBNT1ZJRVNfUEVSX1BBR0UgPSAyMFxuICAgIGNvbnN0IHsgbW92aWVzTGlzdCwgdG90YWxOdW1Nb3ZpZXMgfSA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZXMoKVxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIG1vdmllczogbW92aWVzTGlzdCxcbiAgICAgIHBhZ2U6IDAsXG4gICAgICBmaWx0ZXJzOiB7fSxcbiAgICAgIGVudHJpZXNfcGVyX3BhZ2U6IE1PVklFU19QRVJfUEFHRSxcbiAgICAgIHRvdGFsX3Jlc3VsdHM6IHRvdGFsTnVtTW92aWVzLFxuICAgIH1cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlHZXRNb3ZpZXNCeUNvdW50cnkocmVxLCByZXMsIG5leHQpIHtcbiAgICBsZXQgY291bnRyaWVzID0gcmVxLnF1ZXJ5LmNvdW50cmllcyA9PSBcIlwiID8gXCJVU0FcIiA6IHJlcS5xdWVyeS5jb3VudHJpZXNcbiAgICBsZXQgY291bnRyeUxpc3QgPSBBcnJheS5pc0FycmF5KGNvdW50cmllcykgPyBjb3VudHJpZXMgOiBBcnJheShjb3VudHJpZXMpXG4gICAgbGV0IG1vdmllc0xpc3QgPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0TW92aWVzQnlDb3VudHJ5KGNvdW50cnlMaXN0KVxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgIHRpdGxlczogbW92aWVzTGlzdCxcbiAgICB9XG4gICAgcmVzLmpzb24ocmVzcG9uc2UpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYXBpR2V0TW92aWVCeUlkKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBpZCA9IHJlcS5wYXJhbXMuaWQgfHwge31cbiAgICAgIGxldCBtb3ZpZSA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZUJ5SUQoaWQpXG4gICAgICBpZiAoIW1vdmllKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiTm90IGZvdW5kXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBsZXQgdXBkYXRlZF90eXBlID0gbW92aWUubGFzdHVwZGF0ZWQgaW5zdGFuY2VvZiBEYXRlID8gXCJEYXRlXCIgOiBcIm90aGVyXCJcbiAgICAgIHJlcy5qc29uKHsgbW92aWUsIHVwZGF0ZWRfdHlwZSB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBhcGksICR7ZX1gKVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlTZWFyY2hNb3ZpZXMocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBNT1ZJRVNfUEVSX1BBR0UgPSAyMFxuICAgIGxldCBwYWdlXG4gICAgdHJ5IHtcbiAgICAgIHBhZ2UgPSByZXEucXVlcnkucGFnZSA/IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlLCAxMCkgOiAwXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgR290IGJhZCB2YWx1ZSBmb3IgcGFnZTosICR7ZX1gKVxuICAgICAgcGFnZSA9IDBcbiAgICB9XG4gICAgbGV0IHNlYXJjaFR5cGVcbiAgICB0cnkge1xuICAgICAgc2VhcmNoVHlwZSA9IE9iamVjdC5rZXlzKHJlcS5xdWVyeSlbMF1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBObyBzZWFyY2gga2V5cyBzcGVjaWZpZWQ6ICR7ZX1gKVxuICAgIH1cblxuICAgIGxldCBmaWx0ZXJzID0ge31cblxuICAgIHN3aXRjaCAoc2VhcmNoVHlwZSkge1xuICAgICAgY2FzZSBcImdlbnJlXCI6XG4gICAgICAgIGlmIChyZXEucXVlcnkuZ2VucmUgIT09IFwiXCIpIHtcbiAgICAgICAgICBmaWx0ZXJzLmdlbnJlID0gcmVxLnF1ZXJ5LmdlbnJlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJjYXN0XCI6XG4gICAgICAgIGlmIChyZXEucXVlcnkuY2FzdCAhPT0gXCJcIikge1xuICAgICAgICAgIGZpbHRlcnMuY2FzdCA9IHJlcS5xdWVyeS5jYXN0XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgIGlmIChyZXEucXVlcnkudGV4dCAhPT0gXCJcIikge1xuICAgICAgICAgIGZpbHRlcnMudGV4dCA9IHJlcS5xdWVyeS50ZXh0XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgfVxuXG4gICAgY29uc3QgeyBtb3ZpZXNMaXN0LCB0b3RhbE51bU1vdmllcyB9ID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllcyh7XG4gICAgICBmaWx0ZXJzLFxuICAgICAgcGFnZSxcbiAgICAgIE1PVklFU19QRVJfUEFHRSxcbiAgICB9KVxuXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgbW92aWVzOiBtb3ZpZXNMaXN0LFxuICAgICAgcGFnZTogcGFnZSxcbiAgICAgIGZpbHRlcnMsXG4gICAgICBlbnRyaWVzX3Blcl9wYWdlOiBNT1ZJRVNfUEVSX1BBR0UsXG4gICAgICB0b3RhbF9yZXN1bHRzOiB0b3RhbE51bU1vdmllcyxcbiAgICB9XG5cbiAgICByZXMuanNvbihyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlGYWNldGVkU2VhcmNoKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgY29uc3QgTU9WSUVTX1BFUl9QQUdFID0gMjBcblxuICAgIGxldCBwYWdlXG4gICAgdHJ5IHtcbiAgICAgIHBhZ2UgPSByZXEucXVlcnkucGFnZSA/IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlLCAxMCkgOiAwXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgR290IGJhZCB2YWx1ZSBmb3IgcGFnZSwgZGVmYXVsdGluZyB0byAwOiAke2V9YClcbiAgICAgIHBhZ2UgPSAwXG4gICAgfVxuXG4gICAgbGV0IGZpbHRlcnMgPSB7fVxuXG4gICAgZmlsdGVycyA9XG4gICAgICByZXEucXVlcnkuY2FzdCAhPT0gXCJcIlxuICAgICAgICA/IHsgY2FzdDogbmV3IFJlZ0V4cChyZXEucXVlcnkuY2FzdCwgXCJpXCIpIH1cbiAgICAgICAgOiB7IGNhc3Q6IFwiVG9tIEhhbmtzXCIgfVxuXG4gICAgY29uc3QgZmFjZXRlZFNlYXJjaFJlc3VsdCA9IGF3YWl0IE1vdmllc0RBTy5mYWNldGVkU2VhcmNoKHtcbiAgICAgIGZpbHRlcnMsXG4gICAgICBwYWdlLFxuICAgICAgTU9WSUVTX1BFUl9QQUdFLFxuICAgIH0pXG5cbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICBtb3ZpZXM6IGZhY2V0ZWRTZWFyY2hSZXN1bHQubW92aWVzLFxuICAgICAgZmFjZXRzOiB7XG4gICAgICAgIHJ1bnRpbWU6IGZhY2V0ZWRTZWFyY2hSZXN1bHQucnVudGltZSxcbiAgICAgICAgcmF0aW5nOiBmYWNldGVkU2VhcmNoUmVzdWx0LnJhdGluZyxcbiAgICAgIH0sXG4gICAgICBwYWdlOiBwYWdlLFxuICAgICAgZmlsdGVycyxcbiAgICAgIGVudHJpZXNfcGVyX3BhZ2U6IE1PVklFU19QRVJfUEFHRSxcbiAgICAgIHRvdGFsX3Jlc3VsdHM6IGZhY2V0ZWRTZWFyY2hSZXN1bHQuY291bnQsXG4gICAgfVxuXG4gICAgcmVzLmpzb24ocmVzcG9uc2UpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgY29uc3QgeyBwb29sU2l6ZSwgd3RpbWVvdXQsIGF1dGhJbmZvIH0gPSBhd2FpdCBNb3ZpZXNEQU8uZ2V0Q29uZmlndXJhdGlvbigpXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgICAgcG9vbF9zaXplOiBwb29sU2l6ZSxcbiAgICAgICAgd3RpbWVvdXQsXG4gICAgICAgIC4uLmF1dGhJbmZvLFxuICAgICAgfVxuICAgICAgcmVzLmpzb24ocmVzcG9uc2UpXG4gICAgfSBjYXRjaCAoZSkge1xuICAg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","map":{"version":3,"names":["MoviesController","req","res","next","MOVIES_PER_PAGE","MoviesDAO","getMovies","moviesList","totalNumMovies","response","movies","page","filters","entries_per_page","total_results","json","countries","query","countryList","Array","isArray","getMoviesByCountry","titles","id","params","getMovieByID","movie","status","error","updated_type","lastupdated","Date","console","log","parseInt","e","searchType","Object","keys","genre","cast","text","RegExp","facetedSearch","facetedSearchResult","facets","runtime","rating","count","getConfiguration","poolSize","wtimeout","authInfo","pool_size"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\api\\","sources":["movies.controller.js"],"sourcesContent":["import MoviesDAO from \"../dao/moviesDAO\"\n\nexport default class MoviesController {\n  static async apiGetMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies()\n    let response = {\n      movies: moviesList,\n      page: 0,\n      filters: {},\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMoviesByCountry(req, res, next) {\n    let countries = req.query.countries == \"\" ? \"USA\" : req.query.countries\n    let countryList = Array.isArray(countries) ? countries : Array(countries)\n    let moviesList = await MoviesDAO.getMoviesByCountry(countryList)\n    let response = {\n      titles: moviesList,\n    }\n    res.json(response)\n  }\n\n  static async apiGetMovieById(req, res, next) {\n    try {\n      let id = req.params.id || {}\n      let movie = await MoviesDAO.getMovieByID(id)\n      if (!movie) {\n        res.status(404).json({ error: \"Not found\" })\n        return\n      }\n      let updated_type = movie.lastupdated instanceof Date ? \"Date\" : \"other\"\n      res.json({ movie, updated_type })\n    } catch (e) {\n      console.log(`api, ${e}`)\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async apiSearchMovies(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page:, ${e}`)\n      page = 0\n    }\n    let searchType\n    try {\n      searchType = Object.keys(req.query)[0]\n    } catch (e) {\n      console.error(`No search keys specified: ${e}`)\n    }\n\n    let filters = {}\n\n    switch (searchType) {\n      case \"genre\":\n        if (req.query.genre !== \"\") {\n          filters.genre = req.query.genre\n        }\n        break\n      case \"cast\":\n        if (req.query.cast !== \"\") {\n          filters.cast = req.query.cast\n        }\n        break\n      case \"text\":\n        if (req.query.text !== \"\") {\n          filters.text = req.query.text\n        }\n        break\n      default:\n      // nothing to do\n    }\n\n    const { moviesList, totalNumMovies } = await MoviesDAO.getMovies({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: moviesList,\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: totalNumMovies,\n    }\n\n    res.json(response)\n  }\n\n  static async apiFacetedSearch(req, res, next) {\n    const MOVIES_PER_PAGE = 20\n\n    let page\n    try {\n      page = req.query.page ? parseInt(req.query.page, 10) : 0\n    } catch (e) {\n      console.error(`Got bad value for page, defaulting to 0: ${e}`)\n      page = 0\n    }\n\n    let filters = {}\n\n    filters =\n      req.query.cast !== \"\"\n        ? { cast: new RegExp(req.query.cast, \"i\") }\n        : { cast: \"Tom Hanks\" }\n\n    const facetedSearchResult = await MoviesDAO.facetedSearch({\n      filters,\n      page,\n      MOVIES_PER_PAGE,\n    })\n\n    let response = {\n      movies: facetedSearchResult.movies,\n      facets: {\n        runtime: facetedSearchResult.runtime,\n        rating: facetedSearchResult.rating,\n      },\n      page: page,\n      filters,\n      entries_per_page: MOVIES_PER_PAGE,\n      total_results: facetedSearchResult.count,\n    }\n\n    res.json(response)\n  }\n\n  static async getConfig(req, res, next) {\n    const { poolSize, wtimeout, authInfo } = await MoviesDAO.getConfiguration()\n    try {\n      let response = {\n        pool_size: poolSize,\n        wtimeout,\n        ...authInfo,\n      }\n      res.json(response)\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\moviesDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _bson = require(\"bson\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar movies;\nvar mflix;\nvar DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]];\nvar MoviesDAO = /*#__PURE__*/function () {\n  function MoviesDAO() {\n    (0, _classCallCheck2[\"default\"])(this, MoviesDAO);\n  }\n  (0, _createClass2[\"default\"])(MoviesDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!movies) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS);\n              case 5:\n                mflix = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"movies\");\n              case 8:\n                movies = _context.sent;\n                this.movies = movies; // this is only for testing\n                _context.next = 15;\n                break;\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish a collection handle in moviesDAO: \".concat(_context.t0));\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n     * Retrieves the connection pool size, write concern and user roles on the\n     * current client.\n     * @returns {Promise<ConfigurationResult>} An object with configuration details.\n     */\n  }, {\n    key: \"getConfiguration\",\n    value: function () {\n      var _getConfiguration = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var roleInfo, authInfo, _movies$s$db$serverCo, poolSize, wtimeout, response;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return mflix.command({\n                  connectionStatus: 1\n                });\n              case 2:\n                roleInfo = _context2.sent;\n                authInfo = roleInfo.authInfo.authenticatedUserRoles[0];\n                _movies$s$db$serverCo = movies.s.db.serverConfig.s.options, poolSize = _movies$s$db$serverCo.poolSize, wtimeout = _movies$s$db$serverCo.wtimeout;\n                response = {\n                  poolSize: poolSize,\n                  wtimeout: wtimeout,\n                  authInfo: authInfo\n                };\n                return _context2.abrupt(\"return\", response);\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function getConfiguration() {\n        return _getConfiguration.apply(this, arguments);\n      }\n      return getConfiguration;\n    }()\n    /**\n     * Finds and returns movies originating from one or more countries.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {string[]} countries - The list of countries.\n     * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n     */\n  }, {\n    key: \"getMoviesByCountry\",\n    value: function () {\n      var _getMoviesByCountry = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(countries) {\n        var cursor;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return movies.find().limit(1);\n              case 3:\n                cursor = _context3.sent;\n                _context3.next = 10;\n                break;\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to issue find command, \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", []);\n              case 10:\n                return _context3.abrupt(\"return\", cursor.toArray());\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n      function getMoviesByCountry(_x2) {\n        return _getMoviesByCountry.apply(this, arguments);\n      }\n      return getMoviesByCountry;\n    }()\n    /**\n     * Finds and returns movies matching a given text in their title or description.\n     * @param {string} text - The text to match with.\n     * @returns {QueryParams} The QueryParams for text search\n     */\n  }, {\n    key: \"textSearchQuery\",\n    value: function textSearchQuery(text) {\n      var query = {\n        $text: {\n          $search: text\n        }\n      };\n      var meta_score = {\n        $meta: \"textScore\"\n      };\n      var sort = [[\"score\", meta_score]];\n      var project = {\n        score: meta_score\n      };\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     * Finds and returns movies including one or more cast members.\n     * @param {string[]} cast - The cast members to match with.\n     * @returns {QueryParams} The QueryParams for cast search\n     */\n  }, {\n    key: \"castSearchQuery\",\n    value: function castSearchQuery(cast) {\n      var searchCast = Array.isArray(cast) ? cast : cast.split(\", \");\n      var query = {\n        cast: {\n          $in: searchCast\n        }\n      };\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     * Finds and returns movies matching a one or more genres.\n     * @param {string[]} genre - The genres to match with.\n     * @returns {QueryParams} The QueryParams for genre search\n     */\n  }, {\n    key: \"genreSearchQuery\",\n    value: function genreSearchQuery(genre) {\n      /**\n      Ticket: Text and Subfield Search\n       Given an array of one or more genres, construct a query that searches\n      MongoDB for movies with that genre.\n      */\n\n      var searchGenre = Array.isArray(genre) ? genre : genre.split(\", \");\n\n      // TODO Ticket: Text and Subfield Search\n      // Construct a query that will search for the chosen genre.\n      var query = {};\n      var project = {};\n      var sort = DEFAULT_SORT;\n      return {\n        query: query,\n        project: project,\n        sort: sort\n      };\n    }\n\n    /**\n     *\n     * @param {Object} filters - The search parameter to use in the query. Comes\n     * in the form of `{cast: { $in: [...castMembers]}}`\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {FacetedSearchReturn} FacetedSearchReturn\n     */\n  }, {\n    key: \"facetedSearch\",\n    value: function () {\n      var _facetedSearch = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4() {\n        var _ref,\n          _ref$filters,\n          filters,\n          _ref$page,\n          page,\n          _ref$moviesPerPage,\n          moviesPerPage,\n          matchStage,\n          sortStage,\n          countingPipeline,\n          skipStage,\n          limitStage,\n          facetStage,\n          queryPipeline,\n          results,\n          count,\n          _args4 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, _ref$filters = _ref.filters, filters = _ref$filters === void 0 ? null : _ref$filters, _ref$page = _ref.page, page = _ref$page === void 0 ? 0 : _ref$page, _ref$moviesPerPage = _ref.moviesPerPage, moviesPerPage = _ref$moviesPerPage === void 0 ? 20 : _ref$moviesPerPage;\n                if (!(!filters || !filters.cast)) {\n                  _context4.next = 3;\n                  break;\n                }\n                throw new Error(\"Must specify cast members to filter by.\");\n              case 3:\n                matchStage = {\n                  $match: filters\n                };\n                sortStage = {\n                  $sort: {\n                    \"tomatoes.viewer.numReviews\": -1\n                  }\n                };\n                countingPipeline = [matchStage, sortStage, {\n                  $count: \"count\"\n                }];\n                skipStage = {\n                  $skip: moviesPerPage * page\n                };\n                limitStage = {\n                  $limit: moviesPerPage\n                };\n                facetStage = {\n                  $facet: {\n                    runtime: [{\n                      $bucket: {\n                        groupBy: \"$runtime\",\n                        boundaries: [0, 60, 90, 120, 180],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    rating: [{\n                      $bucket: {\n                        groupBy: \"$metacritic\",\n                        boundaries: [0, 50, 70, 90, 100],\n                        \"default\": \"other\",\n                        output: {\n                          count: {\n                            $sum: 1\n                          }\n                        }\n                      }\n                    }],\n                    movies: [{\n                      $addFields: {\n                        title: \"$title\"\n                      }\n                    }]\n                  }\n                };\n                /**\n                Ticket: Faceted Search\n                 Please append the skipStage, limitStage, and facetStage to the queryPipeline\n                (in that order). You can accomplish this by adding the stages directly to\n                the queryPipeline.\n                 The queryPipeline is a Javascript array, so you can use push() or concat()\n                to complete this task, but you might have to do something about `const`.\n                */\n                queryPipeline = [matchStage, sortStage\n                // TODO Ticket: Faceted Search\n                // Add the stages to queryPipeline in the correct order.\n                ];\n                _context4.prev = 10;\n                _context4.next = 13;\n                return movies.aggregate(queryPipeline);\n              case 13:\n                _context4.next = 15;\n                return _context4.sent.next();\n              case 15:\n                results = _context4.sent;\n                _context4.next = 18;\n                return movies.aggregate(countingPipeline);\n              case 18:\n                _context4.next = 20;\n                return _context4.sent.next();\n              case 20:\n                count = _context4.sent;\n                return _context4.abrupt(\"return\", _objectSpread(_objectSpread({}, results), count));\n              case 24:\n                _context4.prev = 24;\n                _context4.t0 = _context4[\"catch\"](10);\n                return _context4.abrupt(\"return\", {\n                  error: \"Results too large, be more restrictive in filter\"\n                });\n              case 27:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[10, 24]]);\n      }));\n      function facetedSearch() {\n        return _facetedSearch.apply(this, arguments);\n      }\n      return facetedSearch;\n    }()\n    /**\n     * Finds and returns movies by country.\n     * Returns a list of objects, each object contains a title and an _id.\n     * @param {Object} filters - The search parameters to use in the query.\n     * @param {number} page - The page of movies to retrieve.\n     * @param {number} moviesPerPage - The number of movies to display per page.\n     * @returns {GetMoviesResult} An object with movie results and total results\n     * that would match this query\n     */\n  }, {\n    key: \"getMovies\",\n    value: function () {\n      var _getMovies = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var _ref2,\n          _ref2$filters,\n          filters,\n          _ref2$page,\n          page,\n          _ref2$moviesPerPage,\n          moviesPerPage,\n          queryParams,\n          _queryParams,\n          _queryParams$query,\n          query,\n          _queryParams$project,\n          project,\n          _queryParams$sort,\n          sort,\n          cursor,\n          displayCursor,\n          moviesList,\n          totalNumMovies,\n          _args5 = arguments;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref2 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, _ref2$filters = _ref2.filters, filters = _ref2$filters === void 0 ? null : _ref2$filters, _ref2$page = _ref2.page, page = _ref2$page === void 0 ? 0 : _ref2$page, _ref2$moviesPerPage = _ref2.moviesPerPage, moviesPerPage = _ref2$moviesPerPage === void 0 ? 20 : _ref2$moviesPerPage;\n                queryParams = {};\n                if (filters) {\n                  if (\"text\" in filters) {\n                    queryParams = this.textSearchQuery(filters[\"text\"]);\n                  } else if (\"cast\" in filters) {\n                    queryParams = this.castSearchQuery(filters[\"cast\"]);\n                  } else if (\"genre\" in filters) {\n                    queryParams = this.genreSearchQuery(filters[\"genre\"]);\n                  }\n                }\n                _queryParams = queryParams, _queryParams$query = _queryParams.query, query = _queryParams$query === void 0 ? {} : _queryParams$query, _queryParams$project = _queryParams.project, project = _queryParams$project === void 0 ? {} : _queryParams$project, _queryParams$sort = _queryParams.sort, sort = _queryParams$sort === void 0 ? DEFAULT_SORT : _queryParams$sort;\n                _context5.prev = 4;\n                _context5.next = 7;\n                return movies.find(query).project(project).sort(sort);\n              case 7:\n                cursor = _context5.sent;\n                _context5.next = 14;\n                break;\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](4);\n                console.error(\"Unable to issue find command, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n              case 14:\n                /**\n                Ticket: Paging\n                 Before this method returns back to the API, use the \"moviesPerPage\" and\n                \"page\" arguments to decide the movies to display.\n                 Paging can be implemented by using the skip() and limit() cursor methods.\n                */\n                // TODO Ticket: Paging\n                // Use the cursor to only return the movies that belong on the current page\n                displayCursor = cursor.limit(moviesPerPage);\n                _context5.prev = 15;\n                _context5.next = 18;\n                return displayCursor.toArray();\n              case 18:\n                moviesList = _context5.sent;\n                if (!(page === 0)) {\n                  _context5.next = 25;\n                  break;\n                }\n                _context5.next = 22;\n                return movies.countDocuments(query);\n              case 22:\n                _context5.t1 = _context5.sent;\n                _context5.next = 26;\n                break;\n              case 25:\n                _context5.t1 = 0;\n              case 26:\n                totalNumMovies = _context5.t1;\n                return _context5.abrupt(\"return\", {\n                  moviesList: moviesList,\n                  totalNumMovies: totalNumMovies\n                });\n              case 30:\n                _context5.prev = 30;\n                _context5.t2 = _context5[\"catch\"](15);\n                console.error(\"Unable to convert cursor to array or problem counting documents, \".concat(_context5.t2));\n                return _context5.abrupt(\"return\", {\n                  moviesList: [],\n                  totalNumMovies: 0\n                });\n              case 34:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[4, 10], [15, 30]]);\n      }));\n      function getMovies() {\n        return _getMovies.apply(this, arguments);\n      }\n      return getMovies;\n    }()\n    /**\n     * Gets a movie by its id\n     * @param {string} id - The desired movie id, the _id in Mongo\n     * @returns {MflixMovie | null} Returns either a single movie or nothing\n     */\n  }, {\n    key: \"getMovieByID\",\n    value: function () {\n      var _getMovieByID = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(id) {\n        var pipeline;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                /**\n                Ticket: Get Comments\n                 Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n                matching that movie's ID.\n                 The $match stage is already completed. You will need to add a $lookup\n                stage that searches the `comments` collection for the correct comments.\n                */\n                // TODO Ticket: Get Comments\n                // Implement the required pipeline.\n                pipeline = [{\n                  $match: {\n                    _id: (0, _bson.ObjectId)(id)\n                  }\n                }];\n                _context6.next = 4;\n                return movies.aggregate(pipeline).next();\n              case 4:\n                return _context6.abrupt(\"return\", _context6.sent);\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](0);\n                /**\n                Ticket: Error Handling\n                 Handle the error that occurs when an invalid ID is passed to this method.\n                When this specific error is thrown, the method should return `null`.\n                */\n\n                // TODO Ticket: Error Handling\n                // Catch the InvalidId error by string matching, and then handle it.\n                console.error(\"Something went wrong in getMovieByID: \".concat(_context6.t0));\n                throw _context6.t0;\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 7]]);\n      }));\n      function getMovieByID(_x3) {\n        return _getMovieByID.apply(this, arguments);\n      }\n      return getMovieByID;\n    }()\n  }]);\n  return MoviesDAO;\n}();\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\nexports[\"default\"] = MoviesDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb3ZpZXMiLCJtZmxpeCIsIkRFRkFVTFRfU09SVCIsIk1vdmllc0RBTyIsImNvbm4iLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNRkxJWF9OUyIsImNvbGxlY3Rpb24iLCJjb25zb2xlIiwiZXJyb3IiLCJjb21tYW5kIiwiY29ubmVjdGlvblN0YXR1cyIsInJvbGVJbmZvIiwiYXV0aEluZm8iLCJhdXRoZW50aWNhdGVkVXNlclJvbGVzIiwicyIsInNlcnZlckNvbmZpZyIsIm9wdGlvbnMiLCJwb29sU2l6ZSIsInd0aW1lb3V0IiwicmVzcG9uc2UiLCJjb3VudHJpZXMiLCJmaW5kIiwibGltaXQiLCJjdXJzb3IiLCJ0b0FycmF5IiwidGV4dCIsInF1ZXJ5IiwiJHRleHQiLCIkc2VhcmNoIiwibWV0YV9zY29yZSIsIiRtZXRhIiwic29ydCIsInByb2plY3QiLCJzY29yZSIsImNhc3QiLCJzZWFyY2hDYXN0IiwiQXJyYXkiLCJpc0FycmF5Iiwic3BsaXQiLCIkaW4iLCJnZW5yZSIsInNlYXJjaEdlbnJlIiwiZmlsdGVycyIsInBhZ2UiLCJtb3ZpZXNQZXJQYWdlIiwiRXJyb3IiLCJtYXRjaFN0YWdlIiwiJG1hdGNoIiwic29ydFN0YWdlIiwiJHNvcnQiLCJjb3VudGluZ1BpcGVsaW5lIiwiJGNvdW50Iiwic2tpcFN0YWdlIiwiJHNraXAiLCJsaW1pdFN0YWdlIiwiJGxpbWl0IiwiZmFjZXRTdGFnZSIsIiRmYWNldCIsInJ1bnRpbWUiLCIkYnVja2V0IiwiZ3JvdXBCeSIsImJvdW5kYXJpZXMiLCJvdXRwdXQiLCJjb3VudCIsIiRzdW0iLCJyYXRpbmciLCIkYWRkRmllbGRzIiwidGl0bGUiLCJxdWVyeVBpcGVsaW5lIiwiYWdncmVnYXRlIiwibmV4dCIsInJlc3VsdHMiLCJxdWVyeVBhcmFtcyIsInRleHRTZWFyY2hRdWVyeSIsImNhc3RTZWFyY2hRdWVyeSIsImdlbnJlU2VhcmNoUXVlcnkiLCJtb3ZpZXNMaXN0IiwidG90YWxOdW1Nb3ZpZXMiLCJkaXNwbGF5Q3Vyc29yIiwiY291bnREb2N1bWVudHMiLCJpZCIsInBpcGVsaW5lIiwiX2lkIiwiT2JqZWN0SWQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4LS1qc1xcc3JjXFxkYW9cXCIsInNvdXJjZXMiOlsibW92aWVzREFPLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcImJzb25cIlxuXG5sZXQgbW92aWVzXG5sZXQgbWZsaXhcbmNvbnN0IERFRkFVTFRfU09SVCA9IFtbXCJ0b21hdG9lcy52aWV3ZXIubnVtUmV2aWV3c1wiLCAtMV1dXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdmllc0RBTyB7XG4gIHN0YXRpYyBhc3luYyBpbmplY3REQihjb25uKSB7XG4gICAgaWYgKG1vdmllcykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBtZmxpeCA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpXG4gICAgICBtb3ZpZXMgPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKS5jb2xsZWN0aW9uKFwibW92aWVzXCIpXG4gICAgICB0aGlzLm1vdmllcyA9IG1vdmllcyAvLyB0aGlzIGlzIG9ubHkgZm9yIHRlc3RpbmdcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbGxlY3Rpb24gaGFuZGxlIGluIG1vdmllc0RBTzogJHtlfWAsXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgY29ubmVjdGlvbiBwb29sIHNpemUsIHdyaXRlIGNvbmNlcm4gYW5kIHVzZXIgcm9sZXMgb24gdGhlXG4gICAqIGN1cnJlbnQgY2xpZW50LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDb25maWd1cmF0aW9uUmVzdWx0Pn0gQW4gb2JqZWN0IHdpdGggY29uZmlndXJhdGlvbiBkZXRhaWxzLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgY29uc3Qgcm9sZUluZm8gPSBhd2FpdCBtZmxpeC5jb21tYW5kKHsgY29ubmVjdGlvblN0YXR1czogMSB9KVxuICAgIGNvbnN0IGF1dGhJbmZvID0gcm9sZUluZm8uYXV0aEluZm8uYXV0aGVudGljYXRlZFVzZXJSb2xlc1swXVxuICAgIGNvbnN0IHsgcG9vbFNpemUsIHd0aW1lb3V0IH0gPSBtb3ZpZXMucy5kYi5zZXJ2ZXJDb25maWcucy5vcHRpb25zXG4gICAgbGV0IHJlc3BvbnNlID0ge1xuICAgICAgcG9vbFNpemUsXG4gICAgICB3dGltZW91dCxcbiAgICAgIGF1dGhJbmZvLFxuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBhbmQgcmV0dXJucyBtb3ZpZXMgb3JpZ2luYXRpbmcgZnJvbSBvbmUgb3IgbW9yZSBjb3VudHJpZXMuXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMsIGVhY2ggb2JqZWN0IGNvbnRhaW5zIGEgdGl0bGUgYW5kIGFuIF9pZC5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY291bnRyaWVzIC0gVGhlIGxpc3Qgb2YgY291bnRyaWVzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDb3VudHJ5UmVzdWx0Pn0gQSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHRvIGEgbGlzdCBvZiBDb3VudHJ5UmVzdWx0cy5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRNb3ZpZXNCeUNvdW50cnkoY291bnRyaWVzKSB7XG4gICAgLyoqXG4gICAgVGlja2V0OiBQcm9qZWN0aW9uXG5cbiAgICBXcml0ZSBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBtb3ZpZXMgd2l0aCB0aGUgY291bnRyaWVzIGluIHRoZSBcImNvdW50cmllc1wiXG4gICAgbGlzdCwgYnV0IG9ubHkgcmV0dXJucyB0aGUgdGl0bGUgYW5kIF9pZCBvZiBlYWNoIG1vdmllLlxuXG4gICAgUmVtZW1iZXIgdGhhdCBpbiBNb25nb0RCLCB0aGUgJGluIG9wZXJhdG9yIGNhbiBiZSB1c2VkIHdpdGggYSBsaXN0IHRvXG4gICAgbWF0Y2ggb25lIG9yIG1vcmUgdmFsdWVzIG9mIGEgc3BlY2lmaWMgZmllbGQuXG4gICAgKi9cblxuICAgIGxldCBjdXJzb3JcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFByb2plY3Rpb25cbiAgICAgIC8vIEZpbmQgbW92aWVzIG1hdGNoaW5nIHRoZSBcImNvdW50cmllc1wiIGxpc3QsIGJ1dCBvbmx5IHJldHVybiB0aGUgdGl0bGVcbiAgICAgIC8vIGFuZCBfaWQuIERvIG5vdCBwdXQgYSBsaW1pdCBpbiB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiwgdGhlIGxpbWl0XG4gICAgICAvLyBoZXJlIGlzIG9ubHkgaW5jbHVkZWQgdG8gYXZvaWQgc2VuZGluZyA0NjAwMCBkb2N1bWVudHMgZG93biB0aGVcbiAgICAgIC8vIHdpcmUuXG4gICAgICBjdXJzb3IgPSBhd2FpdCBtb3ZpZXMuZmluZCgpLmxpbWl0KDEpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGlzc3VlIGZpbmQgY29tbWFuZCwgJHtlfWApXG4gICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICByZXR1cm4gY3Vyc29yLnRvQXJyYXkoKVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuZCByZXR1cm5zIG1vdmllcyBtYXRjaGluZyBhIGdpdmVuIHRleHQgaW4gdGhlaXIgdGl0bGUgb3IgZGVzY3JpcHRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHRleHQgdG8gbWF0Y2ggd2l0aC5cbiAgICogQHJldHVybnMge1F1ZXJ5UGFyYW1zfSBUaGUgUXVlcnlQYXJhbXMgZm9yIHRleHQgc2VhcmNoXG4gICAqL1xuICBzdGF0aWMgdGV4dFNlYXJjaFF1ZXJ5KHRleHQpIHtcbiAgICBjb25zdCBxdWVyeSA9IHsgJHRleHQ6IHsgJHNlYXJjaDogdGV4dCB9IH1cbiAgICBjb25zdCBtZXRhX3Njb3JlID0geyAkbWV0YTogXCJ0ZXh0U2NvcmVcIiB9XG4gICAgY29uc3Qgc29ydCA9IFtbXCJzY29yZVwiLCBtZXRhX3Njb3JlXV1cbiAgICBjb25zdCBwcm9qZWN0ID0geyBzY29yZTogbWV0YV9zY29yZSB9XG5cbiAgICByZXR1cm4geyBxdWVyeSwgcHJvamVjdCwgc29ydCB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW5kIHJldHVybnMgbW92aWVzIGluY2x1ZGluZyBvbmUgb3IgbW9yZSBjYXN0IG1lbWJlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGNhc3QgLSBUaGUgY2FzdCBtZW1iZXJzIHRvIG1hdGNoIHdpdGguXG4gICAqIEByZXR1cm5zIHtRdWVyeVBhcmFtc30gVGhlIFF1ZXJ5UGFyYW1zIGZvciBjYXN0IHNlYXJjaFxuICAgKi9cbiAgc3RhdGljIGNhc3RTZWFyY2hRdWVyeShjYXN0KSB7XG4gICAgY29uc3Qgc2VhcmNoQ2FzdCA9IEFycmF5LmlzQXJyYXkoY2FzdCkgPyBjYXN0IDogY2FzdC5zcGxpdChcIiwgXCIpXG5cbiAgICBjb25zdCBxdWVyeSA9IHsgY2FzdDogeyAkaW46IHNlYXJjaENhc3QgfSB9XG4gICAgY29uc3QgcHJvamVjdCA9IHt9XG4gICAgY29uc3Qgc29ydCA9IERFRkFVTFRfU09SVFxuXG4gICAgcmV0dXJuIHsgcXVlcnksIHByb2plY3QsIHNvcnQgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFuZCByZXR1cm5zIG1vdmllcyBtYXRjaGluZyBhIG9uZSBvciBtb3JlIGdlbnJlcy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gZ2VucmUgLSBUaGUgZ2VucmVzIHRvIG1hdGNoIHdpdGguXG4gICAqIEByZXR1cm5zIHtRdWVyeVBhcmFtc30gVGhlIFF1ZXJ5UGFyYW1zIGZvciBnZW5yZSBzZWFyY2hcbiAgICovXG4gIHN0YXRpYyBnZW5yZVNlYXJjaFF1ZXJ5KGdlbnJlKSB7XG4gICAgLyoqXG4gICAgVGlja2V0OiBUZXh0IGFuZCBTdWJmaWVsZCBTZWFyY2hcblxuICAgIEdpdmVuIGFuIGFycmF5IG9mIG9uZSBvciBtb3JlIGdlbnJlcywgY29uc3RydWN0IGEgcXVlcnkgdGhhdCBzZWFyY2hlc1xuICAgIE1vbmdvREIgZm9yIG1vdmllcyB3aXRoIHRoYXQgZ2VucmUuXG4gICAgKi9cblxuICAgIGNvbnN0IHNlYXJjaEdlbnJlID0gQXJyYXkuaXNBcnJheShnZW5yZSkgPyBnZW5yZSA6IGdlbnJlLnNwbGl0KFwiLCBcIilcblxuICAgIC8vIFRPRE8gVGlja2V0OiBUZXh0IGFuZCBTdWJmaWVsZCBTZWFyY2hcbiAgICAvLyBDb25zdHJ1Y3QgYSBxdWVyeSB0aGF0IHdpbGwgc2VhcmNoIGZvciB0aGUgY2hvc2VuIGdlbnJlLlxuICAgIGNvbnN0IHF1ZXJ5ID0ge31cbiAgICBjb25zdCBwcm9qZWN0ID0ge31cbiAgICBjb25zdCBzb3J0ID0gREVGQVVMVF9TT1JUXG5cbiAgICByZXR1cm4geyBxdWVyeSwgcHJvamVjdCwgc29ydCB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBUaGUgc2VhcmNoIHBhcmFtZXRlciB0byB1c2UgaW4gdGhlIHF1ZXJ5LiBDb21lc1xuICAgKiBpbiB0aGUgZm9ybSBvZiBge2Nhc3Q6IHsgJGluOiBbLi4uY2FzdE1lbWJlcnNdfX1gXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlIC0gVGhlIHBhZ2Ugb2YgbW92aWVzIHRvIHJldHJpZXZlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbW92aWVzUGVyUGFnZSAtIFRoZSBudW1iZXIgb2YgbW92aWVzIHRvIGRpc3BsYXkgcGVyIHBhZ2UuXG4gICAqIEByZXR1cm5zIHtGYWNldGVkU2VhcmNoUmV0dXJufSBGYWNldGVkU2VhcmNoUmV0dXJuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZmFjZXRlZFNlYXJjaCh7XG4gICAgZmlsdGVycyA9IG51bGwsXG4gICAgcGFnZSA9IDAsXG4gICAgbW92aWVzUGVyUGFnZSA9IDIwLFxuICB9ID0ge30pIHtcbiAgICBpZiAoIWZpbHRlcnMgfHwgIWZpbHRlcnMuY2FzdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBzcGVjaWZ5IGNhc3QgbWVtYmVycyB0byBmaWx0ZXIgYnkuXCIpXG4gICAgfVxuICAgIGNvbnN0IG1hdGNoU3RhZ2UgPSB7ICRtYXRjaDogZmlsdGVycyB9XG4gICAgY29uc3Qgc29ydFN0YWdlID0geyAkc29ydDogeyBcInRvbWF0b2VzLnZpZXdlci5udW1SZXZpZXdzXCI6IC0xIH0gfVxuICAgIGNvbnN0IGNvdW50aW5nUGlwZWxpbmUgPSBbbWF0Y2hTdGFnZSwgc29ydFN0YWdlLCB7ICRjb3VudDogXCJjb3VudFwiIH1dXG4gICAgY29uc3Qgc2tpcFN0YWdlID0geyAkc2tpcDogbW92aWVzUGVyUGFnZSAqIHBhZ2UgfVxuICAgIGNvbnN0IGxpbWl0U3RhZ2UgPSB7ICRsaW1pdDogbW92aWVzUGVyUGFnZSB9XG4gICAgY29uc3QgZmFjZXRTdGFnZSA9IHtcbiAgICAgICRmYWNldDoge1xuICAgICAgICBydW50aW1lOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGJ1Y2tldDoge1xuICAgICAgICAgICAgICBncm91cEJ5OiBcIiRydW50aW1lXCIsXG4gICAgICAgICAgICAgIGJvdW5kYXJpZXM6IFswLCA2MCwgOTAsIDEyMCwgMTgwXSxcbiAgICAgICAgICAgICAgZGVmYXVsdDogXCJvdGhlclwiLFxuICAgICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHJhdGluZzogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICRidWNrZXQ6IHtcbiAgICAgICAgICAgICAgZ3JvdXBCeTogXCIkbWV0YWNyaXRpY1wiLFxuICAgICAgICAgICAgICBib3VuZGFyaWVzOiBbMCwgNTAsIDcwLCA5MCwgMTAwXSxcbiAgICAgICAgICAgICAgZGVmYXVsdDogXCJvdGhlclwiLFxuICAgICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG1vdmllczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiJHRpdGxlXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH1cblxuICAgIC8qKlxuICAgIFRpY2tldDogRmFjZXRlZCBTZWFyY2hcblxuICAgIFBsZWFzZSBhcHBlbmQgdGhlIHNraXBTdGFnZSwgbGltaXRTdGFnZSwgYW5kIGZhY2V0U3RhZ2UgdG8gdGhlIHF1ZXJ5UGlwZWxpbmVcbiAgICAoaW4gdGhhdCBvcmRlcikuIFlvdSBjYW4gYWNjb21wbGlzaCB0aGlzIGJ5IGFkZGluZyB0aGUgc3RhZ2VzIGRpcmVjdGx5IHRvXG4gICAgdGhlIHF1ZXJ5UGlwZWxpbmUuXG5cbiAgICBUaGUgcXVlcnlQaXBlbGluZSBpcyBhIEphdmFzY3JpcHQgYXJyYXksIHNvIHlvdSBjYW4gdXNlIHB1c2goKSBvciBjb25jYXQoKVxuICAgIHRvIGNvbXBsZXRlIHRoaXMgdGFzaywgYnV0IHlvdSBtaWdodCBoYXZlIHRvIGRvIHNvbWV0aGluZyBhYm91dCBgY29uc3RgLlxuICAgICovXG5cbiAgICBjb25zdCBxdWVyeVBpcGVsaW5lID0gW1xuICAgICAgbWF0Y2hTdGFnZSxcbiAgICAgIHNvcnRTdGFnZSxcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBGYWNldGVkIFNlYXJjaFxuICAgICAgLy8gQWRkIHRoZSBzdGFnZXMgdG8gcXVlcnlQaXBlbGluZSBpbiB0aGUgY29ycmVjdCBvcmRlci5cbiAgICBdXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IChhd2FpdCBtb3ZpZXMuYWdncmVnYXRlKHF1ZXJ5UGlwZWxpbmUpKS5uZXh0KClcbiAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgKGF3YWl0IG1vdmllcy5hZ2dyZWdhdGUoY291bnRpbmdQaXBlbGluZSkpLm5leHQoKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0cyxcbiAgICAgICAgLi4uY291bnQsXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IFwiUmVzdWx0cyB0b28gbGFyZ2UsIGJlIG1vcmUgcmVzdHJpY3RpdmUgaW4gZmlsdGVyXCIgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBhbmQgcmV0dXJucyBtb3ZpZXMgYnkgY291bnRyeS5cbiAgICogUmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cywgZWFjaCBvYmplY3QgY29udGFpbnMgYSB0aXRsZSBhbmQgYW4gX2lkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVycyAtIFRoZSBzZWFyY2ggcGFyYW1ldGVycyB0byB1c2UgaW4gdGhlIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIFRoZSBwYWdlIG9mIG1vdmllcyB0byByZXRyaWV2ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1vdmllc1BlclBhZ2UgLSBUaGUgbnVtYmVyIG9mIG1vdmllcyB0byBkaXNwbGF5IHBlciBwYWdlLlxuICAgKiBAcmV0dXJucyB7R2V0TW92aWVzUmVzdWx0fSBBbiBvYmplY3Qgd2l0aCBtb3ZpZSByZXN1bHRzIGFuZCB0b3RhbCByZXN1bHRzXG4gICAqIHRoYXQgd291bGQgbWF0Y2ggdGhpcyBxdWVyeVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldE1vdmllcyh7XG4gICAgLy8gaGVyZSdzIHdoZXJlIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMgYXJlIHNldCBmb3IgdGhlIGdldE1vdmllcyBtZXRob2RcbiAgICBmaWx0ZXJzID0gbnVsbCxcbiAgICBwYWdlID0gMCxcbiAgICBtb3ZpZXNQZXJQYWdlID0gMjAsXG4gIH0gPSB7fSkge1xuICAgIGxldCBxdWVyeVBhcmFtcyA9IHt9XG4gICAgaWYgKGZpbHRlcnMpIHtcbiAgICAgIGlmIChcInRleHRcIiBpbiBmaWx0ZXJzKSB7XG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy50ZXh0U2VhcmNoUXVlcnkoZmlsdGVyc1tcInRleHRcIl0pXG4gICAgICB9IGVsc2UgaWYgKFwiY2FzdFwiIGluIGZpbHRlcnMpIHtcbiAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLmNhc3RTZWFyY2hRdWVyeShmaWx0ZXJzW1wiY2FzdFwiXSlcbiAgICAgIH0gZWxzZSBpZiAoXCJnZW5yZVwiIGluIGZpbHRlcnMpIHtcbiAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLmdlbnJlU2VhcmNoUXVlcnkoZmlsdGVyc1tcImdlbnJlXCJdKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB7IHF1ZXJ5ID0ge30sIHByb2plY3QgPSB7fSwgc29ydCA9IERFRkFVTFRfU09SVCB9ID0gcXVlcnlQYXJhbXNcbiAgICBsZXQgY3Vyc29yXG4gICAgdHJ5IHtcbiAgICAgIGN1cnNvciA9IGF3YWl0IG1vdmllc1xuICAgICAgICAuZmluZChxdWVyeSlcbiAgICAgICAgLnByb2plY3QocHJvamVjdClcbiAgICAgICAgLnNvcnQoc29ydClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gaXNzdWUgZmluZCBjb21tYW5kLCAke2V9YClcbiAgICAgIHJldHVybiB7IG1vdmllc0xpc3Q6IFtdLCB0b3RhbE51bU1vdmllczogMCB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgVGlja2V0OiBQYWdpbmdcblxuICAgIEJlZm9yZSB0aGlzIG1ldGhvZCByZXR1cm5zIGJhY2sgdG8gdGhlIEFQSSwgdXNlIHRoZSBcIm1vdmllc1BlclBhZ2VcIiBhbmRcbiAgICBcInBhZ2VcIiBhcmd1bWVudHMgdG8gZGVjaWRlIHRoZSBtb3ZpZXMgdG8gZGlzcGxheS5cblxuICAgIFBhZ2luZyBjYW4gYmUgaW1wbGVtZW50ZWQgYnkgdXNpbmcgdGhlIHNraXAoKSBhbmQgbGltaXQoKSBjdXJzb3IgbWV0aG9kcy5cbiAgICAqL1xuXG4gICAgLy8gVE9ETyBUaWNrZXQ6IFBhZ2luZ1xuICAgIC8vIFVzZSB0aGUgY3Vyc29yIHRvIG9ubHkgcmV0dXJuIHRoZSBtb3ZpZXMgdGhhdCBiZWxvbmcgb24gdGhlIGN1cnJlbnQgcGFnZVxuICAgIGNvbnN0IGRpc3BsYXlDdXJzb3IgPSBjdXJzb3IubGltaXQobW92aWVzUGVyUGFnZSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtb3ZpZXNMaXN0ID0gYXdhaXQgZGlzcGxheUN1cnNvci50b0FycmF5KClcbiAgICAgIGNvbnN0IHRvdGFsTnVtTW92aWVzID0gcGFnZSA9PT0gMCA/IGF3YWl0IG1vdmllcy5jb3VudERvY3VtZW50cyhxdWVyeSkgOiAwXG5cbiAgICAgIHJldHVybiB7IG1vdmllc0xpc3QsIHRvdGFsTnVtTW92aWVzIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgVW5hYmxlIHRvIGNvbnZlcnQgY3Vyc29yIHRvIGFycmF5IG9yIHByb2JsZW0gY291bnRpbmcgZG9jdW1lbnRzLCAke2V9YCxcbiAgICAgIClcbiAgICAgIHJldHVybiB7IG1vdmllc0xpc3Q6IFtdLCB0b3RhbE51bU1vdmllczogMCB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBtb3ZpZSBieSBpdHMgaWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGRlc2lyZWQgbW92aWUgaWQsIHRoZSBfaWQgaW4gTW9uZ29cbiAgICogQHJldHVybnMge01mbGl4TW92aWUgfCBudWxsfSBSZXR1cm5zIGVpdGhlciBhIHNpbmdsZSBtb3ZpZSBvciBub3RoaW5nXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0TW92aWVCeUlEKGlkKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBHZXQgQ29tbWVudHNcblxuICAgICAgR2l2ZW4gYSBtb3ZpZSBJRCwgYnVpbGQgYW4gQWdncmVnYXRpb24gUGlwZWxpbmUgdG8gcmV0cmlldmUgdGhlIGNvbW1lbnRzXG4gICAgICBtYXRjaGluZyB0aGF0IG1vdmllJ3MgSUQuXG5cbiAgICAgIFRoZSAkbWF0Y2ggc3RhZ2UgaXMgYWxyZWFkeSBjb21wbGV0ZWQuIFlvdSB3aWxsIG5lZWQgdG8gYWRkIGEgJGxvb2t1cFxuICAgICAgc3RhZ2UgdGhhdCBzZWFyY2hlcyB0aGUgYGNvbW1lbnRzYCBjb2xsZWN0aW9uIGZvciB0aGUgY29ycmVjdCBjb21tZW50cy5cbiAgICAgICovXG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBHZXQgQ29tbWVudHNcbiAgICAgIC8vIEltcGxlbWVudCB0aGUgcmVxdWlyZWQgcGlwZWxpbmUuXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgX2lkOiBPYmplY3RJZChpZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIHJldHVybiBhd2FpdCBtb3ZpZXMuYWdncmVnYXRlKHBpcGVsaW5lKS5uZXh0KClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvKipcbiAgICAgIFRpY2tldDogRXJyb3IgSGFuZGxpbmdcblxuICAgICAgSGFuZGxlIHRoZSBlcnJvciB0aGF0IG9jY3VycyB3aGVuIGFuIGludmFsaWQgSUQgaXMgcGFzc2VkIHRvIHRoaXMgbWV0aG9kLlxuICAgICAgV2hlbiB0aGlzIHNwZWNpZmljIGVycm9yIGlzIHRocm93biwgdGhlIG1ldGhvZCBzaG91bGQgcmV0dXJuIGBudWxsYC5cbiAgICAgICovXG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBFcnJvciBIYW5kbGluZ1xuICAgICAgLy8gQ2F0Y2ggdGhlIEludmFsaWRJZCBlcnJvciBieSBzdHJpbmcgbWF0Y2hpbmcsIGFuZCB0aGVuIGhhbmRsZSBpdC5cbiAgICAgIGNvbnNvbGUuZXJyb3IoYFNvbWV0aGluZyB3ZW50IHdyb25nIGluIGdldE1vdmllQnlJRDogJHtlfWApXG4gICAgICB0aHJvdyBlXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHBhcnNlZCBxdWVyeSwgc29ydCwgYW5kIHByb2plY3QgYnVuZGxlLlxuICogQHR5cGVkZWYgUXVlcnlQYXJhbXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBxdWVyeSAtIFRoZSBzcGVjaWZpZWQgcXVlcnksIHRyYW5zZm9ybWVkIGFjY29yZGluZ2x5XG4gKiBAcHJvcGVydHkge2FueVtdfSBzb3J0IC0gVGhlIHNwZWNpZmllZCBzb3J0XG4gKiBAcHJvcGVydHkge09iamVjdH0gcHJvamVjdCAtIFRoZSBzcGVjaWZpZWQgcHJvamVjdCwgaWYgYW55XG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgc2luZ2xlIGNvdW50cnkgcmVzdWx0XG4gKiBAdHlwZWRlZiBDb3VudHJ5UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gT2JqZWN0SUQgLSBUaGUgT2JqZWN0SUQgb2YgdGhlIG1vdmllXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGl0bGUgLSBUaGUgdGl0bGUgb2YgdGhlIG1vdmllXG4gKi9cblxuLyoqXG4gKiBBIE1vdmllIGZyb20gbWZsaXhcbiAqIEB0eXBlZGVmIE1mbGl4TW92aWVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBfaWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0aXRsZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHllYXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBydW50aW1lXG4gKiBAcHJvcGVydHkge0RhdGV9IHJlbGVhc2VkXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjYXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWV0YWNyaXRpY2RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwb3N0ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwbG90XG4gKiBAcHJvcGVydHkge3N0cmluZ30gZnVsbHBsb3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfERhdGV9IGxhc3R1cGRhdGVkXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gbGFuZ3VhZ2VzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBkaXJlY3RvcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHdyaXRlcnNcbiAqIEBwcm9wZXJ0eSB7SU1EQn0gaW1kYlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gY291bnRyaWVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSByYXRlZFxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZ2VucmVzXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjb21tZW50c1xuICovXG5cbi8qKlxuICogSU1EQiBzdWJkb2N1bWVudFxuICogQHR5cGVkZWYgSU1EQlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJhdGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHZvdGVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gaWRcbiAqL1xuXG4vKipcbiAqIFJlc3VsdCBzZXQgZm9yIGdldE1vdmllcyBtZXRob2RcbiAqIEB0eXBlZGVmIEdldE1vdmllc1Jlc3VsdFxuICogQHByb3BlcnR5IHtNZmxpeE1vdmllc1tdfSBtb3ZpZXNMaXN0XG4gKiBAcHJvcGVydHkge251bWJlcn0gdG90YWxOdW1SZXN1bHRzXG4gKi9cblxuLyoqXG4gKiBGYWNldGVkIFNlYXJjaCBSZXR1cm5cbiAqXG4gKiBUaGUgdHlwZSBvZiByZXR1cm4gZnJvbSBmYWNldGVkIHNlYXJjaC4gSXQgd2lsbCBiZSBhIHNpbmdsZSBkb2N1bWVudCB3aXRoXG4gKiAzIGZpZWxkczogcmF0aW5nLCBydW50aW1lLCBhbmQgbW92aWVzLlxuICogQHR5cGVkZWYgRmFjZXRlZFNlYXJjaFJldHVyblxuICogQHByb3BlcnR5IHtvYmplY3R9IHJhdGluZ1xuICogQHByb3BlcnR5IHtvYmplY3R9IHJ1bnRpbWVcbiAqIEBwcm9wZXJ0eSB7TUZsaXhNb3ZpZVtdfW1vdmllc1xuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQStCO0FBQUE7QUFFL0IsSUFBSUEsTUFBTTtBQUNWLElBQUlDLEtBQUs7QUFDVCxJQUFNQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFBQSxJQUVwQ0MsU0FBUztFQUFBO0lBQUE7RUFBQTtFQUFBO0lBQUE7SUFBQTtNQUFBLDhGQUM1QixpQkFBc0JDLElBQUk7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQSxLQUNwQkosTUFBTTtrQkFBQTtrQkFBQTtnQkFBQTtnQkFBQTtjQUFBO2dCQUFBO2dCQUFBO2dCQUFBLE9BSU1JLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDO2NBQUE7Z0JBQTNDUCxLQUFLO2dCQUFBO2dCQUFBLE9BQ1VHLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxRQUFRLENBQUM7Y0FBQTtnQkFBakVULE1BQU07Z0JBQ04sSUFBSSxDQUFDQSxNQUFNLEdBQUdBLE1BQU0sRUFBQztnQkFBQTtnQkFBQTtjQUFBO2dCQUFBO2dCQUFBO2dCQUVyQlUsT0FBTyxDQUFDQyxLQUFLLDhFQUVaO2NBQUE7Y0FBQTtnQkFBQTtZQUFBO1VBQUE7UUFBQTtNQUFBLENBRUo7TUFBQTtRQUFBO01BQUE7TUFBQTtJQUFBO0lBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUpFO0lBQUE7SUFBQTtNQUFBLHNHQUtBO1FBQUE7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTtnQkFBQSxPQUN5QlYsS0FBSyxD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","map":{"version":3,"names":["movies","mflix","DEFAULT_SORT","MoviesDAO","conn","db","process","env","MFLIX_NS","collection","console","error","command","connectionStatus","roleInfo","authInfo","authenticatedUserRoles","s","serverConfig","options","poolSize","wtimeout","response","countries","find","limit","cursor","toArray","text","query","$text","$search","meta_score","$meta","sort","project","score","cast","searchCast","Array","isArray","split","$in","genre","searchGenre","filters","page","moviesPerPage","Error","matchStage","$match","sortStage","$sort","countingPipeline","$count","skipStage","$skip","limitStage","$limit","facetStage","$facet","runtime","$bucket","groupBy","boundaries","output","count","$sum","rating","$addFields","title","queryPipeline","aggregate","next","results","queryParams","textSearchQuery","castSearchQuery","genreSearchQuery","moviesList","totalNumMovies","displayCursor","countDocuments","id","pipeline","_id","ObjectId"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\dao\\","sources":["moviesDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet movies\nlet mflix\nconst DEFAULT_SORT = [[\"tomatoes.viewer.numReviews\", -1]]\n\nexport default class MoviesDAO {\n  static async injectDB(conn) {\n    if (movies) {\n      return\n    }\n    try {\n      mflix = await conn.db(process.env.MFLIX_NS)\n      movies = await conn.db(process.env.MFLIX_NS).collection(\"movies\")\n      this.movies = movies // this is only for testing\n    } catch (e) {\n      console.error(\n        `Unable to establish a collection handle in moviesDAO: ${e}`,\n      )\n    }\n  }\n\n  /**\n   * Retrieves the connection pool size, write concern and user roles on the\n   * current client.\n   * @returns {Promise<ConfigurationResult>} An object with configuration details.\n   */\n  static async getConfiguration() {\n    const roleInfo = await mflix.command({ connectionStatus: 1 })\n    const authInfo = roleInfo.authInfo.authenticatedUserRoles[0]\n    const { poolSize, wtimeout } = movies.s.db.serverConfig.s.options\n    let response = {\n      poolSize,\n      wtimeout,\n      authInfo,\n    }\n    return response\n  }\n\n  /**\n   * Finds and returns movies originating from one or more countries.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {string[]} countries - The list of countries.\n   * @returns {Promise<CountryResult>} A promise that will resolve to a list of CountryResults.\n   */\n  static async getMoviesByCountry(countries) {\n    /**\n    Ticket: Projection\n\n    Write a query that matches movies with the countries in the \"countries\"\n    list, but only returns the title and _id of each movie.\n\n    Remember that in MongoDB, the $in operator can be used with a list to\n    match one or more values of a specific field.\n    */\n\n    let cursor\n    try {\n      // TODO Ticket: Projection\n      // Find movies matching the \"countries\" list, but only return the title\n      // and _id. Do not put a limit in your own implementation, the limit\n      // here is only included to avoid sending 46000 documents down the\n      // wire.\n      cursor = await movies.find().limit(1)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return []\n    }\n\n    return cursor.toArray()\n  }\n\n  /**\n   * Finds and returns movies matching a given text in their title or description.\n   * @param {string} text - The text to match with.\n   * @returns {QueryParams} The QueryParams for text search\n   */\n  static textSearchQuery(text) {\n    const query = { $text: { $search: text } }\n    const meta_score = { $meta: \"textScore\" }\n    const sort = [[\"score\", meta_score]]\n    const project = { score: meta_score }\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies including one or more cast members.\n   * @param {string[]} cast - The cast members to match with.\n   * @returns {QueryParams} The QueryParams for cast search\n   */\n  static castSearchQuery(cast) {\n    const searchCast = Array.isArray(cast) ? cast : cast.split(\", \")\n\n    const query = { cast: { $in: searchCast } }\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   * Finds and returns movies matching a one or more genres.\n   * @param {string[]} genre - The genres to match with.\n   * @returns {QueryParams} The QueryParams for genre search\n   */\n  static genreSearchQuery(genre) {\n    /**\n    Ticket: Text and Subfield Search\n\n    Given an array of one or more genres, construct a query that searches\n    MongoDB for movies with that genre.\n    */\n\n    const searchGenre = Array.isArray(genre) ? genre : genre.split(\", \")\n\n    // TODO Ticket: Text and Subfield Search\n    // Construct a query that will search for the chosen genre.\n    const query = {}\n    const project = {}\n    const sort = DEFAULT_SORT\n\n    return { query, project, sort }\n  }\n\n  /**\n   *\n   * @param {Object} filters - The search parameter to use in the query. Comes\n   * in the form of `{cast: { $in: [...castMembers]}}`\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {FacetedSearchReturn} FacetedSearchReturn\n   */\n  static async facetedSearch({\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    if (!filters || !filters.cast) {\n      throw new Error(\"Must specify cast members to filter by.\")\n    }\n    const matchStage = { $match: filters }\n    const sortStage = { $sort: { \"tomatoes.viewer.numReviews\": -1 } }\n    const countingPipeline = [matchStage, sortStage, { $count: \"count\" }]\n    const skipStage = { $skip: moviesPerPage * page }\n    const limitStage = { $limit: moviesPerPage }\n    const facetStage = {\n      $facet: {\n        runtime: [\n          {\n            $bucket: {\n              groupBy: \"$runtime\",\n              boundaries: [0, 60, 90, 120, 180],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        rating: [\n          {\n            $bucket: {\n              groupBy: \"$metacritic\",\n              boundaries: [0, 50, 70, 90, 100],\n              default: \"other\",\n              output: {\n                count: { $sum: 1 },\n              },\n            },\n          },\n        ],\n        movies: [\n          {\n            $addFields: {\n              title: \"$title\",\n            },\n          },\n        ],\n      },\n    }\n\n    /**\n    Ticket: Faceted Search\n\n    Please append the skipStage, limitStage, and facetStage to the queryPipeline\n    (in that order). You can accomplish this by adding the stages directly to\n    the queryPipeline.\n\n    The queryPipeline is a Javascript array, so you can use push() or concat()\n    to complete this task, but you might have to do something about `const`.\n    */\n\n    const queryPipeline = [\n      matchStage,\n      sortStage,\n      // TODO Ticket: Faceted Search\n      // Add the stages to queryPipeline in the correct order.\n    ]\n\n    try {\n      const results = await (await movies.aggregate(queryPipeline)).next()\n      const count = await (await movies.aggregate(countingPipeline)).next()\n      return {\n        ...results,\n        ...count,\n      }\n    } catch (e) {\n      return { error: \"Results too large, be more restrictive in filter\" }\n    }\n  }\n\n  /**\n   * Finds and returns movies by country.\n   * Returns a list of objects, each object contains a title and an _id.\n   * @param {Object} filters - The search parameters to use in the query.\n   * @param {number} page - The page of movies to retrieve.\n   * @param {number} moviesPerPage - The number of movies to display per page.\n   * @returns {GetMoviesResult} An object with movie results and total results\n   * that would match this query\n   */\n  static async getMovies({\n    // here's where the default parameters are set for the getMovies method\n    filters = null,\n    page = 0,\n    moviesPerPage = 20,\n  } = {}) {\n    let queryParams = {}\n    if (filters) {\n      if (\"text\" in filters) {\n        queryParams = this.textSearchQuery(filters[\"text\"])\n      } else if (\"cast\" in filters) {\n        queryParams = this.castSearchQuery(filters[\"cast\"])\n      } else if (\"genre\" in filters) {\n        queryParams = this.genreSearchQuery(filters[\"genre\"])\n      }\n    }\n\n    let { query = {}, project = {}, sort = DEFAULT_SORT } = queryParams\n    let cursor\n    try {\n      cursor = await movies\n        .find(query)\n        .project(project)\n        .sort(sort)\n    } catch (e) {\n      console.error(`Unable to issue find command, ${e}`)\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n\n    /**\n    Ticket: Paging\n\n    Before this method returns back to the API, use the \"moviesPerPage\" and\n    \"page\" arguments to decide the movies to display.\n\n    Paging can be implemented by using the skip() and limit() cursor methods.\n    */\n\n    // TODO Ticket: Paging\n    // Use the cursor to only return the movies that belong on the current page\n    const displayCursor = cursor.limit(moviesPerPage)\n\n    try {\n      const moviesList = await displayCursor.toArray()\n      const totalNumMovies = page === 0 ? await movies.countDocuments(query) : 0\n\n      return { moviesList, totalNumMovies }\n    } catch (e) {\n      console.error(\n        `Unable to convert cursor to array or problem counting documents, ${e}`,\n      )\n      return { moviesList: [], totalNumMovies: 0 }\n    }\n  }\n\n  /**\n   * Gets a movie by its id\n   * @param {string} id - The desired movie id, the _id in Mongo\n   * @returns {MflixMovie | null} Returns either a single movie or nothing\n   */\n  static async getMovieByID(id) {\n    try {\n      /**\n      Ticket: Get Comments\n\n      Given a movie ID, build an Aggregation Pipeline to retrieve the comments\n      matching that movie's ID.\n\n      The $match stage is already completed. You will need to add a $lookup\n      stage that searches the `comments` collection for the correct comments.\n      */\n\n      // TODO Ticket: Get Comments\n      // Implement the required pipeline.\n      const pipeline = [\n        {\n          $match: {\n            _id: ObjectId(id)\n          }\n        }\n      ]\n      return await movies.aggregate(pipeline).next()\n    } catch (e) {\n      /**\n      Ticket: Error Handling\n\n      Handle the error that occurs when an invalid ID is passed to this method.\n      When this specific error is thrown, the method should return `null`.\n      */\n\n      // TODO Ticket: Error Handling\n      // Catch the InvalidId error by string matching, and then handle it.\n      console.error(`Something went wrong in getMovieByID: ${e}`)\n      throw e\n    }\n  }\n}\n\n/**\n * This is a parsed query, sort, and project bundle.\n * @typedef QueryParams\n * @property {Object} query - The specified query, transformed accordingly\n * @property {any[]} sort - The specified sort\n * @property {Object} project - The specified project, if any\n */\n\n/**\n * Represents a single country result\n * @typedef CountryResult\n * @property {string} ObjectID - The ObjectID of the movie\n * @property {string} title - The title of the movie\n */\n\n/**\n * A Movie from mflix\n * @typedef MflixMovie\n * @property {string} _id\n * @property {string} title\n * @property {number} year\n * @property {number} runtime\n * @property {Date} released\n * @property {string[]} cast\n * @property {number} metacriticd\n * @property {string} poster\n * @property {string} plot\n * @property {string} fullplot\n * @property {string|Date} lastupdated\n * @property {string} type\n * @property {string[]} languages\n * @property {string[]} directors\n * @property {string[]} writers\n * @property {IMDB} imdb\n * @property {string[]} countries\n * @property {string[]} rated\n * @property {string[]} genres\n * @property {string[]} comments\n */\n\n/**\n * IMDB subdocument\n * @typedef IMDB\n * @property {number} rating\n * @property {number} votes\n * @property {number} id\n */\n\n/**\n * Result set for getMovies method\n * @typedef GetMoviesResult\n * @property {MflixMovies[]} moviesList\n * @property {number} totalNumResults\n */\n\n/**\n * Faceted Search Return\n *\n * The type of return from faceted search. It will be a single document with\n * 3 fields: rating, runtime, and movies.\n * @typedef FacetedSearchReturn\n * @property {object} rating\n * @property {object} runtime\n * @property {MFlixMovie[]}movies\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\comments.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\nvar _commentsDAO = _interopRequireDefault(require(\"../dao/commentsDAO\"));\nvar _moviesDAO = _interopRequireDefault(require(\"../dao/moviesDAO\"));\nvar _users = require(\"./users.controller\");\nvar _bson = require(\"bson\");\nvar CommentsController = /*#__PURE__*/function () {\n  function CommentsController() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsController);\n  }\n  (0, _createClass2[\"default\"])(CommentsController, null, [{\n    key: \"apiPostComment\",\n    value: function () {\n      var _apiPostComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(req, res, next) {\n        var userJwt, user, error, movieId, comment, date, commentResponse, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context.sent;\n                error = user.error;\n                if (!error) {\n                  _context.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context.abrupt(\"return\");\n              case 9:\n                movieId = req.body.movie_id;\n                comment = req.body.comment;\n                date = new Date();\n                _context.next = 14;\n                return _commentsDAO[\"default\"].addComment((0, _bson.ObjectId)(movieId), user, comment, date);\n              case 14:\n                commentResponse = _context.sent;\n                _context.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 17:\n                updatedComments = _context.sent;\n                res.json({\n                  status: \"success\",\n                  comments: updatedComments.comments\n                });\n                _context.next = 24;\n                break;\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](0);\n                res.status(500).json({\n                  e: _context.t0\n                });\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 21]]);\n      }));\n      function apiPostComment(_x, _x2, _x3) {\n        return _apiPostComment.apply(this, arguments);\n      }\n      return apiPostComment;\n    }()\n  }, {\n    key: \"apiUpdateComment\",\n    value: function () {\n      var _apiUpdateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(req, res, next) {\n        var userJwt, user, error, commentId, text, date, commentResponse, movieId, updatedComments;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context2.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context2.sent;\n                error = user.error;\n                if (!error) {\n                  _context2.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context2.abrupt(\"return\");\n              case 9:\n                commentId = req.body.comment_id;\n                text = req.body.updated_comment;\n                date = new Date();\n                _context2.next = 14;\n                return _commentsDAO[\"default\"].updateComment((0, _bson.ObjectId)(commentId), user.email, text, date);\n              case 14:\n                commentResponse = _context2.sent;\n                error = commentResponse.error;\n                if (error) {\n                  res.status(400).json({\n                    error: error\n                  });\n                }\n                if (!(commentResponse.modifiedCount === 0)) {\n                  _context2.next = 19;\n                  break;\n                }\n                throw new Error(\"unable to update comment - user may not be original poster\");\n              case 19:\n                movieId = req.body.movie_id;\n                _context2.next = 22;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 22:\n                updatedComments = _context2.sent;\n                res.json({\n                  comments: updatedComments.comments\n                });\n                _context2.next = 29;\n                break;\n              case 26:\n                _context2.prev = 26;\n                _context2.t0 = _context2[\"catch\"](0);\n                res.status(500).json({\n                  e: _context2.t0\n                });\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 26]]);\n      }));\n      function apiUpdateComment(_x4, _x5, _x6) {\n        return _apiUpdateComment.apply(this, arguments);\n      }\n      return apiUpdateComment;\n    }()\n  }, {\n    key: \"apiDeleteComment\",\n    value: function () {\n      var _apiDeleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(req, res, next) {\n        var userJwt, user, error, commentId, userEmail, commentResponse, movieId, _yield$MoviesDAO$getM, comments;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context3.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context3.sent;\n                error = user.error;\n                if (!error) {\n                  _context3.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context3.abrupt(\"return\");\n              case 9:\n                commentId = req.body.comment_id;\n                userEmail = user.email;\n                _context3.next = 13;\n                return _commentsDAO[\"default\"].deleteComment((0, _bson.ObjectId)(commentId), userEmail);\n              case 13:\n                commentResponse = _context3.sent;\n                movieId = req.body.movie_id;\n                _context3.next = 17;\n                return _moviesDAO[\"default\"].getMovieByID(movieId);\n              case 17:\n                _yield$MoviesDAO$getM = _context3.sent;\n                comments = _yield$MoviesDAO$getM.comments;\n                res.json({\n                  comments: comments\n                });\n                _context3.next = 25;\n                break;\n              case 22:\n                _context3.prev = 22;\n                _context3.t0 = _context3[\"catch\"](0);\n                res.status(500).json({\n                  e: _context3.t0\n                });\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 22]]);\n      }));\n      function apiDeleteComment(_x7, _x8, _x9) {\n        return _apiDeleteComment.apply(this, arguments);\n      }\n      return apiDeleteComment;\n    }()\n  }, {\n    key: \"apiCommentReport\",\n    value: function () {\n      var _apiCommentReport = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res, next) {\n        var userJwt, user, error, report;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context4.next = 4;\n                return _users.User.decoded(userJwt);\n              case 4:\n                user = _context4.sent;\n                error = user.error;\n                if (!error) {\n                  _context4.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context4.abrupt(\"return\");\n              case 9:\n                if (!_usersDAO[\"default\"].checkAdmin(user.email)) {\n                  _context4.next = 15;\n                  break;\n                }\n                _context4.next = 12;\n                return _commentsDAO[\"default\"].mostActiveCommenters();\n              case 12:\n                report = _context4.sent;\n                res.json({\n                  report: report\n                });\n                return _context4.abrupt(\"return\");\n              case 15:\n                res.status(401).json({\n                  status: \"fail\"\n                });\n                _context4.next = 21;\n                break;\n              case 18:\n                _context4.prev = 18;\n                _context4.t0 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  e: _context4.t0\n                });\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 18]]);\n      }));\n      function apiCommentReport(_x10, _x11, _x12) {\n        return _apiCommentReport.apply(this, arguments);\n      }\n      return apiCommentReport;\n    }()\n  }]);\n  return CommentsController;\n}();\nexports[\"default\"] = CommentsController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb21tZW50c0NvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlckp3dCIsImdldCIsInNsaWNlIiwibGVuZ3RoIiwiVXNlciIsImRlY29kZWQiLCJ1c2VyIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibW92aWVJZCIsImJvZHkiLCJtb3ZpZV9pZCIsImNvbW1lbnQiLCJkYXRlIiwiRGF0ZSIsIkNvbW1lbnRzREFPIiwiYWRkQ29tbWVudCIsIk9iamVjdElkIiwiY29tbWVudFJlc3BvbnNlIiwiTW92aWVzREFPIiwiZ2V0TW92aWVCeUlEIiwidXBkYXRlZENvbW1lbnRzIiwiY29tbWVudHMiLCJlIiwiY29tbWVudElkIiwiY29tbWVudF9pZCIsInRleHQiLCJ1cGRhdGVkX2NvbW1lbnQiLCJ1cGRhdGVDb21tZW50IiwiZW1haWwiLCJtb2RpZmllZENvdW50IiwiRXJyb3IiLCJ1c2VyRW1haWwiLCJkZWxldGVDb21tZW50IiwiVXNlcnNEQU8iLCJjaGVja0FkbWluIiwibW9zdEFjdGl2ZUNvbW1lbnRlcnMiLCJyZXBvcnQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4LS1qc1xcc3JjXFxhcGlcXCIsInNvdXJjZXMiOlsiY29tbWVudHMuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlcnNEQU8gZnJvbSBcIi4uL2Rhby91c2Vyc0RBT1wiXG5pbXBvcnQgQ29tbWVudHNEQU8gZnJvbSBcIi4uL2Rhby9jb21tZW50c0RBT1wiXG5pbXBvcnQgTW92aWVzREFPIGZyb20gXCIuLi9kYW8vbW92aWVzREFPXCJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi91c2Vycy5jb250cm9sbGVyXCJcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcImJzb25cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tZW50c0NvbnRyb2xsZXIge1xuICBzdGF0aWMgYXN5bmMgYXBpUG9zdENvbW1lbnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgbW92aWVJZCA9IHJlcS5ib2R5Lm1vdmllX2lkXG4gICAgICBjb25zdCBjb21tZW50ID0gcmVxLmJvZHkuY29tbWVudFxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcblxuICAgICAgY29uc3QgY29tbWVudFJlc3BvbnNlID0gYXdhaXQgQ29tbWVudHNEQU8uYWRkQ29tbWVudChcbiAgICAgICAgT2JqZWN0SWQobW92aWVJZCksXG4gICAgICAgIHVzZXIsXG4gICAgICAgIGNvbW1lbnQsXG4gICAgICAgIGRhdGUsXG4gICAgICApXG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21tZW50cyA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZUJ5SUQobW92aWVJZClcblxuICAgICAgcmVzLmpzb24oeyBzdGF0dXM6IFwic3VjY2Vzc1wiLCBjb21tZW50czogdXBkYXRlZENvbW1lbnRzLmNvbW1lbnRzIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaVVwZGF0ZUNvbW1lbnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tbWVudElkID0gcmVxLmJvZHkuY29tbWVudF9pZFxuICAgICAgY29uc3QgdGV4dCA9IHJlcS5ib2R5LnVwZGF0ZWRfY29tbWVudFxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcblxuICAgICAgY29uc3QgY29tbWVudFJlc3BvbnNlID0gYXdhaXQgQ29tbWVudHNEQU8udXBkYXRlQ29tbWVudChcbiAgICAgICAgT2JqZWN0SWQoY29tbWVudElkKSxcbiAgICAgICAgdXNlci5lbWFpbCxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgZGF0ZSxcbiAgICAgIClcblxuICAgICAgdmFyIHsgZXJyb3IgfSA9IGNvbW1lbnRSZXNwb25zZVxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbW1lbnRSZXNwb25zZS5tb2RpZmllZENvdW50ID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcInVuYWJsZSB0byB1cGRhdGUgY29tbWVudCAtIHVzZXIgbWF5IG5vdCBiZSBvcmlnaW5hbCBwb3N0ZXJcIixcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBtb3ZpZUlkID0gcmVxLmJvZHkubW92aWVfaWRcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21tZW50cyA9IGF3YWl0IE1vdmllc0RBTy5nZXRNb3ZpZUJ5SUQobW92aWVJZClcblxuICAgICAgcmVzLmpzb24oeyBjb21tZW50czogdXBkYXRlZENvbW1lbnRzLmNvbW1lbnRzIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFwaURlbGV0ZUNvbW1lbnQocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckp3dCA9IHJlcS5nZXQoXCJBdXRob3JpemF0aW9uXCIpLnNsaWNlKFwiQmVhcmVyIFwiLmxlbmd0aClcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tbWVudElkID0gcmVxLmJvZHkuY29tbWVudF9pZFxuICAgICAgY29uc3QgdXNlckVtYWlsID0gdXNlci5lbWFpbFxuICAgICAgY29uc3QgY29tbWVudFJlc3BvbnNlID0gYXdhaXQgQ29tbWVudHNEQU8uZGVsZXRlQ29tbWVudChcbiAgICAgICAgT2JqZWN0SWQoY29tbWVudElkKSxcbiAgICAgICAgdXNlckVtYWlsLFxuICAgICAgKVxuXG4gICAgICBjb25zdCBtb3ZpZUlkID0gcmVxLmJvZHkubW92aWVfaWRcblxuICAgICAgY29uc3QgeyBjb21tZW50cyB9ID0gYXdhaXQgTW92aWVzREFPLmdldE1vdmllQnlJRChtb3ZpZUlkKVxuICAgICAgcmVzLmpzb24oeyBjb21tZW50cyB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZSB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhcGlDb21tZW50UmVwb3J0KHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJKd3QgPSByZXEuZ2V0KFwiQXV0aG9yaXphdGlvblwiKS5zbGljZShcIkJlYXJlciBcIi5sZW5ndGgpXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5kZWNvZGVkKHVzZXJKd3QpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gdXNlclxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChVc2Vyc0RBTy5jaGVja0FkbWluKHVzZXIuZW1haWwpKSB7XG4gICAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IENvbW1lbnRzREFPLm1vc3RBY3RpdmVDb21tZW50ZXJzKClcbiAgICAgICAgcmVzLmpzb24oeyByZXBvcnQgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgc3RhdHVzOiBcImZhaWxcIiB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZSB9KVxuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBK0IsSUFFVkEsa0JBQWtCO0VBQUE7SUFBQTtFQUFBO0VBQUE7SUFBQTtJQUFBO01BQUEsb0dBQ3JDLGlCQUE0QkMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7UUFBQTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBO2dCQUVoQ0MsT0FBTyxHQUFHSCxHQUFHLENBQUNJLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDO2dCQUFBO2dCQUFBLE9BQzdDQyxXQUFJLENBQUNDLE9BQU8sQ0FBQ0wsT0FBTyxDQUFDO2NBQUE7Z0JBQWxDTSxJQUFJO2dCQUNKQyxLQUFLLEdBQUtELElBQUksQ0FBZEMsS0FBSztnQkFBQSxLQUNQQSxLQUFLO2tCQUFBO2tCQUFBO2dCQUFBO2dCQUNQVCxHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FB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","map":{"version":3,"names":["CommentsController","req","res","next","userJwt","get","slice","length","User","decoded","user","error","status","json","movieId","body","movie_id","comment","date","Date","CommentsDAO","addComment","ObjectId","commentResponse","MoviesDAO","getMovieByID","updatedComments","comments","e","commentId","comment_id","text","updated_comment","updateComment","email","modifiedCount","Error","userEmail","deleteComment","UsersDAO","checkAdmin","mostActiveCommenters","report"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\api\\","sources":["comments.controller.js"],"sourcesContent":["import UsersDAO from \"../dao/usersDAO\"\nimport CommentsDAO from \"../dao/commentsDAO\"\nimport MoviesDAO from \"../dao/moviesDAO\"\nimport { User } from \"./users.controller\"\nimport { ObjectId } from \"bson\"\n\nexport default class CommentsController {\n  static async apiPostComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const movieId = req.body.movie_id\n      const comment = req.body.comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.addComment(\n        ObjectId(movieId),\n        user,\n        comment,\n        date,\n      )\n\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ status: \"success\", comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiUpdateComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const text = req.body.updated_comment\n      const date = new Date()\n\n      const commentResponse = await CommentsDAO.updateComment(\n        ObjectId(commentId),\n        user.email,\n        text,\n        date,\n      )\n\n      var { error } = commentResponse\n      if (error) {\n        res.status(400).json({ error })\n      }\n\n      if (commentResponse.modifiedCount === 0) {\n        throw new Error(\n          \"unable to update comment - user may not be original poster\",\n        )\n      }\n\n      const movieId = req.body.movie_id\n      const updatedComments = await MoviesDAO.getMovieByID(movieId)\n\n      res.json({ comments: updatedComments.comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiDeleteComment(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      const commentId = req.body.comment_id\n      const userEmail = user.email\n      const commentResponse = await CommentsDAO.deleteComment(\n        ObjectId(commentId),\n        userEmail,\n      )\n\n      const movieId = req.body.movie_id\n\n      const { comments } = await MoviesDAO.getMovieByID(movieId)\n      res.json({ comments })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n\n  static async apiCommentReport(req, res, next) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const user = await User.decoded(userJwt)\n      var { error } = user\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      if (UsersDAO.checkAdmin(user.email)) {\n        const report = await CommentsDAO.mostActiveCommenters()\n        res.json({ report })\n        return\n      }\n\n      res.status(401).json({ status: \"fail\" })\n    } catch (e) {\n      res.status(500).json({ e })\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\usersDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar users;\nvar sessions;\nvar UsersDAO = /*#__PURE__*/function () {\n  function UsersDAO() {\n    (0, _classCallCheck2[\"default\"])(this, UsersDAO);\n  }\n  (0, _createClass2[\"default\"])(UsersDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(users && sessions)) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"users\");\n              case 5:\n                users = _context.sent;\n                _context.next = 8;\n                return conn.db(process.env.MFLIX_NS).collection(\"sessions\");\n              case 8:\n                sessions = _context.sent;\n                _context.next = 14;\n                break;\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 11]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n    Ticket: User Management\n     For this ticket, you will need to implement the following five methods:\n     - getUser\n    - addUser\n    - loginUser\n    - logoutUser\n    - getUserSession\n     You can find these methods below this comment. Make sure to read the comments\n    in each method to better understand the implementation.\n     The method deleteUser is already given to you.\n    */\n    /**\n     * Finds a user in the `users` collection\n     * @param {string} email - The email of the desired user\n     * @returns {Object | null} Returns either a single user or nothing\n     */\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(email) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return users.findOne({\n                  someField: \"someValue\"\n                });\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function getUser(_x2) {\n        return _getUser.apply(this, arguments);\n      }\n      return getUser;\n    }()\n    /**\n     * Adds a user to the `users` collection\n     * @param {UserInfo} userInfo - The information of the user to add\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"addUser\",\n    value: function () {\n      var _addUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userInfo) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return users.insertOne({\n                  someField: \"someValue\"\n                });\n              case 3:\n                return _context3.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context3.prev = 6;\n                _context3.t0 = _context3[\"catch\"](0);\n                if (!String(_context3.t0).startsWith(\"MongoError: E11000 duplicate key error\")) {\n                  _context3.next = 10;\n                  break;\n                }\n                return _context3.abrupt(\"return\", {\n                  error: \"A user with the given email already exists.\"\n                });\n              case 10:\n                console.error(\"Error occurred while adding new user, \".concat(_context3.t0, \".\"));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 6]]);\n      }));\n      function addUser(_x3) {\n        return _addUser.apply(this, arguments);\n      }\n      return addUser;\n    }()\n    /**\n     * Adds a user to the `sessions` collection\n     * @param {string} email - The email of the user to login\n     * @param {string} jwt - A JSON web token representing the user's claims\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"loginUser\",\n    value: function () {\n      var _loginUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(email, jwt) {\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return sessions.updateOne({\n                  someField: \"someValue\"\n                }, {\n                  $set: {\n                    someOtherField: \"someOtherValue\"\n                  }\n                });\n              case 3:\n                return _context4.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context4.prev = 6;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Error occurred while logging in user, \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 6]]);\n      }));\n      function loginUser(_x4, _x5) {\n        return _loginUser.apply(this, arguments);\n      }\n      return loginUser;\n    }()\n    /**\n     * Removes a user from the `sessons` collection\n     * @param {string} email - The email of the user to logout\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"logoutUser\",\n    value: function () {\n      var _logoutUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(email) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return sessions.deleteOne({\n                  someField: \"someValue\"\n                });\n              case 3:\n                return _context5.abrupt(\"return\", {\n                  success: true\n                });\n              case 6:\n                _context5.prev = 6;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Error occurred while logging out user, \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 6]]);\n      }));\n      function logoutUser(_x6) {\n        return _logoutUser.apply(this, arguments);\n      }\n      return logoutUser;\n    }()\n    /**\n     * Gets a user from the `sessions` collection\n     * @param {string} email - The email of the user to search for in `sessions`\n     * @returns {Object | null} Returns a user session Object, an \"error\" Object\n     * if something went wrong, or null if user was not found.\n     */\n  }, {\n    key: \"getUserSession\",\n    value: function () {\n      var _getUserSession = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(email) {\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                return _context6.abrupt(\"return\", sessions.findOne({\n                  someField: \"someValue\"\n                }));\n              case 4:\n                _context6.prev = 4;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.error(\"Error occurred while retrieving user session, \".concat(_context6.t0));\n                return _context6.abrupt(\"return\", null);\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 4]]);\n      }));\n      function getUserSession(_x7) {\n        return _getUserSession.apply(this, arguments);\n      }\n      return getUserSession;\n    }()\n    /**\n     * Removes a user from the `sessions` and `users` collections\n     * @param {string} email - The email of the user to delete\n     * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n     */\n  }, {\n    key: \"deleteUser\",\n    value: function () {\n      var _deleteUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(email) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return users.deleteOne({\n                  email: email\n                });\n              case 3:\n                _context7.next = 5;\n                return sessions.deleteOne({\n                  user_id: email\n                });\n              case 5:\n                _context7.next = 7;\n                return this.getUser(email);\n              case 7:\n                _context7.t0 = !_context7.sent;\n                if (!_context7.t0) {\n                  _context7.next = 12;\n                  break;\n                }\n                _context7.next = 11;\n                return this.getUserSession(email);\n              case 11:\n                _context7.t0 = !_context7.sent;\n              case 12:\n                if (!_context7.t0) {\n                  _context7.next = 16;\n                  break;\n                }\n                return _context7.abrupt(\"return\", {\n                  success: true\n                });\n              case 16:\n                console.error(\"Deletion unsuccessful\");\n                return _context7.abrupt(\"return\", {\n                  error: \"Deletion unsuccessful\"\n                });\n              case 18:\n                _context7.next = 24;\n                break;\n              case 20:\n                _context7.prev = 20;\n                _context7.t1 = _context7[\"catch\"](0);\n                console.error(\"Error occurred while deleting user, \".concat(_context7.t1));\n                return _context7.abrupt(\"return\", {\n                  error: _context7.t1\n                });\n              case 24:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 20]]);\n      }));\n      function deleteUser(_x8) {\n        return _deleteUser.apply(this, arguments);\n      }\n      return deleteUser;\n    }()\n    /**\n     * Given a user's email and an object of new preferences, update that user's\n     * data to include those preferences.\n     * @param {string} email - The email of the user to update.\n     * @param {Object} preferences - The preferences to include in the user's data.\n     * @returns {DAOResponse}\n     */\n  }, {\n    key: \"updatePreferences\",\n    value: function () {\n      var _updatePreferences = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(email, preferences) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                /**\n                Ticket: User Preferences\n                 Update the \"preferences\" field in the corresponding user's document to\n                reflect the new information in preferences.\n                */\n\n                preferences = preferences || {};\n\n                // TODO Ticket: User Preferences\n                // Use the data in \"preferences\" to update the user's preferences.\n                _context8.next = 4;\n                return users.updateOne({\n                  someField: someValue\n                }, {\n                  $set: {\n                    someOtherField: someOtherValue\n                  }\n                });\n              case 4:\n                updateResponse = _context8.sent;\n                if (!(updateResponse.matchedCount === 0)) {\n                  _context8.next = 7;\n                  break;\n                }\n                return _context8.abrupt(\"return\", {\n                  error: \"No user found with that email\"\n                });\n              case 7:\n                return _context8.abrupt(\"return\", updateResponse);\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.error(\"An error occurred while updating this user's preferences, \".concat(_context8.t0));\n                return _context8.abrupt(\"return\", {\n                  error: _context8.t0\n                });\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 10]]);\n      }));\n      function updatePreferences(_x9, _x10) {\n        return _updatePreferences.apply(this, arguments);\n      }\n      return updatePreferences;\n    }()\n  }, {\n    key: \"checkAdmin\",\n    value: function () {\n      var _checkAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(email) {\n        var _yield$this$getUser, isAdmin;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return this.getUser(email);\n              case 3:\n                _yield$this$getUser = _context9.sent;\n                isAdmin = _yield$this$getUser.isAdmin;\n                return _context9.abrupt(\"return\", isAdmin || false);\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                return _context9.abrupt(\"return\", {\n                  error: _context9.t0\n                });\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n      function checkAdmin(_x11) {\n        return _checkAdmin.apply(this, arguments);\n      }\n      return checkAdmin;\n    }()\n  }, {\n    key: \"makeAdmin\",\n    value: function () {\n      var _makeAdmin = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee10(email) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                updateResponse = users.updateOne({\n                  email: email\n                }, {\n                  $set: {\n                    isAdmin: true\n                  }\n                });\n                return _context10.abrupt(\"return\", updateResponse);\n              case 5:\n                _context10.prev = 5;\n                _context10.t0 = _context10[\"catch\"](0);\n                return _context10.abrupt(\"return\", {\n                  error: _context10.t0\n                });\n              case 8:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[0, 5]]);\n      }));\n      function makeAdmin(_x12) {\n        return _makeAdmin.apply(this, arguments);\n      }\n      return makeAdmin;\n    }()\n  }]);\n  return UsersDAO;\n}();\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\nexports[\"default\"] = UsersDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VycyIsInNlc3Npb25zIiwiVXNlcnNEQU8iLCJjb25uIiwiZGIiLCJwcm9jZXNzIiwiZW52IiwiTUZMSVhfTlMiLCJjb2xsZWN0aW9uIiwiY29uc29sZSIsImVycm9yIiwiZW1haWwiLCJmaW5kT25lIiwic29tZUZpZWxkIiwidXNlckluZm8iLCJpbnNlcnRPbmUiLCJzdWNjZXNzIiwiU3RyaW5nIiwic3RhcnRzV2l0aCIsImp3dCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJzb21lT3RoZXJGaWVsZCIsImRlbGV0ZU9uZSIsInVzZXJfaWQiLCJnZXRVc2VyIiwiZ2V0VXNlclNlc3Npb24iLCJwcmVmZXJlbmNlcyIsInNvbWVWYWx1ZSIsInNvbWVPdGhlclZhbHVlIiwidXBkYXRlUmVzcG9uc2UiLCJtYXRjaGVkQ291bnQiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeC0tanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbInVzZXJzREFPLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCB1c2Vyc1xubGV0IHNlc3Npb25zXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJzREFPIHtcbiAgc3RhdGljIGFzeW5jIGluamVjdERCKGNvbm4pIHtcbiAgICBpZiAodXNlcnMgJiYgc2Vzc2lvbnMpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0cnkge1xuICAgICAgdXNlcnMgPSBhd2FpdCBjb25uLmRiKHByb2Nlc3MuZW52Lk1GTElYX05TKS5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgIHNlc3Npb25zID0gYXdhaXQgY29ubi5kYihwcm9jZXNzLmVudi5NRkxJWF9OUykuY29sbGVjdGlvbihcInNlc3Npb25zXCIpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGVzdGFibGlzaCBjb2xsZWN0aW9uIGhhbmRsZXMgaW4gdXNlckRBTzogJHtlfWApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG5cbiAgRm9yIHRoaXMgdGlja2V0LCB5b3Ugd2lsbCBuZWVkIHRvIGltcGxlbWVudCB0aGUgZm9sbG93aW5nIGZpdmUgbWV0aG9kczpcblxuICAtIGdldFVzZXJcbiAgLSBhZGRVc2VyXG4gIC0gbG9naW5Vc2VyXG4gIC0gbG9nb3V0VXNlclxuICAtIGdldFVzZXJTZXNzaW9uXG5cbiAgWW91IGNhbiBmaW5kIHRoZXNlIG1ldGhvZHMgYmVsb3cgdGhpcyBjb21tZW50LiBNYWtlIHN1cmUgdG8gcmVhZCB0aGUgY29tbWVudHNcbiAgaW4gZWFjaCBtZXRob2QgdG8gYmV0dGVyIHVuZGVyc3RhbmQgdGhlIGltcGxlbWVudGF0aW9uLlxuXG4gIFRoZSBtZXRob2QgZGVsZXRlVXNlciBpcyBhbHJlYWR5IGdpdmVuIHRvIHlvdS5cbiAgKi9cblxuICAvKipcbiAgICogRmluZHMgYSB1c2VyIGluIHRoZSBgdXNlcnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSBkZXNpcmVkIHVzZXJcbiAgICogQHJldHVybnMge09iamVjdCB8IG51bGx9IFJldHVybnMgZWl0aGVyIGEgc2luZ2xlIHVzZXIgb3Igbm90aGluZ1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFVzZXIoZW1haWwpIHtcbiAgICAvLyBUT0RPIFRpY2tldDogVXNlciBNYW5hZ2VtZW50XG4gICAgLy8gUmV0cmlldmUgdGhlIHVzZXIgZG9jdW1lbnQgY29ycmVzcG9uZGluZyB3aXRoIHRoZSB1c2VyJ3MgZW1haWwuXG4gICAgcmV0dXJuIGF3YWl0IHVzZXJzLmZpbmRPbmUoeyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgdXNlciB0byB0aGUgYHVzZXJzYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7VXNlckluZm99IHVzZXJJbmZvIC0gVGhlIGluZm9ybWF0aW9uIG9mIHRoZSB1c2VyIHRvIGFkZFxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGFkZFVzZXIodXNlckluZm8pIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IER1cmFibGUgV3JpdGVzXG5cbiAgICBQbGVhc2UgaW5jcmVhc2UgdGhlIGR1cmFiaWxpdHkgb2YgdGhpcyBtZXRob2QgYnkgdXNpbmcgYSBub24tZGVmYXVsdCB3cml0ZVxuICAgIGNvbmNlcm4gd2l0aCBgYGluc2VydE9uZWBgLlxuICAgICovXG5cbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IFVzZXIgTWFuYWdlbWVudFxuICAgICAgLy8gSW5zZXJ0IGEgdXNlciB3aXRoIHRoZSBcIm5hbWVcIiwgXCJlbWFpbFwiLCBhbmQgXCJwYXNzd29yZFwiIGZpZWxkcy5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBEdXJhYmxlIFdyaXRlc1xuICAgICAgLy8gVXNlIGEgbW9yZSBkdXJhYmxlIFdyaXRlIENvbmNlcm4gZm9yIHRoaXMgb3BlcmF0aW9uLlxuICAgICAgYXdhaXQgdXNlcnMuaW5zZXJ0T25lKHsgc29tZUZpZWxkOiBcInNvbWVWYWx1ZVwiIH0pXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoU3RyaW5nKGUpLnN0YXJ0c1dpdGgoXCJNb25nb0Vycm9yOiBFMTEwMDAgZHVwbGljYXRlIGtleSBlcnJvclwiKSkge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogXCJBIHVzZXIgd2l0aCB0aGUgZ2l2ZW4gZW1haWwgYWxyZWFkeSBleGlzdHMuXCIgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igb2NjdXJyZWQgd2hpbGUgYWRkaW5nIG5ldyB1c2VyLCAke2V9LmApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB1c2VyIHRvIHRoZSBgc2Vzc2lvbnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIGxvZ2luXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBqd3QgLSBBIEpTT04gd2ViIHRva2VuIHJlcHJlc2VudGluZyB0aGUgdXNlcidzIGNsYWltc1xuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9IFJldHVybnMgZWl0aGVyIGEgXCJzdWNjZXNzXCIgb3IgYW4gXCJlcnJvclwiIE9iamVjdFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGxvZ2luVXNlcihlbWFpbCwgand0KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAgIC8vIFVzZSBhbiBVUFNFUlQgc3RhdGVtZW50IHRvIHVwZGF0ZSB0aGUgXCJqd3RcIiBmaWVsZCBpbiB0aGUgZG9jdW1lbnQsXG4gICAgICAvLyBtYXRjaGluZyB0aGUgXCJ1c2VyX2lkXCIgZmllbGQgd2l0aCB0aGUgZW1haWwgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24uXG4gICAgICBhd2FpdCBzZXNzaW9ucy51cGRhdGVPbmUoXG4gICAgICAgIHsgc29tZUZpZWxkOiBcInNvbWVWYWx1ZVwiIH0sXG4gICAgICAgIHsgJHNldDogeyBzb21lT3RoZXJGaWVsZDogXCJzb21lT3RoZXJWYWx1ZVwiIH0gfSxcbiAgICAgIClcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGxvZ2dpbmcgaW4gdXNlciwgJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB1c2VyIGZyb20gdGhlIGBzZXNzb25zYCBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBsb2dvdXRcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsb2dvdXRVc2VyKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAgIC8vIERlbGV0ZSB0aGUgZG9jdW1lbnQgaW4gdGhlIGBzZXNzaW9uc2AgY29sbGVjdGlvbiBtYXRjaGluZyB0aGUgZW1haWwuXG4gICAgICBhd2FpdCBzZXNzaW9ucy5kZWxldGVPbmUoeyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfSlcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGxvZ2dpbmcgb3V0IHVzZXIsICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdXNlciBmcm9tIHRoZSBgc2Vzc2lvbnNgIGNvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIHNlYXJjaCBmb3IgaW4gYHNlc3Npb25zYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0IHwgbnVsbH0gUmV0dXJucyBhIHVzZXIgc2Vzc2lvbiBPYmplY3QsIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICogaWYgc29tZXRoaW5nIHdlbnQgd3JvbmcsIG9yIG51bGwgaWYgdXNlciB3YXMgbm90IGZvdW5kLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFVzZXJTZXNzaW9uKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIE1hbmFnZW1lbnRcbiAgICAgIC8vIFJldHJpZXZlIHRoZSBzZXNzaW9uIGRvY3VtZW50IGNvcnJlc3BvbmRpbmcgd2l0aCB0aGUgdXNlcidzIGVtYWlsLlxuICAgICAgcmV0dXJuIHNlc3Npb25zLmZpbmRPbmUoeyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBvY2N1cnJlZCB3aGlsZSByZXRyaWV2aW5nIHVzZXIgc2Vzc2lvbiwgJHtlfWApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgdXNlciBmcm9tIHRoZSBgc2Vzc2lvbnNgIGFuZCBgdXNlcnNgIGNvbGxlY3Rpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBvZiB0aGUgdXNlciB0byBkZWxldGVcbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGVpdGhlciBhIFwic3VjY2Vzc1wiIG9yIGFuIFwiZXJyb3JcIiBPYmplY3RcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkZWxldGVVc2VyKGVtYWlsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVzZXJzLmRlbGV0ZU9uZSh7IGVtYWlsIH0pXG4gICAgICBhd2FpdCBzZXNzaW9ucy5kZWxldGVPbmUoeyB1c2VyX2lkOiBlbWFpbCB9KVxuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5nZXRVc2VyKGVtYWlsKSkgJiYgIShhd2FpdCB0aGlzLmdldFVzZXJTZXNzaW9uKGVtYWlsKSkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBEZWxldGlvbiB1bnN1Y2Nlc3NmdWxgKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogYERlbGV0aW9uIHVuc3VjY2Vzc2Z1bGAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIGRlbGV0aW5nIHVzZXIsICR7ZX1gKVxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHVzZXIncyBlbWFpbCBhbmQgYW4gb2JqZWN0IG9mIG5ldyBwcmVmZXJlbmNlcywgdXBkYXRlIHRoYXQgdXNlcidzXG4gICAqIGRhdGEgdG8gaW5jbHVkZSB0aG9zZSBwcmVmZXJlbmNlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVGhlIGVtYWlsIG9mIHRoZSB1c2VyIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHByZWZlcmVuY2VzIC0gVGhlIHByZWZlcmVuY2VzIHRvIGluY2x1ZGUgaW4gdGhlIHVzZXIncyBkYXRhLlxuICAgKiBAcmV0dXJucyB7REFPUmVzcG9uc2V9XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlUHJlZmVyZW5jZXMoZW1haWwsIHByZWZlcmVuY2VzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8qKlxuICAgICAgVGlja2V0OiBVc2VyIFByZWZlcmVuY2VzXG5cbiAgICAgIFVwZGF0ZSB0aGUgXCJwcmVmZXJlbmNlc1wiIGZpZWxkIGluIHRoZSBjb3JyZXNwb25kaW5nIHVzZXIncyBkb2N1bWVudCB0b1xuICAgICAgcmVmbGVjdCB0aGUgbmV3IGluZm9ybWF0aW9uIGluIHByZWZlcmVuY2VzLlxuICAgICAgKi9cblxuICAgICAgcHJlZmVyZW5jZXMgPSBwcmVmZXJlbmNlcyB8fCB7fVxuXG4gICAgICAvLyBUT0RPIFRpY2tldDogVXNlciBQcmVmZXJlbmNlc1xuICAgICAgLy8gVXNlIHRoZSBkYXRhIGluIFwicHJlZmVyZW5jZXNcIiB0byB1cGRhdGUgdGhlIHVzZXIncyBwcmVmZXJlbmNlcy5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gYXdhaXQgdXNlcnMudXBkYXRlT25lKFxuICAgICAgICB7IHNvbWVGaWVsZDogc29tZVZhbHVlIH0sXG4gICAgICAgIHsgJHNldDogeyBzb21lT3RoZXJGaWVsZDogc29tZU90aGVyVmFsdWUgfSB9LFxuICAgICAgKVxuXG4gICAgICBpZiAodXBkYXRlUmVzcG9uc2UubWF0Y2hlZENvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiBcIk5vIHVzZXIgZm91bmQgd2l0aCB0aGF0IGVtYWlsXCIgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVwZGF0ZVJlc3BvbnNlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIHRoaXMgdXNlcidzIHByZWZlcmVuY2VzLCAke2V9YCxcbiAgICAgIClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tBZG1pbihlbWFpbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlzQWRtaW4gfSA9IGF3YWl0IHRoaXMuZ2V0VXNlcihlbWFpbClcbiAgICAgIHJldHVybiBpc0FkbWluIHx8IGZhbHNlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtYWtlQWRtaW4oZW1haWwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXBkYXRlUmVzcG9uc2UgPSB1c2Vycy51cGRhdGVPbmUoXG4gICAgICAgIHsgZW1haWwgfSxcbiAgICAgICAgeyAkc2V0OiB7IGlzQWRtaW46IHRydWUgfSB9LFxuICAgICAgKVxuICAgICAgcmV0dXJuIHVwZGF0ZVJlc3BvbnNlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFBhcmFtZXRlciBwYXNzZWQgdG8gYWRkVXNlciBtZXRob2RcbiAqIEB0eXBlZGVmIFVzZXJJbmZvXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGVtYWlsXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcGFzc3dvcmRcbiAqL1xuXG4vKipcbiAqIFN1Y2Nlc3MvRXJyb3IgcmV0dXJuIG9iamVjdFxuICogQHR5cGVkZWYgREFPUmVzcG9uc2VcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3N1Y2Nlc3NdIC0gU3VjY2Vzc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtlcnJvcl0gLSBFcnJvclxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsS0FBSztBQUNULElBQUlDLFFBQVE7QUFBQSxJQUVTQyxRQUFRO0VBQUE7SUFBQTtFQUFBO0VBQUE7SUFBQTtJQUFBO01BQUEsOEZBQzNCLGlCQUFzQkMsSUFBSTtRQUFBO1VBQUE7WUFBQTtjQUFBO2dCQUFBLE1BQ3BCSCxLQUFLLElBQUlDLFFBQVE7a0JBQUE7a0JBQUE7Z0JBQUE7Z0JBQUE7Y0FBQTtnQkFBQTtnQkFBQTtnQkFBQSxPQUlMRSxJQUFJLENBQUNDLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsQ0FBQyxDQUFDQyxVQUFVLENBQUMsT0FBTyxDQUFDO2NBQUE7Z0JBQS9EUixLQUFLO2dCQUFBO2dCQUFBLE9BQ1lHLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxVQUFVLENBQUM7Y0FBQTtnQkFBckVQLFFBQVE7Z0JBQUE7Z0JBQUE7Y0FBQTtnQkFBQTtnQkFBQTtnQkFFUlEsT0FBTyxDQUFDQyxLQUFLLDJFQUEyRDtjQUFBO2NBQUE7Z0JBQUE7WUFBQTtVQUFBO1FBQUE7TUFBQSxDQUUzRTtNQUFBO1FBQUE7TUFBQTtNQUFBO0lBQUE7SUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7SUFNRTtBQUNG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","map":{"version":3,"names":["users","sessions","UsersDAO","conn","db","process","env","MFLIX_NS","collection","console","error","email","findOne","someField","userInfo","insertOne","success","String","startsWith","jwt","updateOne","$set","someOtherField","deleteOne","user_id","getUser","getUserSession","preferences","someValue","someOtherValue","updateResponse","matchedCount","isAdmin"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\dao\\","sources":["usersDAO.js"],"sourcesContent":["let users\nlet sessions\n\nexport default class UsersDAO {\n  static async injectDB(conn) {\n    if (users && sessions) {\n      return\n    }\n    try {\n      users = await conn.db(process.env.MFLIX_NS).collection(\"users\")\n      sessions = await conn.db(process.env.MFLIX_NS).collection(\"sessions\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: User Management\n\n  For this ticket, you will need to implement the following five methods:\n\n  - getUser\n  - addUser\n  - loginUser\n  - logoutUser\n  - getUserSession\n\n  You can find these methods below this comment. Make sure to read the comments\n  in each method to better understand the implementation.\n\n  The method deleteUser is already given to you.\n  */\n\n  /**\n   * Finds a user in the `users` collection\n   * @param {string} email - The email of the desired user\n   * @returns {Object | null} Returns either a single user or nothing\n   */\n  static async getUser(email) {\n    // TODO Ticket: User Management\n    // Retrieve the user document corresponding with the user's email.\n    return await users.findOne({ someField: \"someValue\" })\n  }\n\n  /**\n   * Adds a user to the `users` collection\n   * @param {UserInfo} userInfo - The information of the user to add\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async addUser(userInfo) {\n    /**\n    Ticket: Durable Writes\n\n    Please increase the durability of this method by using a non-default write\n    concern with ``insertOne``.\n    */\n\n    try {\n      // TODO Ticket: User Management\n      // Insert a user with the \"name\", \"email\", and \"password\" fields.\n      // TODO Ticket: Durable Writes\n      // Use a more durable Write Concern for this operation.\n      await users.insertOne({ someField: \"someValue\" })\n      return { success: true }\n    } catch (e) {\n      if (String(e).startsWith(\"MongoError: E11000 duplicate key error\")) {\n        return { error: \"A user with the given email already exists.\" }\n      }\n      console.error(`Error occurred while adding new user, ${e}.`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Adds a user to the `sessions` collection\n   * @param {string} email - The email of the user to login\n   * @param {string} jwt - A JSON web token representing the user's claims\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async loginUser(email, jwt) {\n    try {\n      // TODO Ticket: User Management\n      // Use an UPSERT statement to update the \"jwt\" field in the document,\n      // matching the \"user_id\" field with the email passed to this function.\n      await sessions.updateOne(\n        { someField: \"someValue\" },\n        { $set: { someOtherField: \"someOtherValue\" } },\n      )\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging in user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Removes a user from the `sessons` collection\n   * @param {string} email - The email of the user to logout\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async logoutUser(email) {\n    try {\n      // TODO Ticket: User Management\n      // Delete the document in the `sessions` collection matching the email.\n      await sessions.deleteOne({ someField: \"someValue\" })\n      return { success: true }\n    } catch (e) {\n      console.error(`Error occurred while logging out user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Gets a user from the `sessions` collection\n   * @param {string} email - The email of the user to search for in `sessions`\n   * @returns {Object | null} Returns a user session Object, an \"error\" Object\n   * if something went wrong, or null if user was not found.\n   */\n  static async getUserSession(email) {\n    try {\n      // TODO Ticket: User Management\n      // Retrieve the session document corresponding with the user's email.\n      return sessions.findOne({ someField: \"someValue\" })\n    } catch (e) {\n      console.error(`Error occurred while retrieving user session, ${e}`)\n      return null\n    }\n  }\n\n  /**\n   * Removes a user from the `sessions` and `users` collections\n   * @param {string} email - The email of the user to delete\n   * @returns {DAOResponse} Returns either a \"success\" or an \"error\" Object\n   */\n  static async deleteUser(email) {\n    try {\n      await users.deleteOne({ email })\n      await sessions.deleteOne({ user_id: email })\n      if (!(await this.getUser(email)) && !(await this.getUserSession(email))) {\n        return { success: true }\n      } else {\n        console.error(`Deletion unsuccessful`)\n        return { error: `Deletion unsuccessful` }\n      }\n    } catch (e) {\n      console.error(`Error occurred while deleting user, ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Given a user's email and an object of new preferences, update that user's\n   * data to include those preferences.\n   * @param {string} email - The email of the user to update.\n   * @param {Object} preferences - The preferences to include in the user's data.\n   * @returns {DAOResponse}\n   */\n  static async updatePreferences(email, preferences) {\n    try {\n      /**\n      Ticket: User Preferences\n\n      Update the \"preferences\" field in the corresponding user's document to\n      reflect the new information in preferences.\n      */\n\n      preferences = preferences || {}\n\n      // TODO Ticket: User Preferences\n      // Use the data in \"preferences\" to update the user's preferences.\n      const updateResponse = await users.updateOne(\n        { someField: someValue },\n        { $set: { someOtherField: someOtherValue } },\n      )\n\n      if (updateResponse.matchedCount === 0) {\n        return { error: \"No user found with that email\" }\n      }\n      return updateResponse\n    } catch (e) {\n      console.error(\n        `An error occurred while updating this user's preferences, ${e}`,\n      )\n      return { error: e }\n    }\n  }\n\n  static async checkAdmin(email) {\n    try {\n      const { isAdmin } = await this.getUser(email)\n      return isAdmin || false\n    } catch (e) {\n      return { error: e }\n    }\n  }\n\n  static async makeAdmin(email) {\n    try {\n      const updateResponse = users.updateOne(\n        { email },\n        { $set: { isAdmin: true } },\n      )\n      return updateResponse\n    } catch (e) {\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Parameter passed to addUser method\n * @typedef UserInfo\n * @property {string} name\n * @property {string} email\n * @property {string} password\n */\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\dao\\\\commentsDAO.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _bson = require(\"bson\");\nvar comments;\nvar CommentsDAO = /*#__PURE__*/function () {\n  function CommentsDAO() {\n    (0, _classCallCheck2[\"default\"])(this, CommentsDAO);\n  }\n  (0, _createClass2[\"default\"])(CommentsDAO, null, [{\n    key: \"injectDB\",\n    value: function () {\n      var _injectDB = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(conn) {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!comments) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                _context.prev = 2;\n                _context.next = 5;\n                return conn.db(process.env.MFLIX_NS).collection(\"comments\");\n              case 5:\n                comments = _context.sent;\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Unable to establish collection handles in userDAO: \".concat(_context.t0));\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n      function injectDB(_x) {\n        return _injectDB.apply(this, arguments);\n      }\n      return injectDB;\n    }()\n    /**\n    Ticket: Create/Update Comments\n     For this ticket, you will need to implement the following two methods:\n     - addComment\n    - updateComment\n     You can find these methods below this docstring. Make sure to read the comments\n    to better understand the task.\n    */\n    /**\n     * Inserts a comment into the `comments` collection, with the following fields:\n        - \"name\", the name of the user posting the comment\n       - \"email\", the email of the user posting the comment\n       - \"movie_id\", the _id of the movie pertaining to the comment\n       - \"text\", the text of the comment\n       - \"date\", the date when the comment was posted\n      * @param {string} movieId - The _id of the movie in the `movies` collection.\n     * @param {Object} user - An object containing the user's name and email.\n     * @param {string} comment - The text of the comment.\n     * @param {string} date - The date on which the comment was posted.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n  }, {\n    key: \"addComment\",\n    value: function () {\n      var _addComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(movieId, user, comment, date) {\n        var commentDoc;\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                // TODO Ticket: Create/Update Comments\n                // Construct the comment document to be inserted into MongoDB.\n                commentDoc = {\n                  someField: \"someValue\"\n                };\n                _context2.next = 4;\n                return comments.insertOne(commentDoc);\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(\"Unable to post comment: \".concat(_context2.t0));\n                return _context2.abrupt(\"return\", {\n                  error: _context2.t0\n                });\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n      function addComment(_x2, _x3, _x4, _x5) {\n        return _addComment.apply(this, arguments);\n      }\n      return addComment;\n    }()\n    /**\n     * Updates the comment in the comment collection. Queries for the comment\n     * based by both comment _id field as well as the email field to doubly ensure\n     * the user has permission to edit this comment.\n     * @param {string} commentId - The _id of the comment to update.\n     * @param {string} userEmail - The email of the user who owns the comment.\n     * @param {string} text - The updated text of the comment.\n     * @param {string} date - The date on which the comment was updated.\n     * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n     */\n  }, {\n    key: \"updateComment\",\n    value: function () {\n      var _updateComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(commentId, userEmail, text, date) {\n        var updateResponse;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return comments.updateOne({\n                  someField: \"someValue\"\n                }, {\n                  $set: {\n                    someOtherField: \"someOtherValue\"\n                  }\n                });\n              case 3:\n                updateResponse = _context3.sent;\n                return _context3.abrupt(\"return\", updateResponse);\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error(\"Unable to update comment: \".concat(_context3.t0));\n                return _context3.abrupt(\"return\", {\n                  error: _context3.t0\n                });\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 7]]);\n      }));\n      function updateComment(_x6, _x7, _x8, _x9) {\n        return _updateComment.apply(this, arguments);\n      }\n      return updateComment;\n    }()\n  }, {\n    key: \"deleteComment\",\n    value: function () {\n      var _deleteComment = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(commentId, userEmail) {\n        var deleteResponse;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return comments.deleteOne({\n                  _id: (0, _bson.ObjectId)(commentId)\n                });\n              case 3:\n                deleteResponse = _context4.sent;\n                return _context4.abrupt(\"return\", deleteResponse);\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error(\"Unable to delete comment: \".concat(_context4.t0));\n                return _context4.abrupt(\"return\", {\n                  error: _context4.t0\n                });\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 7]]);\n      }));\n      function deleteComment(_x10, _x11) {\n        return _deleteComment.apply(this, arguments);\n      }\n      return deleteComment;\n    }()\n  }, {\n    key: \"mostActiveCommenters\",\n    value: function () {\n      var _mostActiveCommenters = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n        var pipeline, readConcern, aggregateResult;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                // TODO Ticket: User Report\n                // Return the 20 users who have commented the most on MFlix.\n                pipeline = []; // TODO Ticket: User Report\n                // Use a more durable Read Concern here to make sure this data is not stale.\n                readConcern = comments.readConcern;\n                _context5.next = 5;\n                return comments.aggregate(pipeline, {\n                  readConcern: readConcern\n                });\n              case 5:\n                aggregateResult = _context5.sent;\n                _context5.next = 8;\n                return aggregateResult.toArray();\n              case 8:\n                return _context5.abrupt(\"return\", _context5.sent);\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.error(\"Unable to retrieve most active commenters: \".concat(_context5.t0));\n                return _context5.abrupt(\"return\", {\n                  error: _context5.t0\n                });\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }));\n      function mostActiveCommenters() {\n        return _mostActiveCommenters.apply(this, arguments);\n      }\n      return mostActiveCommenters;\n    }()\n  }]);\n  return CommentsDAO;\n}();\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\nexports[\"default\"] = CommentsDAO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb21tZW50cyIsIkNvbW1lbnRzREFPIiwiY29ubiIsImRiIiwicHJvY2VzcyIsImVudiIsIk1GTElYX05TIiwiY29sbGVjdGlvbiIsImNvbnNvbGUiLCJlcnJvciIsIm1vdmllSWQiLCJ1c2VyIiwiY29tbWVudCIsImRhdGUiLCJjb21tZW50RG9jIiwic29tZUZpZWxkIiwiaW5zZXJ0T25lIiwiY29tbWVudElkIiwidXNlckVtYWlsIiwidGV4dCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJzb21lT3RoZXJGaWVsZCIsInVwZGF0ZVJlc3BvbnNlIiwiZGVsZXRlT25lIiwiX2lkIiwiT2JqZWN0SWQiLCJkZWxldGVSZXNwb25zZSIsInBpcGVsaW5lIiwicmVhZENvbmNlcm4iLCJhZ2dyZWdhdGUiLCJhZ2dyZWdhdGVSZXN1bHQiLCJ0b0FycmF5Il0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGNvbnNjXFxEZXNrdG9wXFxtZmxpeC0tanNcXHNyY1xcZGFvXFwiLCJzb3VyY2VzIjpbImNvbW1lbnRzREFPLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcImJzb25cIlxuXG5sZXQgY29tbWVudHNcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWVudHNEQU8ge1xuICBzdGF0aWMgYXN5bmMgaW5qZWN0REIoY29ubikge1xuICAgIGlmIChjb21tZW50cykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb21tZW50cyA9IGF3YWl0IGNvbm4uZGIocHJvY2Vzcy5lbnYuTUZMSVhfTlMpLmNvbGxlY3Rpb24oXCJjb21tZW50c1wiKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBlc3RhYmxpc2ggY29sbGVjdGlvbiBoYW5kbGVzIGluIHVzZXJEQU86ICR7ZX1gKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcblxuICBGb3IgdGhpcyB0aWNrZXQsIHlvdSB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgdHdvIG1ldGhvZHM6XG5cbiAgLSBhZGRDb21tZW50XG4gIC0gdXBkYXRlQ29tbWVudFxuXG4gIFlvdSBjYW4gZmluZCB0aGVzZSBtZXRob2RzIGJlbG93IHRoaXMgZG9jc3RyaW5nLiBNYWtlIHN1cmUgdG8gcmVhZCB0aGUgY29tbWVudHNcbiAgdG8gYmV0dGVyIHVuZGVyc3RhbmQgdGhlIHRhc2suXG4gICovXG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjb21tZW50IGludG8gdGhlIGBjb21tZW50c2AgY29sbGVjdGlvbiwgd2l0aCB0aGUgZm9sbG93aW5nIGZpZWxkczpcblxuICAgICAtIFwibmFtZVwiLCB0aGUgbmFtZSBvZiB0aGUgdXNlciBwb3N0aW5nIHRoZSBjb21tZW50XG4gICAgIC0gXCJlbWFpbFwiLCB0aGUgZW1haWwgb2YgdGhlIHVzZXIgcG9zdGluZyB0aGUgY29tbWVudFxuICAgICAtIFwibW92aWVfaWRcIiwgdGhlIF9pZCBvZiB0aGUgbW92aWUgcGVydGFpbmluZyB0byB0aGUgY29tbWVudFxuICAgICAtIFwidGV4dFwiLCB0aGUgdGV4dCBvZiB0aGUgY29tbWVudFxuICAgICAtIFwiZGF0ZVwiLCB0aGUgZGF0ZSB3aGVuIHRoZSBjb21tZW50IHdhcyBwb3N0ZWRcblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW92aWVJZCAtIFRoZSBfaWQgb2YgdGhlIG1vdmllIGluIHRoZSBgbW92aWVzYCBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdXNlciAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB1c2VyJ3MgbmFtZSBhbmQgZW1haWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tZW50IC0gVGhlIHRleHQgb2YgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNvbW1lbnQgd2FzIHBvc3RlZC5cbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGVpdGhlciBEQiByZXNwb25zZSBvciBcImVycm9yXCJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBhZGRDb21tZW50KG1vdmllSWQsIHVzZXIsIGNvbW1lbnQsIGRhdGUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBUaWNrZXQ6IENyZWF0ZS9VcGRhdGUgQ29tbWVudHNcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgY29tbWVudCBkb2N1bWVudCB0byBiZSBpbnNlcnRlZCBpbnRvIE1vbmdvREIuXG4gICAgICBjb25zdCBjb21tZW50RG9jID0geyBzb21lRmllbGQ6IFwic29tZVZhbHVlXCIgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgY29tbWVudHMuaW5zZXJ0T25lKGNvbW1lbnREb2MpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIHBvc3QgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbW1lbnQgaW4gdGhlIGNvbW1lbnQgY29sbGVjdGlvbi4gUXVlcmllcyBmb3IgdGhlIGNvbW1lbnRcbiAgICogYmFzZWQgYnkgYm90aCBjb21tZW50IF9pZCBmaWVsZCBhcyB3ZWxsIGFzIHRoZSBlbWFpbCBmaWVsZCB0byBkb3VibHkgZW5zdXJlXG4gICAqIHRoZSB1c2VyIGhhcyBwZXJtaXNzaW9uIHRvIGVkaXQgdGhpcyBjb21tZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29tbWVudElkIC0gVGhlIF9pZCBvZiB0aGUgY29tbWVudCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VyRW1haWwgLSBUaGUgZW1haWwgb2YgdGhlIHVzZXIgd2hvIG93bnMgdGhlIGNvbW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHVwZGF0ZWQgdGV4dCBvZiB0aGUgY29tbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGUgLSBUaGUgZGF0ZSBvbiB3aGljaCB0aGUgY29tbWVudCB3YXMgdXBkYXRlZC5cbiAgICogQHJldHVybnMge0RBT1Jlc3BvbnNlfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGVpdGhlciBEQiByZXNwb25zZSBvciBcImVycm9yXCJcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDb21tZW50KGNvbW1lbnRJZCwgdXNlckVtYWlsLCB0ZXh0LCBkYXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBDcmVhdGUvVXBkYXRlIENvbW1lbnRzXG4gICAgICAvLyBVc2UgdGhlIGNvbW1lbnRJZCBhbmQgdXNlckVtYWlsIHRvIHNlbGVjdCB0aGUgcHJvcGVyIGNvbW1lbnQsIHRoZW5cbiAgICAgIC8vIHVwZGF0ZSB0aGUgXCJ0ZXh0XCIgYW5kIFwiZGF0ZVwiIGZpZWxkcyBvZiB0aGUgc2VsZWN0ZWQgY29tbWVudC5cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3BvbnNlID0gYXdhaXQgY29tbWVudHMudXBkYXRlT25lKFxuICAgICAgICB7IHNvbWVGaWVsZDogXCJzb21lVmFsdWVcIiB9LFxuICAgICAgICB7ICRzZXQ6IHsgc29tZU90aGVyRmllbGQ6IFwic29tZU90aGVyVmFsdWVcIiB9IH0sXG4gICAgICApXG5cbiAgICAgIHJldHVybiB1cGRhdGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byB1cGRhdGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkLCB1c2VyRW1haWwpIHtcbiAgICAvKipcbiAgICBUaWNrZXQ6IERlbGV0ZSBDb21tZW50c1xuXG4gICAgSW1wbGVtZW50IHRoZSBkZWxldGVPbmUoKSBjYWxsIGluIHRoaXMgbWV0aG9kLlxuXG4gICAgRW5zdXJlIHRoZSBkZWxldGUgb3BlcmF0aW9uIGlzIGxpbWl0ZWQgc28gb25seSB0aGUgdXNlciBjYW4gZGVsZXRlIHRoZWlyIG93blxuICAgIGNvbW1lbnRzLCBidXQgbm90IGFueW9uZSBlbHNlJ3MgY29tbWVudHMuXG4gICAgKi9cblxuICAgIHRyeSB7XG4gICAgICAvLyBUT0RPIFRpY2tldDogRGVsZXRlIENvbW1lbnRzXG4gICAgICAvLyBVc2UgdGhlIHVzZXJFbWFpbCBhbmQgY29tbWVudElkIHRvIGRlbGV0ZSB0aGUgcHJvcGVyIGNvbW1lbnQuXG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IGF3YWl0IGNvbW1lbnRzLmRlbGV0ZU9uZSh7XG4gICAgICAgIF9pZDogT2JqZWN0SWQoY29tbWVudElkKSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBkZWxldGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byBkZWxldGUgY29tbWVudDogJHtlfWApXG4gICAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1vc3RBY3RpdmVDb21tZW50ZXJzKCkge1xuICAgIC8qKlxuICAgIFRpY2tldDogVXNlciBSZXBvcnRcblxuICAgIEJ1aWxkIGEgcGlwZWxpbmUgdGhhdCByZXR1cm5zIHRoZSAyMCBtb3N0IGZyZXF1ZW50IGNvbW1lbnRlcnMgb24gdGhlIE1GbGl4XG4gICAgc2l0ZS4gWW91IGNhbiBkbyB0aGlzIGJ5IGNvdW50aW5nIHRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXMgb2YgYSB1c2VyJ3NcbiAgICBlbWFpbCBpbiB0aGUgYGNvbW1lbnRzYCBjb2xsZWN0aW9uLlxuICAgICovXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gUmV0dXJuIHRoZSAyMCB1c2VycyB3aG8gaGF2ZSBjb21tZW50ZWQgdGhlIG1vc3Qgb24gTUZsaXguXG4gICAgICBjb25zdCBwaXBlbGluZSA9IFtdXG5cbiAgICAgIC8vIFRPRE8gVGlja2V0OiBVc2VyIFJlcG9ydFxuICAgICAgLy8gVXNlIGEgbW9yZSBkdXJhYmxlIFJlYWQgQ29uY2VybiBoZXJlIHRvIG1ha2Ugc3VyZSB0aGlzIGRhdGEgaXMgbm90IHN0YWxlLlxuICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSBjb21tZW50cy5yZWFkQ29uY2VyblxuXG4gICAgICBjb25zdCBhZ2dyZWdhdGVSZXN1bHQgPSBhd2FpdCBjb21tZW50cy5hZ2dyZWdhdGUocGlwZWxpbmUsIHtcbiAgICAgICAgcmVhZENvbmNlcm4sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gYXdhaXQgYWdncmVnYXRlUmVzdWx0LnRvQXJyYXkoKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFVuYWJsZSB0byByZXRyaWV2ZSBtb3N0IGFjdGl2ZSBjb21tZW50ZXJzOiAke2V9YClcbiAgICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTdWNjZXNzL0Vycm9yIHJldHVybiBvYmplY3RcbiAqIEB0eXBlZGVmIERBT1Jlc3BvbnNlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzdWNjZXNzXSAtIFN1Y2Nlc3NcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXJyb3JdIC0gRXJyb3JcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUEsSUFBSUEsUUFBUTtBQUFBLElBRVNDLFdBQVc7RUFBQTtJQUFBO0VBQUE7RUFBQTtJQUFBO0lBQUE7TUFBQSw4RkFDOUIsaUJBQXNCQyxJQUFJO1FBQUE7VUFBQTtZQUFBO2NBQUE7Z0JBQUEsS0FDcEJGLFFBQVE7a0JBQUE7a0JBQUE7Z0JBQUE7Z0JBQUE7Y0FBQTtnQkFBQTtnQkFBQTtnQkFBQSxPQUlPRSxJQUFJLENBQUNDLEVBQUUsQ0FBQ0MsT0FB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","map":{"version":3,"names":["comments","CommentsDAO","conn","db","process","env","MFLIX_NS","collection","console","error","movieId","user","comment","date","commentDoc","someField","insertOne","commentId","userEmail","text","updateOne","$set","someOtherField","updateResponse","deleteOne","_id","ObjectId","deleteResponse","pipeline","readConcern","aggregate","aggregateResult","toArray"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\dao\\","sources":["commentsDAO.js"],"sourcesContent":["import { ObjectId } from \"bson\"\n\nlet comments\n\nexport default class CommentsDAO {\n  static async injectDB(conn) {\n    if (comments) {\n      return\n    }\n    try {\n      comments = await conn.db(process.env.MFLIX_NS).collection(\"comments\")\n    } catch (e) {\n      console.error(`Unable to establish collection handles in userDAO: ${e}`)\n    }\n  }\n\n  /**\n  Ticket: Create/Update Comments\n\n  For this ticket, you will need to implement the following two methods:\n\n  - addComment\n  - updateComment\n\n  You can find these methods below this docstring. Make sure to read the comments\n  to better understand the task.\n  */\n\n  /**\n   * Inserts a comment into the `comments` collection, with the following fields:\n\n     - \"name\", the name of the user posting the comment\n     - \"email\", the email of the user posting the comment\n     - \"movie_id\", the _id of the movie pertaining to the comment\n     - \"text\", the text of the comment\n     - \"date\", the date when the comment was posted\n\n   * @param {string} movieId - The _id of the movie in the `movies` collection.\n   * @param {Object} user - An object containing the user's name and email.\n   * @param {string} comment - The text of the comment.\n   * @param {string} date - The date on which the comment was posted.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async addComment(movieId, user, comment, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Construct the comment document to be inserted into MongoDB.\n      const commentDoc = { someField: \"someValue\" }\n\n      return await comments.insertOne(commentDoc)\n    } catch (e) {\n      console.error(`Unable to post comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  /**\n   * Updates the comment in the comment collection. Queries for the comment\n   * based by both comment _id field as well as the email field to doubly ensure\n   * the user has permission to edit this comment.\n   * @param {string} commentId - The _id of the comment to update.\n   * @param {string} userEmail - The email of the user who owns the comment.\n   * @param {string} text - The updated text of the comment.\n   * @param {string} date - The date on which the comment was updated.\n   * @returns {DAOResponse} Returns an object with either DB response or \"error\"\n   */\n  static async updateComment(commentId, userEmail, text, date) {\n    try {\n      // TODO Ticket: Create/Update Comments\n      // Use the commentId and userEmail to select the proper comment, then\n      // update the \"text\" and \"date\" fields of the selected comment.\n      const updateResponse = await comments.updateOne(\n        { someField: \"someValue\" },\n        { $set: { someOtherField: \"someOtherValue\" } },\n      )\n\n      return updateResponse\n    } catch (e) {\n      console.error(`Unable to update comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async deleteComment(commentId, userEmail) {\n    /**\n    Ticket: Delete Comments\n\n    Implement the deleteOne() call in this method.\n\n    Ensure the delete operation is limited so only the user can delete their own\n    comments, but not anyone else's comments.\n    */\n\n    try {\n      // TODO Ticket: Delete Comments\n      // Use the userEmail and commentId to delete the proper comment.\n      const deleteResponse = await comments.deleteOne({\n        _id: ObjectId(commentId),\n      })\n\n      return deleteResponse\n    } catch (e) {\n      console.error(`Unable to delete comment: ${e}`)\n      return { error: e }\n    }\n  }\n\n  static async mostActiveCommenters() {\n    /**\n    Ticket: User Report\n\n    Build a pipeline that returns the 20 most frequent commenters on the MFlix\n    site. You can do this by counting the number of occurrences of a user's\n    email in the `comments` collection.\n    */\n    try {\n      // TODO Ticket: User Report\n      // Return the 20 users who have commented the most on MFlix.\n      const pipeline = []\n\n      // TODO Ticket: User Report\n      // Use a more durable Read Concern here to make sure this data is not stale.\n      const readConcern = comments.readConcern\n\n      const aggregateResult = await comments.aggregate(pipeline, {\n        readConcern,\n      })\n\n      return await aggregateResult.toArray()\n    } catch (e) {\n      console.error(`Unable to retrieve most active commenters: ${e}`)\n      return { error: e }\n    }\n  }\n}\n\n/**\n * Success/Error return object\n * @typedef DAOResponse\n * @property {boolean} [success] - Success\n * @property {string} [error] - Error\n */\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\users.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.User = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _usersDAO = _interopRequireDefault(require(\"../dao/usersDAO\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar hashPassword = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(password) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _bcryptjs[\"default\"].hash(password, 10);\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function hashPassword(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar User = /*#__PURE__*/function () {\n  function User() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      name = _ref2.name,\n      email = _ref2.email,\n      password = _ref2.password,\n      _ref2$preferences = _ref2.preferences,\n      preferences = _ref2$preferences === void 0 ? {} : _ref2$preferences;\n    (0, _classCallCheck2[\"default\"])(this, User);\n    this.name = name;\n    this.email = email;\n    this.password = password;\n    this.preferences = preferences;\n  }\n  (0, _createClass2[\"default\"])(User, [{\n    key: \"toJson\",\n    value: function toJson() {\n      return {\n        name: this.name,\n        email: this.email,\n        preferences: this.preferences\n      };\n    }\n  }, {\n    key: \"comparePassword\",\n    value: function () {\n      var _comparePassword = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(plainText) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _bcryptjs[\"default\"].compare(plainText, this.password);\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function comparePassword(_x2) {\n        return _comparePassword.apply(this, arguments);\n      }\n      return comparePassword;\n    }()\n  }, {\n    key: \"encoded\",\n    value: function encoded() {\n      return _jsonwebtoken[\"default\"].sign(_objectSpread({\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4\n      }, this.toJson()), process.env.SECRET_KEY);\n    }\n  }], [{\n    key: \"decoded\",\n    value: function () {\n      var _decoded = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(userJwt) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", _jsonwebtoken[\"default\"].verify(userJwt, process.env.SECRET_KEY, function (error, res) {\n                  if (error) {\n                    return {\n                      error: error\n                    };\n                  }\n                  return new User(res);\n                }));\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      function decoded(_x3) {\n        return _decoded.apply(this, arguments);\n      }\n      return decoded;\n    }()\n  }]);\n  return User;\n}();\nexports.User = User;\nvar UserController = /*#__PURE__*/function () {\n  function UserController() {\n    (0, _classCallCheck2[\"default\"])(this, UserController);\n  }\n  (0, _createClass2[\"default\"])(UserController, null, [{\n    key: \"register\",\n    value: function () {\n      var _register = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(req, res) {\n        var userFromBody, errors, userInfo, insertResult, userFromDB, user;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 8;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n              case 8:\n                _context4.t0 = _objectSpread;\n                _context4.t1 = _objectSpread({}, userFromBody);\n                _context4.t2 = {};\n                _context4.next = 13;\n                return hashPassword(userFromBody.password);\n              case 13:\n                _context4.t3 = _context4.sent;\n                _context4.t4 = {\n                  password: _context4.t3\n                };\n                userInfo = (0, _context4.t0)(_context4.t1, _context4.t2, _context4.t4);\n                _context4.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n              case 18:\n                insertResult = _context4.sent;\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n                _context4.next = 22;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n              case 22:\n                userFromDB = _context4.sent;\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context4.next = 27;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context4.abrupt(\"return\");\n              case 27:\n                user = new User(userFromDB);\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context4.next = 34;\n                break;\n              case 31:\n                _context4.prev = 31;\n                _context4.t5 = _context4[\"catch\"](0);\n                res.status(500).json({\n                  error: _context4.t5\n                });\n              case 34:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 31]]);\n      }));\n      function register(_x4, _x5) {\n        return _register.apply(this, arguments);\n      }\n      return register;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(req, res, next) {\n        var _req$body, email, password, userData, user, loginResponse;\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _req$body = req.body, email = _req$body.email, password = _req$body.password;\n                if (!(!email || typeof email !== \"string\")) {\n                  _context5.next = 5;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad email format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 5:\n                if (!(!password || typeof password !== \"string\")) {\n                  _context5.next = 8;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 8:\n                _context5.next = 10;\n                return _usersDAO[\"default\"].getUser(email);\n              case 10:\n                userData = _context5.sent;\n                if (userData) {\n                  _context5.next = 14;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your email is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 14:\n                user = new User(userData);\n                _context5.next = 17;\n                return user.comparePassword(password);\n              case 17:\n                if (_context5.sent) {\n                  _context5.next = 20;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context5.abrupt(\"return\");\n              case 20:\n                _context5.next = 22;\n                return _usersDAO[\"default\"].loginUser(user.email, user.encoded());\n              case 22:\n                loginResponse = _context5.sent;\n                if (loginResponse.success) {\n                  _context5.next = 26;\n                  break;\n                }\n                res.status(500).json({\n                  error: loginResponse.error\n                });\n                return _context5.abrupt(\"return\");\n              case 26:\n                res.json({\n                  auth_token: user.encoded(),\n                  info: user.toJson()\n                });\n                _context5.next = 33;\n                break;\n              case 29:\n                _context5.prev = 29;\n                _context5.t0 = _context5[\"catch\"](0);\n                res.status(400).json({\n                  error: _context5.t0\n                });\n                return _context5.abrupt(\"return\");\n              case 33:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 29]]);\n      }));\n      function login(_x6, _x7, _x8) {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6(req, res) {\n        var userJwt, userObj, error, logoutResult;\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context6.next = 4;\n                return User.decoded(userJwt);\n              case 4:\n                userObj = _context6.sent;\n                error = userObj.error;\n                if (!error) {\n                  _context6.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n              case 9:\n                _context6.next = 11;\n                return _usersDAO[\"default\"].logoutUser(userObj.email);\n              case 11:\n                logoutResult = _context6.sent;\n                error = logoutResult.error;\n                if (!error) {\n                  _context6.next = 16;\n                  break;\n                }\n                res.status(500).json({\n                  error: error\n                });\n                return _context6.abrupt(\"return\");\n              case 16:\n                res.json(logoutResult);\n                _context6.next = 22;\n                break;\n              case 19:\n                _context6.prev = 19;\n                _context6.t0 = _context6[\"catch\"](0);\n                res.status(500).json(_context6.t0);\n              case 22:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 19]]);\n      }));\n      function logout(_x9, _x10) {\n        return _logout.apply(this, arguments);\n      }\n      return logout;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(req, res) {\n        var password, userJwt, userClaim, error, user, deleteResult;\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                password = req.body.password;\n                if (!(!password || typeof password !== \"string\")) {\n                  _context7.next = 5;\n                  break;\n                }\n                res.status(400).json({\n                  error: \"Bad password format, expected string.\"\n                });\n                return _context7.abrupt(\"return\");\n              case 5:\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context7.next = 8;\n                return User.decoded(userJwt);\n              case 8:\n                userClaim = _context7.sent;\n                error = userClaim.error;\n                if (!error) {\n                  _context7.next = 13;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n              case 13:\n                _context7.t0 = User;\n                _context7.next = 16;\n                return _usersDAO[\"default\"].getUser(userClaim.email);\n              case 16:\n                _context7.t1 = _context7.sent;\n                user = new _context7.t0(_context7.t1);\n                _context7.next = 20;\n                return user.comparePassword(password);\n              case 20:\n                if (_context7.sent) {\n                  _context7.next = 23;\n                  break;\n                }\n                res.status(401).json({\n                  error: \"Make sure your password is correct.\"\n                });\n                return _context7.abrupt(\"return\");\n              case 23:\n                _context7.next = 25;\n                return _usersDAO[\"default\"].deleteUser(userClaim.email);\n              case 25:\n                deleteResult = _context7.sent;\n                error = deleteResult.error;\n                if (!error) {\n                  _context7.next = 30;\n                  break;\n                }\n                res.status(500).json({\n                  error: error\n                });\n                return _context7.abrupt(\"return\");\n              case 30:\n                res.json(deleteResult);\n                _context7.next = 36;\n                break;\n              case 33:\n                _context7.prev = 33;\n                _context7.t2 = _context7[\"catch\"](0);\n                res.status(500).json(_context7.t2);\n              case 36:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 33]]);\n      }));\n      function _delete(_x11, _x12) {\n        return _delete2.apply(this, arguments);\n      }\n      return _delete;\n    }()\n  }, {\n    key: \"save\",\n    value: function () {\n      var _save = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(req, res) {\n        var userJwt, userFromHeader, error, userFromDB, updatedUser;\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                userJwt = req.get(\"Authorization\").slice(\"Bearer \".length);\n                _context8.next = 4;\n                return User.decoded(userJwt);\n              case 4:\n                userFromHeader = _context8.sent;\n                error = userFromHeader.error;\n                if (!error) {\n                  _context8.next = 9;\n                  break;\n                }\n                res.status(401).json({\n                  error: error\n                });\n                return _context8.abrupt(\"return\");\n              case 9:\n                _context8.next = 11;\n                return _usersDAO[\"default\"].updatePreferences(userFromHeader.email, req.body.preferences);\n              case 11:\n                _context8.next = 13;\n                return _usersDAO[\"default\"].getUser(userFromHeader.email);\n              case 13:\n                userFromDB = _context8.sent;\n                updatedUser = new User(userFromDB);\n                res.json({\n                  auth_token: updatedUser.encoded(),\n                  info: updatedUser.toJson()\n                });\n                _context8.next = 21;\n                break;\n              case 18:\n                _context8.prev = 18;\n                _context8.t0 = _context8[\"catch\"](0);\n                res.status(500).json(_context8.t0);\n              case 21:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 18]]);\n      }));\n      function save(_x13, _x14) {\n        return _save.apply(this, arguments);\n      }\n      return save;\n    }() // for internal use only\n  }, {\n    key: \"createAdminUser\",\n    value: function () {\n      var _createAdminUser = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee9(req, res) {\n        var userFromBody, errors, userInfo, insertResult, makeAdminResponse, userFromDB, user, _jwt, loginResponse;\n        return _regenerator[\"default\"].wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                userFromBody = req.body;\n                errors = {};\n                if (userFromBody && userFromBody.password.length < 8) {\n                  errors.password = \"Your password must be at least 8 characters.\";\n                }\n                if (userFromBody && userFromBody.name.length < 3) {\n                  errors.name = \"You must specify a name of at least 3 characters.\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 8;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 8:\n                _context9.t0 = _objectSpread;\n                _context9.t1 = _objectSpread({}, userFromBody);\n                _context9.t2 = {};\n                _context9.next = 13;\n                return hashPassword(userFromBody.password);\n              case 13:\n                _context9.t3 = _context9.sent;\n                _context9.t4 = {\n                  password: _context9.t3\n                };\n                userInfo = (0, _context9.t0)(_context9.t1, _context9.t2, _context9.t4);\n                _context9.next = 18;\n                return _usersDAO[\"default\"].addUser(userInfo);\n              case 18:\n                insertResult = _context9.sent;\n                if (!insertResult.success) {\n                  errors.email = insertResult.error;\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 23;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 23:\n                _context9.next = 25;\n                return _usersDAO[\"default\"].makeAdmin(userFromBody.email);\n              case 25:\n                makeAdminResponse = _context9.sent;\n                _context9.next = 28;\n                return _usersDAO[\"default\"].getUser(userFromBody.email);\n              case 28:\n                userFromDB = _context9.sent;\n                if (!userFromDB) {\n                  errors.general = \"Internal error, please try again later\";\n                }\n                if (!(Object.keys(errors).length > 0)) {\n                  _context9.next = 33;\n                  break;\n                }\n                res.status(400).json(errors);\n                return _context9.abrupt(\"return\");\n              case 33:\n                user = new User(userFromDB);\n                _jwt = user.encoded();\n                _context9.next = 37;\n                return _usersDAO[\"default\"].loginUser(user.email, _jwt);\n              case 37:\n                loginResponse = _context9.sent;\n                res.json({\n                  auth_token: _jwt,\n                  info: user.toJson()\n                });\n                _context9.next = 44;\n                break;\n              case 41:\n                _context9.prev = 41;\n                _context9.t5 = _context9[\"catch\"](0);\n                res.status(500).json(_context9.t5);\n              case 44:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 41]]);\n      }));\n      function createAdminUser(_x15, _x16) {\n        return _createAdminUser.apply(this, arguments);\n      }\n      return createAdminUser;\n    }()\n  }]);\n  return UserController;\n}();\nexports[\"default\"] = UserController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicHJlZmVyZW5jZXMiLCJwbGFpblRleHQiLCJjb21wYXJlIiwiand0Iiwic2lnbiIsImV4cCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJ0b0pzb24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsInVzZXJKd3QiLCJ2ZXJpZnkiLCJlcnJvciIsInJlcyIsIlVzZXJDb250cm9sbGVyIiwicmVxIiwidXNlckZyb21Cb2R5IiwiYm9keSIsImVycm9ycyIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJzdGF0dXMiLCJqc29uIiwidXNlckluZm8iLCJVc2Vyc0RBTyIsImFkZFVzZXIiLCJpbnNlcnRSZXN1bHQiLCJzdWNjZXNzIiwiZ2V0VXNlciIsInVzZXJGcm9tREIiLCJnZW5lcmFsIiwidXNlciIsImF1dGhfdG9rZW4iLCJlbmNvZGVkIiwiaW5mbyIsIm5leHQiLCJ1c2VyRGF0YSIsImNvbXBhcmVQYXNzd29yZCIsImxvZ2luVXNlciIsImxvZ2luUmVzcG9uc2UiLCJnZXQiLCJzbGljZSIsImRlY29kZWQiLCJ1c2VyT2JqIiwibG9nb3V0VXNlciIsImxvZ291dFJlc3VsdCIsInVzZXJDbGFpbSIsImRlbGV0ZVVzZXIiLCJkZWxldGVSZXN1bHQiLCJ1c2VyRnJvbUhlYWRlciIsInVwZGF0ZVByZWZlcmVuY2VzIiwidXBkYXRlZFVzZXIiLCJtYWtlQWRtaW4iLCJtYWtlQWRtaW5SZXNwb25zZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxjb25zY1xcRGVza3RvcFxcbWZsaXgtLWpzXFxzcmNcXGFwaVxcIiwic291cmNlcyI6WyJ1c2Vycy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiXG5pbXBvcnQgVXNlcnNEQU8gZnJvbSBcIi4uL2Rhby91c2Vyc0RBT1wiXG5cbmNvbnN0IGhhc2hQYXNzd29yZCA9IGFzeW5jIHBhc3N3b3JkID0+IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcblxuZXhwb3J0IGNsYXNzIFVzZXIge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcHJlZmVyZW5jZXMgPSB7fSB9ID0ge30pIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5lbWFpbCA9IGVtYWlsXG4gICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkXG4gICAgdGhpcy5wcmVmZXJlbmNlcyA9IHByZWZlcmVuY2VzXG4gIH1cbiAgdG9Kc29uKCkge1xuICAgIHJldHVybiB7IG5hbWU6IHRoaXMubmFtZSwgZW1haWw6IHRoaXMuZW1haWwsIHByZWZlcmVuY2VzOiB0aGlzLnByZWZlcmVuY2VzIH1cbiAgfVxuICBhc3luYyBjb21wYXJlUGFzc3dvcmQocGxhaW5UZXh0KSB7XG4gICAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKHBsYWluVGV4dCwgdGhpcy5wYXNzd29yZClcbiAgfVxuICBlbmNvZGVkKCkge1xuICAgIHJldHVybiBqd3Quc2lnbihcbiAgICAgIHtcbiAgICAgICAgZXhwOiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArIDYwICogNjAgKiA0LFxuICAgICAgICAuLi50aGlzLnRvSnNvbigpLFxuICAgICAgfSxcbiAgICAgIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksXG4gICAgKVxuICB9XG4gIHN0YXRpYyBhc3luYyBkZWNvZGVkKHVzZXJKd3QpIHtcbiAgICByZXR1cm4gand0LnZlcmlmeSh1c2VySnd0LCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZLCAoZXJyb3IsIHJlcykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7IGVycm9yIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgVXNlcihyZXMpXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyQ29udHJvbGxlciB7XG4gIHN0YXRpYyBhc3luYyByZWdpc3RlcihyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyRnJvbUJvZHkgPSByZXEuYm9keVxuICAgICAgbGV0IGVycm9ycyA9IHt9XG4gICAgICBpZiAodXNlckZyb21Cb2R5ICYmIHVzZXJGcm9tQm9keS5wYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9IFwiWW91ciBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycy5cIlxuICAgICAgfVxuICAgICAgaWYgKHVzZXJGcm9tQm9keSAmJiB1c2VyRnJvbUJvZHkubmFtZS5sZW5ndGggPCAzKSB7XG4gICAgICAgIGVycm9ycy5uYW1lID0gXCJZb3UgbXVzdCBzcGVjaWZ5IGEgbmFtZSBvZiBhdCBsZWFzdCAzIGNoYXJhY3RlcnMuXCJcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VySW5mbyA9IHtcbiAgICAgICAgLi4udXNlckZyb21Cb2R5LFxuICAgICAgICBwYXNzd29yZDogYXdhaXQgaGFzaFBhc3N3b3JkKHVzZXJGcm9tQm9keS5wYXNzd29yZCksXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluc2VydFJlc3VsdCA9IGF3YWl0IFVzZXJzREFPLmFkZFVzZXIodXNlckluZm8pXG4gICAgICBpZiAoIWluc2VydFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9IGluc2VydFJlc3VsdC5lcnJvclxuICAgICAgfVxuICAgICAgY29uc3QgdXNlckZyb21EQiA9IGF3YWl0IFVzZXJzREFPLmdldFVzZXIodXNlckZyb21Cb2R5LmVtYWlsKVxuICAgICAgaWYgKCF1c2VyRnJvbURCKSB7XG4gICAgICAgIGVycm9ycy5nZW5lcmFsID0gXCJJbnRlcm5hbCBlcnJvciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwiXG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHVzZXJGcm9tREIpXG5cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgYXV0aF90b2tlbjogdXNlci5lbmNvZGVkKCksXG4gICAgICAgIGluZm86IHVzZXIudG9Kc29uKCksXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGUgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9naW4ocmVxLCByZXMsIG5leHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gICAgICBpZiAoIWVtYWlsIHx8IHR5cGVvZiBlbWFpbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkJhZCBlbWFpbCBmb3JtYXQsIGV4cGVjdGVkIHN0cmluZy5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQmFkIHBhc3N3b3JkIGZvcm1hdCwgZXhwZWN0ZWQgc3RyaW5nLlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbGV0IHVzZXJEYXRhID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcihlbWFpbClcbiAgICAgIGlmICghdXNlckRhdGEpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJNYWtlIHN1cmUgeW91ciBlbWFpbCBpcyBjb3JyZWN0LlwiIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHVzZXJEYXRhKVxuXG4gICAgICBpZiAoIShhd2FpdCB1c2VyLmNvbXBhcmVQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiTWFrZSBzdXJlIHlvdXIgcGFzc3dvcmQgaXMgY29ycmVjdC5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgbG9naW5SZXNwb25zZSA9IGF3YWl0IFVzZXJzREFPLmxvZ2luVXNlcih1c2VyLmVtYWlsLCB1c2VyLmVuY29kZWQoKSlcbiAgICAgIGlmICghbG9naW5SZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGxvZ2luUmVzcG9uc2UuZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICByZXMuanNvbih7IGF1dGhfdG9rZW46IHVzZXIuZW5jb2RlZCgpLCBpbmZvOiB1c2VyLnRvSnNvbigpIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZSB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvZ291dChyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlck9iaiA9IGF3YWl0IFVzZXIuZGVjb2RlZCh1c2VySnd0KVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IHVzZXJPYmpcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgbG9nb3V0UmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8ubG9nb3V0VXNlcih1c2VyT2JqLmVtYWlsKVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IGxvZ291dFJlc3VsdFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICByZXMuanNvbihsb2dvdXRSZXN1bHQpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCB7IHBhc3N3b3JkIH0gPSByZXEuYm9keVxuICAgICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJCYWQgcGFzc3dvcmQgZm9ybWF0LCBleHBlY3RlZCBzdHJpbmcuXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlckNsYWltID0gYXdhaXQgVXNlci5kZWNvZGVkKHVzZXJKd3QpXG4gICAgICB2YXIgeyBlcnJvciB9ID0gdXNlckNsYWltXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvciB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihhd2FpdCBVc2Vyc0RBTy5nZXRVc2VyKHVzZXJDbGFpbS5lbWFpbCkpXG4gICAgICBpZiAoIShhd2FpdCB1c2VyLmNvbXBhcmVQYXNzd29yZChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiTWFrZSBzdXJlIHlvdXIgcGFzc3dvcmQgaXMgY29ycmVjdC5cIiB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3VsdCA9IGF3YWl0IFVzZXJzREFPLmRlbGV0ZVVzZXIodXNlckNsYWltLmVtYWlsKVxuICAgICAgdmFyIHsgZXJyb3IgfSA9IGRlbGV0ZVJlc3VsdFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICByZXMuanNvbihkZWxldGVSZXN1bHQpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZShyZXEsIHJlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySnd0ID0gcmVxLmdldChcIkF1dGhvcml6YXRpb25cIikuc2xpY2UoXCJCZWFyZXIgXCIubGVuZ3RoKVxuICAgICAgY29uc3QgdXNlckZyb21IZWFkZXIgPSBhd2FpdCBVc2VyLmRlY29kZWQodXNlckp3dClcbiAgICAgIHZhciB7IGVycm9yIH0gPSB1c2VyRnJvbUhlYWRlclxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3IgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IFVzZXJzREFPLnVwZGF0ZVByZWZlcmVuY2VzKFxuICAgICAgICB1c2VyRnJvbUhlYWRlci5lbWFpbCxcbiAgICAgICAgcmVxLmJvZHkucHJlZmVyZW5jZXMsXG4gICAgICApXG4gICAgICBjb25zdCB1c2VyRnJvbURCID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcih1c2VyRnJvbUhlYWRlci5lbWFpbClcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gbmV3IFVzZXIodXNlckZyb21EQilcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBhdXRoX3Rva2VuOiB1cGRhdGVkVXNlci5lbmNvZGVkKCksXG4gICAgICAgIGluZm86IHVwZGF0ZWRVc2VyLnRvSnNvbigpLFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlKVxuICAgIH1cbiAgfVxuXG4gIC8vIGZvciBpbnRlcm5hbCB1c2Ugb25seVxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQWRtaW5Vc2VyKHJlcSwgcmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJGcm9tQm9keSA9IHJlcS5ib2R5XG4gICAgICBsZXQgZXJyb3JzID0ge31cbiAgICAgIGlmICh1c2VyRnJvbUJvZHkgJiYgdXNlckZyb21Cb2R5LnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJZb3VyIHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzLlwiXG4gICAgICB9XG4gICAgICBpZiAodXNlckZyb21Cb2R5ICYmIHVzZXJGcm9tQm9keS5uYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgZXJyb3JzLm5hbWUgPSBcIllvdSBtdXN0IHNwZWNpZnkgYSBuYW1lIG9mIGF0IGxlYXN0IDMgY2hhcmFjdGVycy5cIlxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9ycylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgICAuLi51c2VyRnJvbUJvZHksXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBoYXNoUGFzc3dvcmQodXNlckZyb21Cb2R5LnBhc3N3b3JkKSxcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0ID0gYXdhaXQgVXNlcnNEQU8uYWRkVXNlcih1c2VySW5mbylcbiAgICAgIGlmICghaW5zZXJ0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gaW5zZXJ0UmVzdWx0LmVycm9yXG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyb3JzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWFrZUFkbWluUmVzcG9uc2UgPSBhd2FpdCBVc2Vyc0RBTy5tYWtlQWRtaW4odXNlckZyb21Cb2R5LmVtYWlsKVxuXG4gICAgICBjb25zdCB1c2VyRnJvbURCID0gYXdhaXQgVXNlcnNEQU8uZ2V0VXNlcih1c2VyRnJvbUJvZHkuZW1haWwpXG4gICAgICBpZiAoIXVzZXJGcm9tREIpIHtcbiAgICAgICAgZXJyb3JzLmdlbmVyYWwgPSBcIkludGVybmFsIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCJcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnJvcnMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIodXNlckZyb21EQilcbiAgICAgIGNvbnN0IGp3dCA9IHVzZXIuZW5jb2RlZCgpXG4gICAgICBjb25zdCBsb2dpblJlc3BvbnNlID0gYXdhaXQgVXNlcnNEQU8ubG9naW5Vc2VyKHVzZXIuZW1haWwsIGp3dClcblxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBhdXRoX3Rva2VuOiBqd3QsXG4gICAgICAgIGluZm86IHVzZXIudG9Kc29uKCksXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGUpXG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUFzQztBQUFBO0FBRXRDLElBQU1BLFlBQVk7RUFBQSx5RkFBRyxpQkFBTUMsUUFBUTtJQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7WUFBQSxPQUFVQyxvQkFBTSxDQUFDQyxJQUFJLENBQUNGLFFBQVEsRUFBRSxFQUFFLENBQUM7VUFBQTtZQUFBO1VBQUE7VUFBQTtZQUFBO1FBQUE7TUFBQTtJQUFBO0VBQUE7RUFBQSxnQkFBaEVELFlBQVk7SUFBQTtFQUFBO0FBQUEsR0FBb0Q7QUFBQSxJQUV6REksSUFBSTtFQUNmLGdCQUE4RDtJQUFBLGdGQUFKLENBQUMsQ0FBQztNQUE5Q0MsSUFBSSxTQUFKQSxJQUFJO01BQUVDLEtBQUssU0FBTEEsS0FBSztNQUFFTCxRQUFRLFNBQVJBLFFBQVE7TUFBQSwwQkFBRU0sV0FBVztNQUFYQSxXQUFXLGtDQUFHLENBQUMsQ0FBQztJQUFBO0lBQ25ELElBQUksQ0FBQ0YsSUFBSSxHQUFHQSxJQUFJO0lBQ2hCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0wsUUFBUSxHQUFHQSxRQUFRO0lBQ3hCLElBQUksQ0FBQ00sV0FBVyxHQUFHQSxXQUFXO0VBQ2hDO0VBQUM7SUFBQTtJQUFBLE9BQ0Qsa0JBQVM7TUFDUCxPQUFPO1FBQUVGLElBQUksRUFBRSxJQUFJLENBQUNBLElBQUk7UUFBRUMsS0FBSyxFQUFFLElBQUksQ0FBQ0EsS0FBSztRQUFFQyxXQUFXLEVBQUUsSUFBSSxDQUFDQTtNQUFZLENBQUM7SUFDOUU7RUFBQztJQUFBO0lBQUE7TUFBQSxxR0FDRCxrQkFBc0JDLFNBQVM7UUFBQTtVQUFBO1lBQUE7Y0FBQTtnQkFBQTtnQkFBQSxPQUNoQk4sb0JBQU0sQ0FBQ08sT0FB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","map":{"version":3,"names":["hashPassword","password","bcrypt","hash","User","name","email","preferences","plainText","compare","jwt","sign","exp","Math","floor","Date","now","toJson","process","env","SECRET_KEY","userJwt","verify","error","res","UserController","req","userFromBody","body","errors","length","Object","keys","status","json","userInfo","UsersDAO","addUser","insertResult","success","getUser","userFromDB","general","user","auth_token","encoded","info","next","userData","comparePassword","loginUser","loginResponse","get","slice","decoded","userObj","logoutUser","logoutResult","userClaim","deleteUser","deleteResult","userFromHeader","updatePreferences","updatedUser","makeAdmin","makeAdminResponse"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\api\\","sources":["users.controller.js"],"sourcesContent":["import bcrypt from \"bcryptjs\"\nimport jwt from \"jsonwebtoken\"\nimport UsersDAO from \"../dao/usersDAO\"\n\nconst hashPassword = async password => await bcrypt.hash(password, 10)\n\nexport class User {\n  constructor({ name, email, password, preferences = {} } = {}) {\n    this.name = name\n    this.email = email\n    this.password = password\n    this.preferences = preferences\n  }\n  toJson() {\n    return { name: this.name, email: this.email, preferences: this.preferences }\n  }\n  async comparePassword(plainText) {\n    return await bcrypt.compare(plainText, this.password)\n  }\n  encoded() {\n    return jwt.sign(\n      {\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 4,\n        ...this.toJson(),\n      },\n      process.env.SECRET_KEY,\n    )\n  }\n  static async decoded(userJwt) {\n    return jwt.verify(userJwt, process.env.SECRET_KEY, (error, res) => {\n      if (error) {\n        return { error }\n      }\n      return new User(res)\n    })\n  }\n}\n\nexport default class UserController {\n  static async register(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n\n      res.json({\n        auth_token: user.encoded(),\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json({ error: e })\n    }\n  }\n\n  static async login(req, res, next) {\n    try {\n      const { email, password } = req.body\n      if (!email || typeof email !== \"string\") {\n        res.status(400).json({ error: \"Bad email format, expected string.\" })\n        return\n      }\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      let userData = await UsersDAO.getUser(email)\n      if (!userData) {\n        res.status(401).json({ error: \"Make sure your email is correct.\" })\n        return\n      }\n      const user = new User(userData)\n\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n\n      const loginResponse = await UsersDAO.loginUser(user.email, user.encoded())\n      if (!loginResponse.success) {\n        res.status(500).json({ error: loginResponse.error })\n        return\n      }\n      res.json({ auth_token: user.encoded(), info: user.toJson() })\n    } catch (e) {\n      res.status(400).json({ error: e })\n      return\n    }\n  }\n\n  static async logout(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userObj = await User.decoded(userJwt)\n      var { error } = userObj\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const logoutResult = await UsersDAO.logoutUser(userObj.email)\n      var { error } = logoutResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(logoutResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async delete(req, res) {\n    try {\n      let { password } = req.body\n      if (!password || typeof password !== \"string\") {\n        res.status(400).json({ error: \"Bad password format, expected string.\" })\n        return\n      }\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userClaim = await User.decoded(userJwt)\n      var { error } = userClaim\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n      const user = new User(await UsersDAO.getUser(userClaim.email))\n      if (!(await user.comparePassword(password))) {\n        res.status(401).json({ error: \"Make sure your password is correct.\" })\n        return\n      }\n      const deleteResult = await UsersDAO.deleteUser(userClaim.email)\n      var { error } = deleteResult\n      if (error) {\n        res.status(500).json({ error })\n        return\n      }\n      res.json(deleteResult)\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  static async save(req, res) {\n    try {\n      const userJwt = req.get(\"Authorization\").slice(\"Bearer \".length)\n      const userFromHeader = await User.decoded(userJwt)\n      var { error } = userFromHeader\n      if (error) {\n        res.status(401).json({ error })\n        return\n      }\n\n      await UsersDAO.updatePreferences(\n        userFromHeader.email,\n        req.body.preferences,\n      )\n      const userFromDB = await UsersDAO.getUser(userFromHeader.email)\n      const updatedUser = new User(userFromDB)\n\n      res.json({\n        auth_token: updatedUser.encoded(),\n        info: updatedUser.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n\n  // for internal use only\n  static async createAdminUser(req, res) {\n    try {\n      const userFromBody = req.body\n      let errors = {}\n      if (userFromBody && userFromBody.password.length < 8) {\n        errors.password = \"Your password must be at least 8 characters.\"\n      }\n      if (userFromBody && userFromBody.name.length < 3) {\n        errors.name = \"You must specify a name of at least 3 characters.\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const userInfo = {\n        ...userFromBody,\n        password: await hashPassword(userFromBody.password),\n      }\n\n      const insertResult = await UsersDAO.addUser(userInfo)\n      if (!insertResult.success) {\n        errors.email = insertResult.error\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const makeAdminResponse = await UsersDAO.makeAdmin(userFromBody.email)\n\n      const userFromDB = await UsersDAO.getUser(userFromBody.email)\n      if (!userFromDB) {\n        errors.general = \"Internal error, please try again later\"\n      }\n\n      if (Object.keys(errors).length > 0) {\n        res.status(400).json(errors)\n        return\n      }\n\n      const user = new User(userFromDB)\n      const jwt = user.encoded()\n      const loginResponse = await UsersDAO.loginUser(user.email, jwt)\n\n      res.json({\n        auth_token: jwt,\n        info: user.toJson(),\n      })\n    } catch (e) {\n      res.status(500).json(e)\n    }\n  }\n}\n"],"mappings":"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"}},"mtime":1640991600000},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"filename\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\\\\src\\\\api\\\\users.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\consc\\\\Desktop\\\\mflix--js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _express = require(\"express\");\nvar _users = _interopRequireDefault(require(\"./users.controller\"));\nvar _comments = _interopRequireDefault(require(\"./comments.controller\"));\nvar router = new _express.Router();\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(_users[\"default\"].register);\nrouter.route(\"/login\").post(_users[\"default\"].login);\nrouter.route(\"/logout\").post(_users[\"default\"].logout);\nrouter.route(\"/delete\")[\"delete\"](_users[\"default\"][\"delete\"]);\nrouter.route(\"/update-preferences\").put(_users[\"default\"].save);\nrouter.route(\"/comment-report\").get(_comments[\"default\"].apiCommentReport);\nrouter.route(\"/make-admin\").post(_users[\"default\"].createAdminUser);\nvar _default = router;\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZSIsInBvc3QiLCJ1c2Vyc0N0cmwiLCJyZWdpc3RlciIsImxvZ2luIiwibG9nb3V0IiwicHV0Iiwic2F2ZSIsImdldCIsImNvbW1lbnRzQ3RybCIsImFwaUNvbW1lbnRSZXBvcnQiLCJjcmVhdGVBZG1pblVzZXIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcY29uc2NcXERlc2t0b3BcXG1mbGl4LS1qc1xcc3JjXFxhcGlcXCIsInNvdXJjZXMiOlsidXNlcnMucm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIlxuaW1wb3J0IHVzZXJzQ3RybCBmcm9tIFwiLi91c2Vycy5jb250cm9sbGVyXCJcbmltcG9ydCBjb21tZW50c0N0cmwgZnJvbSBcIi4vY29tbWVudHMuY29udHJvbGxlclwiXG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG4vLyBhc3NvY2lhdGUgcHV0LCBkZWxldGUsIGFuZCBnZXQoaWQpXG5yb3V0ZXIucm91dGUoXCIvcmVnaXN0ZXJcIikucG9zdCh1c2Vyc0N0cmwucmVnaXN0ZXIpXG5yb3V0ZXIucm91dGUoXCIvbG9naW5cIikucG9zdCh1c2Vyc0N0cmwubG9naW4pXG5yb3V0ZXIucm91dGUoXCIvbG9nb3V0XCIpLnBvc3QodXNlcnNDdHJsLmxvZ291dClcbnJvdXRlci5yb3V0ZShcIi9kZWxldGVcIikuZGVsZXRlKHVzZXJzQ3RybC5kZWxldGUpXG5yb3V0ZXIucm91dGUoXCIvdXBkYXRlLXByZWZlcmVuY2VzXCIpLnB1dCh1c2Vyc0N0cmwuc2F2ZSlcbnJvdXRlci5yb3V0ZShcIi9jb21tZW50LXJlcG9ydFwiKS5nZXQoY29tbWVudHNDdHJsLmFwaUNvbW1lbnRSZXBvcnQpXG5yb3V0ZXIucm91dGUoXCIvbWFrZS1hZG1pblwiKS5wb3N0KHVzZXJzQ3RybC5jcmVhdGVBZG1pblVzZXIpXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUEsSUFBTUEsTUFBTSxHQUFHLElBQUlDLGVBQU0sRUFBRTs7QUFFM0I7QUFDQUQsTUFBTSxDQUFDRSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUNDLElBQUksQ0FBQ0MsaUJBQVMsQ0FBQ0MsUUFBUSxDQUFDO0FBQ2xETCxNQUFNLENBQUNFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsSUFBSSxDQUFDQyxpQkFBUyxDQUFDRSxLQUFLLENBQUM7QUFDNUNOLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxJQUFJLENBQUNDLGlCQUFTLENBQUNHLE1BQU0sQ0FBQztBQUM5Q1AsTUFBTSxDQUFDRSxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQU8sQ0FBQ0UsaUJBQVMsVUFBTyxDQUFDO0FBQ2hESixNQUFNLENBQUNFLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDTSxHQUFHLENBQUNKLGlCQUFTLENBQUNLLElBQUksQ0FBQztBQUN2RFQsTUFBTSxDQUFDRSxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQ1EsR0FBRyxDQUFDQyxvQkFBWSxDQUFDQyxnQkFBZ0IsQ0FBQztBQUNsRVosTUFBTSxDQUFDRSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUNDLElBQUksQ0FBQ0MsaUJBQVMsQ0FBQ1MsZUFBZSxDQUFDO0FBQUEsZUFFNUNiLE1BQU07QUFBQSJ9","map":{"version":3,"names":["router","Router","route","post","usersCtrl","register","login","logout","put","save","get","commentsCtrl","apiCommentReport","createAdminUser"],"sourceRoot":"C:\\Users\\consc\\Desktop\\mflix--js\\src\\api\\","sources":["users.route.js"],"sourcesContent":["import { Router } from \"express\"\nimport usersCtrl from \"./users.controller\"\nimport commentsCtrl from \"./comments.controller\"\n\nconst router = new Router()\n\n// associate put, delete, and get(id)\nrouter.route(\"/register\").post(usersCtrl.register)\nrouter.route(\"/login\").post(usersCtrl.login)\nrouter.route(\"/logout\").post(usersCtrl.logout)\nrouter.route(\"/delete\").delete(usersCtrl.delete)\nrouter.route(\"/update-preferences\").put(usersCtrl.save)\nrouter.route(\"/comment-report\").get(commentsCtrl.apiCommentReport)\nrouter.route(\"/make-admin\").post(usersCtrl.createAdminUser)\n\nexport default router\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA,IAAMA,MAAM,GAAG,IAAIC,eAAM,EAAE;;AAE3B;AACAD,MAAM,CAACE,KAAK,CAAC,WAAW,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACC,QAAQ,CAAC;AAClDL,MAAM,CAACE,KAAK,CAAC,QAAQ,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACE,KAAK,CAAC;AAC5CN,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACG,MAAM,CAAC;AAC9CP,MAAM,CAACE,KAAK,CAAC,SAAS,CAAC,UAAO,CAACE,iBAAS,UAAO,CAAC;AAChDJ,MAAM,CAACE,KAAK,CAAC,qBAAqB,CAAC,CAACM,GAAG,CAACJ,iBAAS,CAACK,IAAI,CAAC;AACvDT,MAAM,CAACE,KAAK,CAAC,iBAAiB,CAAC,CAACQ,GAAG,CAACC,oBAAY,CAACC,gBAAgB,CAAC;AAClEZ,MAAM,CAACE,KAAK,CAAC,aAAa,CAAC,CAACC,IAAI,CAACC,iBAAS,CAACS,eAAe,CAAC;AAAA,eAE5Cb,MAAM;AAAA"}},"mtime":1640991600000}}